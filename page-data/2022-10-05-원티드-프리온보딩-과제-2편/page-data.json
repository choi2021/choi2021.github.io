{"componentChunkName":"component---src-templates-post-jsx","path":"/2022-10-05-원티드-프리온보딩-과제-2편/","result":{"data":{"site":{"siteMetadata":{"title":"Troy DevLog"}},"markdownRemark":{"id":"8f528507-7947-5722-98ca-a48e13d7f591","excerpt":"Assignment 2) 어제에 이어 API 에러를 해결하기 위해 다시 시도했지만 여전히 같은 에러가 보였다. 뭐가 잘못된건지 다시 한번 확인하러 안내페이지에 다시갔더니....  API 주소가 바뀌어 있었다....ㅜㅜㅜㅜ 어제 안된건 내가 잘못 입력한 게 아니라 진짜 서버가 꺼져있었거나, 주소를 잘못 제공받았던건가 보다...  API주소가 처음부터 맞게 …","html":"<h2>Assignment 2)</h2>\n<p>어제에 이어 API 에러를 해결하기 위해 다시 시도했지만 여전히 같은 에러가 보였다. 뭐가 잘못된건지 다시 한번 확인하러 안내페이지에 다시갔더니....</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/1e2c45bd87ac626387930d2a1d1dbe21/fe70a/%EB%B0%94%EB%80%90API.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 12.941176470588234%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOUlEQVR42p2NOw4AEBAF9/6nRTysz1uJUGgUJlNMN6Ja7RfJRUkb5HZc8UYABFSPHlJ3cXlaG9/nCbzYseBVRFENAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='바뀐 API 주소' title='' src='/static/1e2c45bd87ac626387930d2a1d1dbe21/ca1dc/%EB%B0%94%EB%80%90API.png' srcset='/static/1e2c45bd87ac626387930d2a1d1dbe21/e7570/%EB%B0%94%EB%80%90API.png 170w,\n/static/1e2c45bd87ac626387930d2a1d1dbe21/f46e7/%EB%B0%94%EB%80%90API.png 340w,\n/static/1e2c45bd87ac626387930d2a1d1dbe21/ca1dc/%EB%B0%94%EB%80%90API.png 680w,\n/static/1e2c45bd87ac626387930d2a1d1dbe21/02d09/%EB%B0%94%EB%80%90API.png 1020w,\n/static/1e2c45bd87ac626387930d2a1d1dbe21/fe70a/%EB%B0%94%EB%80%90API.png 1122w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>바뀐 API 주소</figcaption>\n  </figure></p>\n<p>API 주소가 바뀌어 있었다....ㅜㅜㅜㅜ 어제 안된건 내가 잘못 입력한 게 아니라 진짜 서버가 꺼져있었거나, 주소를 잘못 제공받았던건가 보다...</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/e0b3d5b53b8f2f6b4972bf93bdb69d00/9d874/%EC%84%B1%EA%B3%B5API.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 24.705882352941178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVR42pWP2wrDMAxD8//fOSiM5urYcWwnXbqxt7UwIYwedDByuUAIqRTMmUTEWjNEhapQtMI7w+lStC1xa51ImFnVHCOnLaZYqcnxp5xw948FI1L/XZnzEjaxvEVKYABTdFXnGMvH+Iabz517enrad/AeQxiIa6fReT+bb+AXXyolraKnxCoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='회원가입에 성공한 API결과' title='' src='/static/e0b3d5b53b8f2f6b4972bf93bdb69d00/ca1dc/%EC%84%B1%EA%B3%B5API.png' srcset='/static/e0b3d5b53b8f2f6b4972bf93bdb69d00/e7570/%EC%84%B1%EA%B3%B5API.png 170w,\n/static/e0b3d5b53b8f2f6b4972bf93bdb69d00/f46e7/%EC%84%B1%EA%B3%B5API.png 340w,\n/static/e0b3d5b53b8f2f6b4972bf93bdb69d00/ca1dc/%EC%84%B1%EA%B3%B5API.png 680w,\n/static/e0b3d5b53b8f2f6b4972bf93bdb69d00/9d874/%EC%84%B1%EA%B3%B5API.png 1012w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>회원가입에 성공한 API결과</figcaption>\n  </figure></p>\n<p>API주소가 처음부터 맞게 제공되었다면 좋았겠지만, 이번 경험을 통해서 내가 너무 <strong>REST API나 HTTP통신을 잘모르구나</strong>를 많이 느꼈다. 우선 과제를 2번과 3번을 마무리하고, HTTP서버 통신, 토큰, 쿠키, JWT등 서버 통신을 한번 정리할 필요를 느꼈다.</p>\n<p>API를 이제 사용할 수 있으니 각각 submit에 연결만 하면 쉽게 연결할 수 있었다. 위에 받아온 response를 이용해 로직을 작성했다. 과제 안내에 axios를 쓸 수 있다고 했지만 우선은 fetch만을 이용해서 작성한 후에 axios로 코드를 수정해보려고 계획했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javscript\"><pre class=\"language-javscript\"><code class=\"language-javscript\">//api.js\nconst BASE_URL = &#39;https://pre-onboarding-selection-task.shop/&#39;;\n\nexport function postSignUp(data) {\n  const { email, password } = data;\n  return fetch(`${BASE_URL}auth/signup`, {\n    method: &#39;POST&#39;,\n    headers: {\n      &#39;Content-Type&#39;: &#39;application/json&#39;,\n    },\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  });\n}\n\nexport function postSignIn(data) {\n  const { email, password } = data;\n  return fetch(`${BASE_URL}auth/signin`, {\n    method: &#39;POST&#39;,\n    headers: {\n      &#39;Content-Type&#39;: &#39;application/json&#39;,\n    },\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  });\n}</code></pre></div>\n<p>api.js를 보면 url만 다르고 너무 동일한 게 보여서 코드 중복을 줄일 방법에 대해 고민하는 것도 너무 좋은 공부가 될 것 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//login.jsx</span>\n<span class=\"token operator\">...</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">loginMessage</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">registerMessage</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">loginSuccess</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">registerSuccess</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleLoginSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> email<span class=\"token punctuation\">,</span> password <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> loginInfo<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">postSignIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      email<span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> loginMessage <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">>=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          loginMessage <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">;</span>\n          <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n              loginMessage<span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">loginSuccess</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/todo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'loginToken'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span>access_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">loginMessage</span><span class=\"token operator\">:</span> <span class=\"token string\">'로그인에 성공했습니다'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">loginSuccess</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleRegisterSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> email<span class=\"token punctuation\">,</span> password <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> registerInfo<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">postSignUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      email<span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">>=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">registerMessage</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">registerSuccess</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">registerMessage</span><span class=\"token operator\">:</span> <span class=\"token string\">'회원가입에 성공했습니다'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">registerSuccess</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>fetch를 이용해 코딩했기 때문에 에러처리를 catch를 사용해도 해결하지 못했다. 우선은 예외처리를 response에서 처리하려 했지만 response에서 처리할 경우에 서버에서 보내 준 에러 메시지를 이용하지 못했다. 그래서 data를 json으로 바꿔서 받아와 data에서 statusCode에 따라 400번 이상의 에러는 로그인과 회원가입 창에 해당 에러 메시지를 보여 주는 식으로 구성했다. 에러에 따라 달라지는 메시지를 담을 수 있게 message 상태를 추가했고 로그인과 회원가입이 성공했는가에 따라 메시지 보여주는 곳의 색깔을 다르게 전달해주기 위해 각각 success에 관한 내용도 message 상태에 포함시켰다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/ebbf146388114679d6876b02f0c201db/e71fd/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 47.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+0lEQVR42pWRUU+DQAzH9/0/yMZMZBoWHxdgJnue3KEMx65AuTsOJLIlagycB9mTL0rTNE3TX9p/O9NaU9UuaG5H3ImFiTch+lCZ+kVKyUBk2AhZC9Fw/oH4WVWXulYoJMqZaSJla9HcZ9JNhHsSt8/ojfB3UZwZqxk0AG8A7wz0MdFlqc/tV6kaLEdYtRbJdq98Q2Eb4SpENx3gvut+ue76wfve5Mau8JxkTsDc/eHh6bikuTfCf9p17bnRfOBOhHZUWEbzBFgN8H3E17EwcTkJDsaD7VK1PfFHJlcv6MKUyQuS+WG22SceAXua5vFgdzT1gnhN2PC2/8E/5uP01Y2AyQ0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='에러핸들링' title='' src='/static/ebbf146388114679d6876b02f0c201db/ca1dc/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png' srcset='/static/ebbf146388114679d6876b02f0c201db/e7570/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png 170w,\n/static/ebbf146388114679d6876b02f0c201db/f46e7/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png 340w,\n/static/ebbf146388114679d6876b02f0c201db/ca1dc/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png 680w,\n/static/ebbf146388114679d6876b02f0c201db/02d09/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png 1020w,\n/static/ebbf146388114679d6876b02f0c201db/9d567/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png 1360w,\n/static/ebbf146388114679d6876b02f0c201db/e71fd/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.png 1910w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>에러핸들링</figcaption>\n  </figure></p>\n<p>로그인은 <strong>이미 존재하는 이메일일 경우 400에러</strong>를 보내줬고, 회원가입는 <strong>존재하지 않는 이메일 경우에 404 not found에러</strong>를, <strong>이메일에 맞지 않는 비밀번호를 보낼 시에는 401 unauthorized 에러</strong>를 보내주는 걸 확인했다. 로그인의 경우 401과 404에 따라 다른 메시지가 이미 서버로부터 받아오기 때문에, 바로 에러 메시지에 보여줄 수 있게 코드를 구성했다.</p>\n<p>회원가입과 로그인 모두 성공할 경우에는 하얀색으로 성공했다고 보일 수 있게 했고, 로그인은 과제안내에서 성공시 받아오는 JWT 토큰을 로컬스토리지에 저장해달라 했기 때문에 로컬스토리지에 \"loginToken\"이라는 키로 저장했다. 저장후에는 useNavigate를 이용해 \"/todo\"로 페이지이동을 추가했다.</p>\n<h2>Assignment 3)</h2>\n<p>세번째 과제는 다음과 같다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/101853e14e482c512aea00910659686f/b25d8/assignment3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 15.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAaElEQVR42nWOSQ6AIAxFvf89KYImdnIFiB+IS186peXTbu73cZyiWlv9QNVKKbW1/s/T+4bk7ilninsgohhTyiFQoIjOxcyiw+CKyGbGIks/xNjlExkobsE7UUO8AGTm+EXVxniO1uYX7COsW1qOIKgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='세번쨰 과제' title='' src='/static/101853e14e482c512aea00910659686f/ca1dc/assignment3.png' srcset='/static/101853e14e482c512aea00910659686f/e7570/assignment3.png 170w,\n/static/101853e14e482c512aea00910659686f/f46e7/assignment3.png 340w,\n/static/101853e14e482c512aea00910659686f/ca1dc/assignment3.png 680w,\n/static/101853e14e482c512aea00910659686f/02d09/assignment3.png 1020w,\n/static/101853e14e482c512aea00910659686f/b25d8/assignment3.png 1117w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>세번쨰 과제</figcaption>\n  </figure></p>\n<p>전체적인 페이지 이동을 위해서 app.jsx에서 token의 유무에 따라 이동시켜주는 게 좋을 것 같아 useEffect로 코드를 짰다. 토큰을 \"loginToken\" key로 불러온 후에 존재한다면 token 상태에 저장한 후에 존재 유무에 따라 해당 url로 이동시켜주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//App.jsx</span>\n\n<span class=\"token keyword\">const</span> navigate <span class=\"token operator\">=</span> <span class=\"token function\">useNavigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>token<span class=\"token punctuation\">,</span> setToken<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> prevToken <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loginToken\"</span><span class=\"token punctuation\">)</span>\n  prevToken <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">setToken</span><span class=\"token punctuation\">(</span>prevToken<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/todo\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>token<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>생각보다 간단했지만, 회원가입과 로그인 부분에서 겹치는 부분과 분리가 필요해보여서 내일 4번과 5번 과제까지 마무리 한 후에 컴포넌트화 해볼 예정이다.</p>","frontmatter":{"title":"원티드 프리온보딩 사전과제 2편","date":"October 05, 2022","tags":["원티드프리온보딩"],"series":"원티드프리온보딩"},"fields":{"slug":"/2022-10-05-원티드-프리온보딩-과제-2편/","readingTime":{"minutes":6.33}}},"seriesList":{"edges":[{"node":{"id":"b109aef9-a24d-5aa8-9dff-703fd5fdc107","fields":{"slug":"/2022-10-04-원티드-프리온보딩-과제-1편/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 1편"}}},{"node":{"id":"8f528507-7947-5722-98ca-a48e13d7f591","fields":{"slug":"/2022-10-05-원티드-프리온보딩-과제-2편/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 2편"}}},{"node":{"id":"33a2627f-b8f9-5b88-ba21-d4e5c385c6fe","fields":{"slug":"/2022-10-06-원티드-프리온보딩-과제-3편/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 3편"}}},{"node":{"id":"2fdf3ba9-880d-547c-a21b-e750048a1045","fields":{"slug":"/2022-10-08-원티드프리온보딩과제-4/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 4편"}}},{"node":{"id":"a4ed6198-5dc2-56de-8186-3cda080f6f5a","fields":{"slug":"/2022-10-09-원티드프리온보딩과제-5/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 5편"}}},{"node":{"id":"99f7c435-2874-54cb-9f19-8fcf045dfb56","fields":{"slug":"/2022-10-10-원티드프리온보딩과제-6/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 6편"}}},{"node":{"id":"d99e2e25-4172-5dda-9a89-f09f6eacbbab","fields":{"slug":"/2022-10-11-원티드프리온보딩과제-7/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 7편 "}}},{"node":{"id":"e5208ada-30ee-5ca8-b9b4-e7fd425830ad","fields":{"slug":"/2022-10-12-원티드프리온보딩과제-8/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 8편"}}},{"node":{"id":"0f942a71-cb3f-5801-a640-a0d56cefb758","fields":{"slug":"/2022-10-13-원티드 프리온보딩사전과제회고/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제-회고"}}},{"node":{"id":"9dd441f1-a9a9-5eb7-beb1-034cee9d9832","fields":{"slug":"/2022-10-25-원티드프리온보딩-1주차-2일/"},"frontmatter":{"title":"원티드 프리온보딩 1주차 첫째주 과제-best case찾기와 보충공부:context API"}}},{"node":{"id":"0641d706-7939-5b64-9389-c3753500e4c6","fields":{"slug":"/2022-10-25-원티드프리온보딩-1주차-1일/"},"frontmatter":{"title":"원티드 프리온보딩 1주차 1-1 협력툴:ESLint,Prettier,Git Hook, Husky"}}},{"node":{"id":"ebf864a5-223d-5e0f-8c8f-628044975f14","fields":{"slug":"/2022-10-27-원티드 프리온보딩-1주-3일차/"},"frontmatter":{"title":"원티드 프리온보딩 1주차 첫째주 과제 3일차-best case 프로젝트 회고"}}},{"node":{"id":"d34736b4-365a-5a86-b38d-2c407e7dd404","fields":{"slug":"/2022-10-28-원티드 프리온보딩-1주차-4일/"},"frontmatter":{"title":"원티드 프리온보딩 1주차 첫째주 4일차-초기세팅 커밋 합치기"}}},{"node":{"id":"f75eee83-ee13-5bba-836c-158429f67217","fields":{"slug":"/2022-10-31-원티드 프리온보딩-1-2-과제-회고/"},"frontmatter":{"title":"원티드 프리온보딩 1-2 과제회고"}}},{"node":{"id":"c4ffb713-1306-561b-8d73-b809f582155e","fields":{"slug":"/2022-11-04-원티드 프리온보딩-2-1-과제-회고/"},"frontmatter":{"title":"원티드 프리온보딩 2-1 과제회고"}}},{"node":{"id":"a8928637-718e-5ca7-8d6c-cd91dfdc4fa8","fields":{"slug":"/2022-11-07-원티드 프리온보딩-2-2-과제-회고/"},"frontmatter":{"title":"원티드 프리온보딩 2-2 과제회고"}}},{"node":{"id":"d89f0802-c283-547a-9ed1-36c0aa2a8140","fields":{"slug":"/2022-11-11-원티드 프리온보딩-3-1-과제-회고/"},"frontmatter":{"title":"원티드 프리온보딩 3-1 과제회고"}}},{"node":{"id":"11534d13-a447-59e1-b7c3-8874e29e6989","fields":{"slug":"/2022-11-19-원티드-프리온보딩-마지막 과제회고/"},"frontmatter":{"title":"원티드 프리온보딩 마지막 과제회고"}}}]},"previous":{"fields":{"slug":"/2022-10-04-원티드-프리온보딩-과제-1편/"},"frontmatter":{"title":"원티드 프리온보딩 사전과제 1편"}},"next":{"fields":{"slug":"/2022-10-06-HTTP란/"},"frontmatter":{"title":"HTTP 정리"}}},"pageContext":{"id":"8f528507-7947-5722-98ca-a48e13d7f591","series":"원티드프리온보딩","previousPostId":"b109aef9-a24d-5aa8-9dff-703fd5fdc107","nextPostId":"900f53ea-b7eb-5996-b44b-626400cf9d87"}},"staticQueryHashes":[],"slicesMap":{}}