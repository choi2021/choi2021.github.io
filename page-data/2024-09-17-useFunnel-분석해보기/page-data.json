{"componentChunkName":"component---src-templates-post-jsx","path":"/2024-09-17-useFunnel-분석해보기/","result":{"data":{"site":{"siteMetadata":{"title":"Troy DevLog"}},"markdownRemark":{"id":"7e844836-6a81-5bd8-a59f-4907b5d6fab3","excerpt":"2023 토스 Slash의 퍼널: 쏟아지는 페이지 한 방에 관리하기 발표에서 복잡한 퍼널간 상태관리를 위한 라이브러리 useFunnel을 소개했다. 퍼널: 쏟아지는 페이지 한 방에 관리하기 인트로 \n 프론트엔드 개발자라면 여러 스텝에 거쳐서 사용자의 입력을 받고, 해당 정보를 제출하는 폼 정보를 다루는 경험을 한번쯤은 하게된다. 그리고 페이지나 스텝이 많…","html":"<p>2023 토스 Slash의 <a href=\"https://www.youtube.com/watch?v=NwLWX2RNVcw&#x26;t=50s\">퍼널: 쏟아지는 페이지 한 방에 관리하기 발표</a>에서 복잡한 퍼널간 상태관리를 위한 라이브러리 useFunnel을 소개했다.</p>\n<p>[퍼널: 쏟아지는 페이지 한 방에 관리하기 인트로 ]\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/ca2701c7fe0b3e0a62f89412447155cb/c9112/useFunnel-presentation-cover.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCElEQVR42jWPe0yTZxSHPy5yaYEhcV6yOnUgMqnc2Yq0/VpaWLUjvQxmwVE7/WNuY0bmZQuJG1PC0DHQKC5qpAjTgJL4h51gh5vLQty62mWRxIU5zXTJlmU3ZkzQ0j5+X3Ened73vHmT5/yOkLEsB6XOTGZlLUsqX2KR2MBCcSOLDC4Wi67Y+0l9AwvMbrKXqylVKCjJWkBZ1nzWiWb0RisOu4eaaidarQmhafderv53n9G7/+D/7R7+v8P4/5J5GOPSnw/wy/wboWrjZtISE1AmziNFENAUlyJqtNSa1iOW6ygrKEZo2fMhk6Fr3Ll9C7mikbB0RuQuRjQakYjG/lyeLSgys1ioFVGa7czTvECC/kXidFYSzU4S8ooQtu7YxdcTE1zyf04gGOTi2BhTP91kVpKEIxEezs7yIByOCS3OegQhjqJX3qJwSyuFnlaKXpV4rY2S5g4q3M0Ib+x8h1AohO+Cj/Hxy1wcHeOH65OPhVFJKEujsbwGq00SxlNgrKPMUIeuRE91fj7Plxt5zvQy1vomhO2t78WmT09PMzMzQ1RKFJ2dSzS38pxMLrHGMpdwXSP5lU6aN9j5duB9jGt1lFiasHu2Iry95wP+r5u//0HPxHd0Bn5m/zdTdHz/K/uCv9B+7Q4dobtouj4lKbcQtWhDbdzAu9ve5PrQPhzOBoprGjE5GxFMtTZOnBnmyMl+DhzzsvOjXvYeP033qWH6PrvMua8CDH95NYZ39Apqg4UlBQZe39HG1I0fmQxOEAgEqXJupsJilzcQiIuPlxqB1eVraes8RM/BXs719zPk7WNkcJChvpNc8fkYHDhNblk1i8sttLR34R05T4/3DL7xL+jsPkpplRUhOTmJzLQMZPEajY72riO0dB7G0XsWe/cpbPtPSPcAjk9GaP74GLlrqkh5tpLUlWpSVhaSsCwPVYWR6roGVKvyEdIynkCZnk5qSjI5eaupdbnR2l084/CQ7dhEts1NjtSvkNDXu3lKtZTE9PkoVMtRyixdQabqaZJSk1GkpfIIKXoSAARq6KIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='useFunnel Slash 발표' title='' src='/static/ca2701c7fe0b3e0a62f89412447155cb/ca1dc/useFunnel-presentation-cover.png' srcset='/static/ca2701c7fe0b3e0a62f89412447155cb/e7570/useFunnel-presentation-cover.png 170w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/f46e7/useFunnel-presentation-cover.png 340w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/ca1dc/useFunnel-presentation-cover.png 680w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/02d09/useFunnel-presentation-cover.png 1020w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/9d567/useFunnel-presentation-cover.png 1360w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/c9112/useFunnel-presentation-cover.png 2436w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>useFunnel Slash 발표</figcaption>\n  </figure></p>\n<p>프론트엔드 개발자라면 여러 스텝에 거쳐서 사용자의 입력을 받고, 해당 정보를 제출하는 폼 정보를 다루는 경험을 한번쯤은 하게된다. 그리고 페이지나 스텝이 많아지면 많아질수록 복잡도는 올라가고, 디버깅의 어려움을 겪기도 한다.</p>\n<p>현업에서 자주 마주치는 이 문제를 우아하게 풀어낸 토스의 useFunnel 라이브러리를 언젠가 분석하고 적용해봐야겠다고 생각했지만 당시에는 미래의 나에게 맡겨두고(?) 미뤄두었다.</p>\n<p>토스의 프론트엔드 accelerator 멘토링 과정의 2주차 주제였던 <code class=\"language-text\">퍼널간 상태 관리하기</code>라는 주제로 과제를 개선하게 되었고, 더이상 미루지말자라는 마음으로 useFunnel 라이브러리를 분석하고 적용해보는 과정을 진행했다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; '>\n      <a class='gatsby-resp-image-link' href='/static/d17b23ed4f990b38d3eea6e16f455b27/12f38/infinite_challenge.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 104.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF30lEQVR42h2Te1DU5xWGf2nSGDM2ilaiXIJCwFGrJGhcK1ACkYugsouguwu7IIvCLiywyHJbEFaQEEC5SDBowWAUFSUpKAWXAGMiCCgYBMFYqk68DDJJqkyrrYw+/bXf+es7M+edM+95H8HS0c+Zcy1oY7UkZu1HnlxIgCqBi+cvcqT2LJHRiXhKo4hpfcDW0gus/1MQHl5SAgyVKNPKMH92lJjaHjTH+1DtrUJ4ODnN9WtjSDVZbDvWR3brCDnb/NhTVEPP6H2ic8qIjdmN6tunyFt/wT9AFMs6iuLiExTHBpGVW9B895ztVV34aAsRSoqryTnRRfCeEkoau9GlFZKqUnK6qZ0jEyCLjkPhZs+W8hYiLs9gztlH9ple5JdeoO55QczAKzQDoM+pIFYWjBD7ZQslo4+xXGhj5PsryAJkLLFxIiRch6quE1ubxSyzegPXSAOJJ7tI0cWTqk9kd/uPqMdAcxvizo+RFLiRTKkPQvX4Pxj8dYbigmKyU00oQ9UIgoC/r5SK0kPMenv2//9/3B5JXEU9shA5YVGi342dGB5B6kPIPNmGxt+DcJd5CGeH/kW+ZRJ9gomiqiZkkUZmvfYWq1ZJyK/+msDIdDZFppFc8AXqg43s0JuR59UQcfAb9vb9TO61JxS03SLxQAOxsWkI935+QezhQeov/khuxVnWe4Xw5m/eYu7vFlJZb6Gu5TqXx6fRVbajKmmhqLGXvJOXSarq4MroL/QOT3H41CX67v2H9uEnCP03H5JaP8rI3WlqDtfx5mtvo41LZZ2bJ6YMMz/df8zVaz8Qk1KEqrAB223ZuO7Ixj3+gBiTcsIyDnCkoZXxsds0N7chfNt7k11lXSSZyoiPT8Nx6UoamzrQadPw85fRPziG5VIfI4PDJB2qRwjSM8tTzRtBOl5XZiGEZoi5TaX5vIUbt+4iWLqvErH3DHn7q5HLFITviObG2AMS9BkEbw6lb2CYzq5eOkTRVHM5zhtVSHzV+CqS8Y7NJejTWqQRibQ0t1JaXIGgb54gvO4qOV1TxPz5ewLzz6FJKcE3aCcfBmiQZdaQUd3Ehcoi8hLiCYwyktk8yu17U1wfGMSo34O5sJKUk70oylsRpB3PkLU9Ya2hhk3VvYR1z/DeOinL3Xcg3XeK5JhdaPfk8U1WHKXhQYQVNfHp0HPuTP2bpz9NoAn046PwbBQtjwj/6xSCog8kOY14uzjxZWEu6o6n+BS3s8Es8l1wlK/TY9CoNBwy6KgzpZAuWvNs+jlDAzf4wphESbKWyJYHRFmmUbc+Rgjrh63n7pCtiaa1MB1t9yRSsbfp0kuqe+4x0NmBk9MfMJv2kZuei8RtA0P9Q+wK3Yqf22rCNqwiOvcQ6s7nqDqmEZQ/gKLpJrmZZgri44ktPc7ekRlOTfyT/707E3dZ5rIauUhKis6I6/I1hATL+fiDFQSvX4nK240t3l7IGv9OeA8IxZPQ+hcR/JBwGk638HlxCa/Eejkzw63BQaKUGhbMf49lzq74fRzEEjsX3rV2wN7OCS83V3YGuLNu9YdsOT6M6sorhFqRxYnxv5GojGBy/CYvxa2ePXtBVUUNu2Rb8ZJ48M48e6zfdcTWdhnOYk4XL3Jk7nw7bO2dcXp/BQutrPETL6zpFI+Sd/1XJh495TNjOjkJBjISM3h0+z7xO7WEekjwdF3DAis7bBbYYb/ofRzsnLFZ7Ii1tShouwTbJS7Mn2OFR+bnRJ/uR0gWGT7RPUTDV6dYZO2IwycKjMea8VEZWBu4HVtXb95xWIeVZDP2H3zCyhXuWC9yZsFCe+zEDe2XLuf386xxjTOjLmtA0FR+x9qASHQiGQZFFFb6Ql43VvJbvzhmq0zMNRxgtkTO7CgzTlvi8PDYxkf+0SiNpfju3o9PhBFn0V+dIZus/IMI0Xln2aStYmNUIYFKE84RmSyNysNOosRm407mb9Ywx2E9cyTBWDltwN5hDe6hKSizqvHUiDP6clSmrzAVnSA9v5b/AiCAALsAZmRwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='이제는 useFunnel을 분석하고 적용해보자' title='' src='/static/d17b23ed4f990b38d3eea6e16f455b27/12f38/infinite_challenge.png' srcset='/static/d17b23ed4f990b38d3eea6e16f455b27/e7570/infinite_challenge.png 170w,\n/static/d17b23ed4f990b38d3eea6e16f455b27/f46e7/infinite_challenge.png 340w,\n/static/d17b23ed4f990b38d3eea6e16f455b27/12f38/infinite_challenge.png 580w' sizes='(max-width: 580px) 100vw, 580px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>이제는 useFunnel을 분석하고 적용해보자</figcaption>\n  </figure></p>\n<p>useFunnel 라이브러리는 당시 Next JS에 의존도를 가지고 있었지만 현재는 타입적으로 강화되었고, Next JS 뿐 아니라 React Router와 같은 다양한 Routing 라이브러리들을 지원할 수 있게 <a href=\"https://use-funnel.slash.page/ko\">개선된 버전</a>도 만들어졌다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMElEQVR42p1S2U7DMBDMd/MJfAZfwRsSD0g8ISQUiaMU0vSANE0cX7nsYe3UUAEhwEqrOKv17KxnIqU0hBAwvYE19mtaCx/2o+Z6u7aDUgpa1+i6DlJIX48wEQUTyAoOXbcI2D/FKKAxw+3LqxhHxyc4u7jeEx1BtROA4aIxBqfnN8RUDf/2nwwd4GK1wfNiiZS+T8kSc0ozsXc0BlaUFe4fE8S3MwJLEd/N8DBPqM4860lAN/hwtlPOAddNizTjUF4Ui3Zf//PKIXqyApMNGrLJbyIKK1ZcgpOX3DmkkAolq4hl8y6k0hqs4jSg/Vb1KFhktX71uc0L5DvmwXZFiSRd4yXLyfwSDa3v3na1ob6t6yvBpRpjKHzqukHX935VN6j35/7ARkPN9bT0DJ8FegOpB16UmMdFYQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='개선된 useFunnel' title='' src='/static/61d297b0bc689d3bc90e2de8a43607f5/ca1dc/updated_useFunnel.png' srcset='/static/61d297b0bc689d3bc90e2de8a43607f5/e7570/updated_useFunnel.png 170w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/f46e7/updated_useFunnel.png 340w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/ca1dc/updated_useFunnel.png 680w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/02d09/updated_useFunnel.png 1020w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/9d567/updated_useFunnel.png 1360w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/434e6/updated_useFunnel.png 2972w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>개선된 useFunnel</figcaption>\n  </figure></p>\n<p>이번 글은 <a href=\"https://www.slash.page/ko/libraries/react/use-funnel/README.i18n\">구 useFunnel 라이브러리</a> 발표와 라이브러리를 분석하고, 이를 적용해보는 과정을 공유하려 한다.</p>\n<h2>useFunnel이 풀고 싶은 문제</h2>\n<h3>Funnel이란?</h3>\n<p>Funnel이란 용어는 현재 재직중인 회사에서도 많이 사용하는 용어로, 원래는 마케팅에서 많이 사용하는 용어로 알려져있다.</p>\n<p>Funnel의 의미는 깔때기로 번역되며 초기 단계에 많은 사용자가 들어오다가, 중간 단계에서는 일부 사용자가 빠져나가고, 마지막 단계에서는 일부 사용자만 남게되는 형태를 의미한다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/a9e9547c2f9b3058548fab5dece6a1de/e2f49/funnel.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 75.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdElEQVR42pWTS0xTQRSGb19oqy0qVKpUiG1EYlqixo2AcaMuCC407gyoC2LcuHFjlLgzulMQqRWECgEhGB9YU1spbembvrQULFUeLRZBNEYiiSYmv9PbVm8BAyzOPXPnzHznP3NmKIqikDAWiwU2m008G1wOB3kFReCs24it2wuRJcyFWCIFP1uCTZtzkJ23k96TWJ+wNCNl1OIJrM/iovzUJfDz9qC88hyEskM4ePQkchTHoTxQDtnhmqSIZfZS6QzKkhJo2jugbm5Bc+tDNLW24fadRtQ3qlHXoMKtugbi76FBdZ/E29HUoqFN3fQA+fn5f6uk6A/5EQgEMFvt+L7wE/HZL5j69BkWmwPOQS8cbg/sLg+cxDvcXkyT+MeZOSz8+o3Orp6lJadV7i4uJhAnXB4/AfngDQTh9Phg6DfDaLbC5Q3A7XtDQz0k1vvyFcRi8T91zDPkkEYk/NXaa/g6/wOR8SjGY3GMjk1C32eCwWjGh8kYxqJxvJ+IYu7bPE5XVWfszWxKKgOPxyNnpEFwOEzU+fHaZEkBTUTlAD0XCkdw/cZNMKtbtstsdjJTaVkZovEZTExNw/c2BNOAnZiNjIcQm57F0Mgo5HL5ykCm/JrzFxB6F8FzrY4uV9/XD61Oj+BIGBUVlf+DLQWmD1ckEtEQt9cPm2sQVocbgeAw2jq6Fjdh5YudzqxQKNFvsaGzuwePuh/jBVEokWxbO5AJvXylFk97tdAZjKg6czYZy+zq6oDMC9/z5Bnq76rIeANEuQXkeXHXDmSq3LtvP6RSKY5UnMCxix1gCXdkXLVVAxnvkx4Xyoog3lUKDn9LKr4U+AemzgpUMywSYAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='funnel 이미지' title='' src='/static/a9e9547c2f9b3058548fab5dece6a1de/ca1dc/funnel.png' srcset='/static/a9e9547c2f9b3058548fab5dece6a1de/e7570/funnel.png 170w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/f46e7/funnel.png 340w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/ca1dc/funnel.png 680w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/02d09/funnel.png 1020w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/9d567/funnel.png 1360w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/e2f49/funnel.png 1366w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>funnel 이미지</figcaption>\n  </figure></p>\n<p>그러면 이러한 Funnel 형태로 구성되는 디자인을 알아보자.</p>\n<h3>디자인 요구사항 탐방</h3>\n<p>발표 자료는 휴대폰 가입에 대한 예제로, 각 스텝별로 가입방식, 주민번호, 집주소를 입력한 후에 제출하는 방식을 취하고 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/a5a679839627226da03f15b9ae502e2a/2ac49/design.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 44.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7klEQVR42p2R32uSYRTHX39deOGwLBe1MvMHc4gXTSaYg6BQZ/4gXOiFYBBrW0H1l1hbKIjJiOayq932D9Rt0KK6iK3oalAQLV+nr/rpfR9z2W3n4cs553vO+XKe55EcDgfxeJxIJEIoFCIajeL3+5EkCaPRiF6vR6fTYTAY1NggvJZr9RE/guC1gXGYzWZMJpMY+C/4fD4er69TKpUE7HY7hUKBSqVCuVymWCxis9lYW1sTqNfrBAIBMazN1mo1lXtCtVpFu62USCQYWafTwev10mg0jritrS1cLhfjlslkhGAsFhN5f6BhwNzcHJL2fpopSg9ZbuHxeP4R3NzcFII9RVF7FMFls1khmEqnaMsd3u3s0j48HAqOb6iR2oc8bzaPuGbzBdPTPgbiDC2fz2O1WsnlcvTU9VotWfX9oeBw7QFKt03r4Adut5vGs6d/N1Rjp9NJT633lbba2mXxRo4TZ1wk09cZ/OF6XZlgMIg0fznKyzcy26+/s/1qnwsuN48qG+x9g0/7fR6WN4Tghy8H7Oz95OPXNsnMIkbzBNGFFO8//+Lt7rB2cVYVnDp7jqXVB9xcukvx1h2OWSeYCV4lkr7PpdQ9ZmavYLFYmE+uEL62TCS5yuTp8+INJ09NEU6sEIovE164zXHbSX4DeMqkgbbVXDAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='디자인 요구사항' title='' src='/static/a5a679839627226da03f15b9ae502e2a/ca1dc/design.png' srcset='/static/a5a679839627226da03f15b9ae502e2a/e7570/design.png 170w,\n/static/a5a679839627226da03f15b9ae502e2a/f46e7/design.png 340w,\n/static/a5a679839627226da03f15b9ae502e2a/ca1dc/design.png 680w,\n/static/a5a679839627226da03f15b9ae502e2a/02d09/design.png 1020w,\n/static/a5a679839627226da03f15b9ae502e2a/9d567/design.png 1360w,\n/static/a5a679839627226da03f15b9ae502e2a/2ac49/design.png 2336w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>디자인 요구사항</figcaption>\n  </figure></p>\n<p>이를 해결하는 방법, useFunnel을 사용하기 전 후로 나눠서 살펴보자.</p>\n<h3>useFunnel 전 해결 방법과 예제</h3>\n<p>useFunnel을 사용하기 전에는 전역상태를 사용하여 데이터를 관리하고, 각 스텝을 페이지로 별로 관리하고, 제출 API를 호출할 때 모아온 데이터를 담아 발송하는 방식으로 구현할 수 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/6b7bd0d534320fef51131382f6327d22/d68dd/globalstate.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 42.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVR42i2SWXMSURBGebCMCkEggGGbHZgFhm0YhjVsgSTEmApiqZikkirLN///2/Ey+NB1q8797tfdtzvy5u0Jsm4hicjLVRLpPCfvYyhlRzCTnFwhnszyIfYRxXAoKBVyUoVo/IxYPIlWqVNUD6xM9DRJ5DSZ4fLhlcX9C+PbZ+zunHROZr37zfz+mYlgRn0okpmsv/5hdLNnuHlCrraQyy6f93+Zf3lhcveKVG4QicVTyI0JUn1KuXaJYo0pqD6avQhDdafkmy7ZWhXNG+F0lzi9NVmpSkF36K1+0pk+0L/aU9TrosJEms5sG8Lu/BtmeyYq1PBmO9oXgi12GM0+GdXEHK5wgjnt8So0K4mKhjeP+EIzuP5FyQgNMwSrHyK+h5eOv+TsXBKC/X/2hNURSdQ6UsNHb3q0gj553Ua2vFB3NHw8GkZFy+7gmvrgitZkI/4rCAfTGG2o9dchU6y2SCJTbU3R3QHVzpRsqUJBs/GXopPJXXgWVPtoaLYnlJpdGj0P3baJpXKYnQtKDQ838MXDCqlPEpY/Q2l36Y56Yvoa52JQ/mJLa3wrvmZLXrWIvBMroorStUPYvVAUPayD7aGagjkB2YLOYRs0x0cxO2i1gFS2RCKTx3D7qEJruAdW5B989PX0x5gTRwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='전역상태를 이용한 해결방법' title='' src='/static/6b7bd0d534320fef51131382f6327d22/ca1dc/globalstate.png' srcset='/static/6b7bd0d534320fef51131382f6327d22/e7570/globalstate.png 170w,\n/static/6b7bd0d534320fef51131382f6327d22/f46e7/globalstate.png 340w,\n/static/6b7bd0d534320fef51131382f6327d22/ca1dc/globalstate.png 680w,\n/static/6b7bd0d534320fef51131382f6327d22/02d09/globalstate.png 1020w,\n/static/6b7bd0d534320fef51131382f6327d22/9d567/globalstate.png 1360w,\n/static/6b7bd0d534320fef51131382f6327d22/d68dd/globalstate.png 2094w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>전역상태를 이용한 해결방법</figcaption>\n  </figure></p>\n<p>발표보다 조금 더 간단히 이동 버튼을 누르면 전역 상태를 업데이트 하고 마지막 집 주소 스텝에서는 alert를 보여주고 제출 완료 화면에서 작성된 내용을 출력하는 예제를 작성해 보았다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 259px; '>\n      <a class='gatsby-resp-image-link' href='/static/d0b81ce44de2280ace3eb539bdb495bc/8b5e5/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 78.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVR42p2U23KbMBCG/VRNwklIAgPmIBDGnGwcx3HbdDqdyUze/++K9KKdzNikFzsrkLTst/8uK5tn4FGFSPWYXt6gthPK5oh1toPlb+CI7FO2cj0Gj/mQ4RrbfkS1bVBWGlGcgHE+7xlzGYM5e8tWLuNwPJ8uSzBaT5cfGI9njMOI6fiEw3RCXmhYNl2g/Vu2+vvB8wUcl0GsE5TDEX4kIdOQShKAx5L2/yOgZ1JPFMTTL/BUIKgpYCoh8gAO92eamwHNIV+GCMIIj99/zsi11uippkO/J79H07R4PJ1R6hq2y5ZlaEwEEaJNDt3tEeekvrGsJK+xjjcQ9OFrWX4IaFk2rCiDeH4FSzQhT+9edXB5cDW7f5FFQK0Tkcov6EjZTFVo25ZwB3RdD04t5LhsuSizIGRxWiArqrlmeVmj0M3sZZT+ObMwoMnSIX/35Q4P4QbB1zewjYbU78iSJsnyqCSOR+fFMmQRrHE4f8Nuf0KxG1DVDXbdgJasInWH8YCECBaJYnDMtKSENwdqGkIvUSiNotS0VvN7o/QnVBa4J2SbkMPLKzW4B17R5YSmR0lCdgmZLZ8U0xJJSSK0I9JmgKLmVnWFtChmMQzFtfp9zND14A0XxPtn9LsGHdWs0lsoKoPj+ot+Dr8BcJJCqLPk7q8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='예제 폴더 구조' title='' src='/static/d0b81ce44de2280ace3eb539bdb495bc/8b5e5/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png' srcset='/static/d0b81ce44de2280ace3eb539bdb495bc/e7570/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png 170w,\n/static/d0b81ce44de2280ace3eb539bdb495bc/8b5e5/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png 259w' sizes='(max-width: 259px) 100vw, 259px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>예제 폴더 구조</figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">PhoneNumberPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> setForm <span class=\"token operator\">=</span> <span class=\"token function\">useFormStore</span><span class=\"token punctuation\">(</span>state <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>setForm<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> phoneNumber<span class=\"token operator\">:</span> <span class=\"token string\">\"010-1234-5678\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/form/citizenNumber\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">휴대전화 입력</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          주민번호 입력 스텝으로 이동\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">CitizenNumberPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> setForm <span class=\"token operator\">=</span> <span class=\"token function\">useFormStore</span><span class=\"token punctuation\">(</span>state <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>setForm<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> phoneNumber <span class=\"token operator\">=</span> <span class=\"token function\">useFormStore</span><span class=\"token punctuation\">(</span>state <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> citizenNumber<span class=\"token operator\">:</span> <span class=\"token string\">\"123456789\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/form/address\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">주민번호 입력</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">입력된 휴대번호: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>phoneNumber<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          주소입력 스텝으로 이동\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 전역 스토어</span>\n\n<span class=\"token keyword\">const</span> initialForm<span class=\"token operator\">:</span> Form <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  phoneNumber<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  citizenNumber<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useFormStore <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">create</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>StoreType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>set <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  form<span class=\"token operator\">:</span> initialForm<span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">setForm</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>form<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>state <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        form<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">,</span>\n          <span class=\"token operator\">...</span>form<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">resetForm</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> form<span class=\"token operator\">:</span> initialForm <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<img src='/static/적용전_실행-d3e0bc163ebf7cda03e8700ac2c5c43f.gif' width='400'>\n<p>요구사항을 모두 충족하면서 정석적인 방법이지만, 두가지 유지보수의 어려움이 존재하게 된다.</p>\n<ol>\n<li>스텝별로 어떤 데이터/ 어떤 스텝으로 이동하는지 <strong>페이지를 들어가야 알 수 있다</strong></li>\n<li>상태를 수집하는 곳과 사용하는 곳이 달라 <strong>수정할 때 전체 흐름을 추적해야한다</strong></li>\n</ol>\n<p>위 두가지 문제를 어떻게 해결한 useFunnel 훅에 대해 알아보자.</p>\n<h3>useFunnel을 이용한 해결 방법</h3>\n<p>위 문제를 해결하기 위해서 우선 여러개의 페이지로 구성된 스텝을 <strong>하나의 페이지</strong>에서 관리하고 각 스텝들은 조건부 렌더링을 이용해 하위 컴포넌트로 변경해 <strong>스텝별 UI 흐름을 한눈에 추적하기 쉽게</strong> 개선할 수 있다.</p>\n<p>그리고 기존 전역상태로 관리하던 폼 데이터는 지역상태로 둠으로써 스텝과 데이터가 한곳에서 관리하게 되고, 사용하는 곳과 업데이트 하는 곳 모두 하나의 파일내 작성해 <strong>응집도를 높이는 이점</strong>을 가질 수 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/76723b2c9ea4762e12348ff63405b2f5/9aa73/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACX0lEQVR42oVSyXLaQBTkF+ygDaENrWi0IQRIArEF49i47EOqXMn/f0inhUPZOeXQNe/NSP2mu2eg+iXUdANNbDASHdceLXSxhT7dQY93UAg5aSFlK0hpC9mdQbZTSHbG9QOSlUGdpBioooF2eoe5+Al39g6//A2nYr98gbX/AWt9wez4iODYYXqpMT1vEc3ncJMUyTyBnxfwsgJZJaB5MxJOMmhBCcUtoNgJVE5WrByKE0P2IkhuDN0jJgkMR2A8iWEEGXQ/hxFmGAc5dPZmmEJ1cxI6LIoD9MUTtEkB3U3hBFPW/MnJYXOI4QqM3ASKx8H8RrL6oYJIIJsCcl87veTs44YKSZ3lCXr3DGNzQHJew+gucFYXiPl3iJZyuzO87hUeLTDrJ+jc14odzOqIcdbherEbodqbWi4xfCDRdo340MCuj5DTLe7TjoHsMC72MJIaJkOxSKRle+5vMM47Bth8JUyv/pkZkw4WlCtQznyM6JFpF5hSjucHsPwpJGdG2fR26sOMIkRxwJ6Ju+WV7IvkDFHzCKt9hbNuUR4rOO0Z1XKLplmg7GpMtm+Ql29QFg+Q6xNG1YFy91DDJcMoPgl7MsWKoVYnqKdfMA87FOcGgtKDpoZTt1DnB9irM7TqAUp5gjJ/grR4wXDxDCWY83WIaw49BjIbmcUopg/hiikniASluHywZgaHKZocKFG6bETcC6EYPYLrKvPsyvEXA9miN3z5+uwINVjSO4EwDaGFOcaUEk8EXIfPo/fKEp+wb3X8DwaSSUIefuP0IScOud7ptzrEHft7QmItmdF/8Qew82B+SJqqugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='useFunnel을 이용한 해결 방법' title='' src='/static/76723b2c9ea4762e12348ff63405b2f5/ca1dc/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png' srcset='/static/76723b2c9ea4762e12348ff63405b2f5/e7570/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 170w,\n/static/76723b2c9ea4762e12348ff63405b2f5/f46e7/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 340w,\n/static/76723b2c9ea4762e12348ff63405b2f5/ca1dc/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 680w,\n/static/76723b2c9ea4762e12348ff63405b2f5/02d09/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 1020w,\n/static/76723b2c9ea4762e12348ff63405b2f5/9d567/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 1360w,\n/static/76723b2c9ea4762e12348ff63405b2f5/9aa73/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 1912w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>useFunnel을 이용한 해결 방법</figcaption>\n  </figure></p>\n<p>그러면 이에 맞게 이전 예제를 리팩토링해보자.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 381px; '>\n      <a class='gatsby-resp-image-link' href='/static/7a4976675b9a882234a0b05f3152478f/7a1fe/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 85.88235294117648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVR42p2U2W7aQBSG/RKtFKlXaS6zNJVSVLA9q7fxhm0Gl6VA3/8h/h6PAxKqogIXn8Zjz/l91vG4EEgzg9XvPYqiABccjHMIes9vwPOZQMAlTNlgudmjrOZgQmMWcgTDN8K/As8ZkHHIBfK6IU8PKEhU6hhTP8QsYCfhS/BOGxJN8hK/tgd0nUW36FGWc6SmoAhuEWRDDhRiU6Ncb2HaHKYrkBTmRg/f0VUL02+QlCnSykBo7VJyteBgJFQEa5enkOumQ2Lyq/J4JqhUjO36gHZhHU3XQekIMypOwPj1ReFRinz1B3W7hKHQi8aCx4beZwiplS4RPQlOKSzJFVbdCry0kIQwLWRWO5iM3U8vFpSUv4S8ivodstrCND3lr4LvB/CD8CIxJ3jscBVnsOsdOttjQYWp5g3ysqZDkvJ7xaRwatoBRvmJohh2tXEF0XGEkDGqvASX45wyd248/xHey0+OEYHnSYCXMMXU7vAjFZgYjUmm3fqWKHwnT19nAt+mR5t/8T4/hxhh+PTo48skxWO1xb3P8EDhfg0JWofnB7pE7gOJu1c6+3S0O+dsUnyqNEtyJOs9eCYgSu2Qw5prhFqe3UL/H713wYiuMUmCioRUMaIr7fbSKOrJjwX/AjJoV+GMch0BAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='적용 후 프로젝트 구조 ' title='' src='/static/7a4976675b9a882234a0b05f3152478f/7a1fe/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png' srcset='/static/7a4976675b9a882234a0b05f3152478f/e7570/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png 170w,\n/static/7a4976675b9a882234a0b05f3152478f/f46e7/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png 340w,\n/static/7a4976675b9a882234a0b05f3152478f/7a1fe/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png 381w' sizes='(max-width: 381px) 100vw, 381px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>적용 후 프로젝트 구조 </figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Form</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  phoneNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  address<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  citizenNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> initialForm<span class=\"token operator\">:</span> Form <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  phoneNumber<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  citizenNumber<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>\n    <span class=\"token string\">\"주민번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"주소\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"핸드폰번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"제출완료\"</span>\n  <span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"핸드폰번호\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span>\n            <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"phoneNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> phoneNumber <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"주민번호\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span>\n            <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"citizenNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> citizenNumber <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"주소\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>AddressStep\n            phoneNumber<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span>\n            citizenNumber<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span>\n            onNext<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"address\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// 제출 로직</span>\n                <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> address <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\n        </span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"제출완료\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 주민번호 스텝 컴포넌트</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"use client\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/app/page.module.css\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Form <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/app/registerForm/page\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CitizenNumberPageProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  phoneNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"phoneNumber\"</span><span class=\"token punctuation\">]</span>\n  onNext<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"citizenNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">CitizenNumberStep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  phoneNumber<span class=\"token punctuation\">,</span>\n  onNext<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> CitizenNumberPageProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">onNext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123456789\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">주민번호 입력</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">입력된 휴대번호: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>phoneNumber<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        주소입력 스텝으로 이동\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 리팩토링한 예제 코드를 통해 보면 발표처럼 여러 페이지가 아니라 하나의 페이지로, 전역상태로 폼 데이터를 관리하는 것이 아니라 지역상태로 관리하고, 각 스텝별로 조건부 렌더링을 통해 UI를 관리하는 것을 확인할 수 있다.</p>\n<img src='/static/적용후_실행-6882830cf62bd2f548ca6853a374eebc.gif' width='400'>\n<p>동작도 기존과 동일하게 작동하며, 새로운 스텝이 생겨도 조건부 렌더링 조건을 추가하면 되고, 제출을 다른 스텝에서 진행해야 하더라도 prop만 변경하면 되어, <strong>코드의 가독성과 유지보수성</strong>이 향상되었다.</p>\n<h2>useFunnel 라이브러리 따라 만들어가기</h2>\n<p>그러면 이제 useFunnel 라이브러리를 따라 만들어가보자. 발표에서 순차적으로 추상화 과정이 잘 설명되어있어서 그대로 순차적으로 만들어가보려 한다.</p>\n<h3>1. 조건부 렌더링 추상화</h3>\n<p>먼저 조건부 렌더링 부분을 Step이라는 컴포넌트로 추상화할 수 있다. 조건이 맞을 때에만 보여줄 수 있게 하는 컴포넌트로 발표에서는 if라는 property로,\n예제에서는 show라는 property로 적용해보았다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/4955b3420970f58450b5d5cf08981669/600ec/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42q2TaXObMBCGfSTYjoPdmEOA8YG5wdyYMHaazDSdaf//H3q7YKeJ29BP/fDMSFr0aHeFer1eD/+ZHgbDG9zNBIyIMXHHLzDmH2jtARNeADcVMb6n9fmCEDGdCy3NnulcAjeeXgtvRxNodg7PLWF6CZb7Gmb8Fcw/QfcLZFWIME+gWQXUXQzZyFqa8dIpMJf0i6z/LlQoaFLw6OdIgxJVXWBfFJDDJ1h5id3hBLX6CT05Ijv4SKo9mFdD9R4xE7TrDDkSymYKy60QOyVWZoKVHWLtRFCsHNIuB6PsFK+E6uTYeBERU4yytAvMxOXfJTcZ6lYC3U4gb2OwTQK2JaGxh7INaR5AaaB5E5eNuB1rVvqJkJtApYCWfoOWvIJFKVgWUjk1ltTXdfoMI6dYcARzDu3hZyISZh0ZUsli+Ix19h1qfIKSPUErfkD1a2jegS6nonKLtsyPQrVT2HxA/VKiF5Kc4GYv8KtXrFy6mA2VvKXSjejMm9DoEN5wY+pJBNl9hGyXRNFeEtv41K/wwv7D+I0AjMS8oH4ipA0SCSUSStQnyaR/bR202XVDQrocfvGn8HYEUXfPLO0LzvtaJw4kOvT+i3wtbJ/fYNg+wWuG/2Zwpt8f/Bb+AhjqSqkkr+o6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='조건부 렌더링 추상화' title='' src='/static/4955b3420970f58450b5d5cf08981669/ca1dc/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png' srcset='/static/4955b3420970f58450b5d5cf08981669/e7570/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 170w,\n/static/4955b3420970f58450b5d5cf08981669/f46e7/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 340w,\n/static/4955b3420970f58450b5d5cf08981669/ca1dc/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 680w,\n/static/4955b3420970f58450b5d5cf08981669/02d09/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 1020w,\n/static/4955b3420970f58450b5d5cf08981669/600ec/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 1126w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>조건부 렌더링 추상화</figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>\n    <span class=\"token string\">\"주민번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"주소\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"핸드폰번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"제출완료\"</span>\n  <span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span>\n            <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"phoneNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> phoneNumber <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span>\n            <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"citizenNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> citizenNumber <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          &lt;AddressStep\n            phoneNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            citizenNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            onNext=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"address\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// 제출 로직</span>\n                <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> address <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          />\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step <span class=\"token operator\">===</span> <span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Step 컴포넌트</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Step</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> show<span class=\"token punctuation\">,</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> PropsWithChildren<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> show<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>show<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2. 반복되는 조건문과 Step 상태 추상화</h3>\n<p>step에 조건문을 반복하지 않고, 단순히 어떤 스텝인지만 넘겨주면, 현재 step과 비교하여 조건부 렌더링을 할 수 있게 추상화해보자.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/16aa4f5db6a11c33122f2a0ffe7ab513/c7b1b/step_%EC%B6%94%EC%83%81%ED%99%94.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 52.352941176470594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuElEQVR42p2SW2+bQBCF/dLWrt0kvu1yMxBYcIBdWBtsfG16SStVyv//OycDWJVdVX3ow6ezjFZn5gzb+zAYYeanmPoZmCPBHUWatXAnb5lRbexGGIchJl6MiRVhYotWp6RTK6Q7EfrDO/QGw3tY+jOs9XeEyQ+E6Qsi+QuL9BmL8gBXH5Fv9ogqjeSssNyu8aQ1QrWCqiScbAtz/Q2WPOLj3YQMRw8w4xLGsoIRFOC+hOEXmNPEXCRgQsIWGaxAwQ5yWCFpRCpyLGIFIyxgiBVM4spwDbN+hVPQVLKEW2zh6y2MiJpQA+7nYAR/zGE8qlZ5cPkOupopNBlOyfDTuC1Y2QF1/RNlfUD1pUJ0/Aoun2HmJ9hqD1Wm8OWKJt6QieqMrrg1bOLQdKvTK+LNGXFVQdDejGVNkTTMSLfxLFF0Ef8wuzUcdRMa6Q5684K83EHu1vCqM1h6BM/2sGWNWCbtnjk14G3sW5pGg2aH/dE9mJfCSmoIdQKjvbDFEnM3aeuMdthBZy/ran+h+ZlN2l6fnk3TgYkSs0CDkdH8+rJ7wfs3vw3f9YcYcx8PbHHB/S/G3MP7wQhvALsWGT1lkpQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='반복되는 조건문과 Step 상태 추상화한 인터페이스' title='' src='/static/16aa4f5db6a11c33122f2a0ffe7ab513/ca1dc/step_%EC%B6%94%EC%83%81%ED%99%94.png' srcset='/static/16aa4f5db6a11c33122f2a0ffe7ab513/e7570/step_%EC%B6%94%EC%83%81%ED%99%94.png 170w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/f46e7/step_%EC%B6%94%EC%83%81%ED%99%94.png 340w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/ca1dc/step_%EC%B6%94%EC%83%81%ED%99%94.png 680w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/02d09/step_%EC%B6%94%EC%83%81%ED%99%94.png 1020w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/9d567/step_%EC%B6%94%EC%83%81%ED%99%94.png 1360w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/c7b1b/step_%EC%B6%94%EC%83%81%ED%99%94.png 1632w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>반복되는 조건문과 Step 상태 추상화한 인터페이스</figcaption>\n  </figure></p>\n<p>이를 위해서 드디어 오늘 주제인 useFunnel 훅이 나오게 된다. 현재 스텝을 Step 컴포넌트가 알기 위해서는 이를 관리하는 Funnel이라는 컴포넌트로 children으로 전달되는 Step들중 현재와 일치하는 step만 렌더링하게 할 수 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/0f7b56170a933c49f45c76dd3acc566d/0aea6/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 51.764705882352935%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABt0lEQVR42o2S226bQBCGA5Uiozg1jgy7yxlMbMCY4GMxThyrdhKlqtqqat//Uf7OAupdrV58mpk9/HPYvVIUFbrpY+jE0C0fumNDtylmhOG1SJ8FF7njIa61Pq4URQFPNrA+/4az+wp3f4ZXfYO1egevdxD1ESKpIMYlRLz4J9b9CtrtHQmqKliYg5cHsGINke3hFSSSP4KnW/DpGnz8AB7NLyLojNbXpeAHmP4MYv4Ilm/hzWvcl0+IixpuWoFFJBbKS8VFZAfa7bCt0AxyMCqZxWTHeVORiEsSI8ICjBJyOsOpExZ0dH67RgVR4kZQ7QRF/gRvXcFbHRAs3jCpvyDavsJ9OCJcPMPOdzTrLeysgjOrYNM4bIoFYWWfYFGs9Yddy14CUdDsNu+Y7ehxqhf4hxNWLz+R1D8Q7r9jevoFvjwj3Jwwrl4RLY+IFgdY5ZHuneGUz+i1M1RhuFOY9FIsymFFM7IJkVGbstW0Scj8rDk3ciQTjNykQa4ZFJteit7NQH4bFSMKzGQNa7KEOyXIBukGBs3OkHtSjDAvIOf4V/Cj4WJgumSdjtYfmN5/o9Pnv+7d4A+r8BSPVmpDtQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='useFunnel' title='' src='/static/0f7b56170a933c49f45c76dd3acc566d/ca1dc/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png' srcset='/static/0f7b56170a933c49f45c76dd3acc566d/e7570/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 170w,\n/static/0f7b56170a933c49f45c76dd3acc566d/f46e7/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 340w,\n/static/0f7b56170a933c49f45c76dd3acc566d/ca1dc/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 680w,\n/static/0f7b56170a933c49f45c76dd3acc566d/02d09/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 1020w,\n/static/0f7b56170a933c49f45c76dd3acc566d/9d567/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 1360w,\n/static/0f7b56170a933c49f45c76dd3acc566d/0aea6/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 1756w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>useFunnel</figcaption>\n  </figure></p>\n<p>예제 코드에 적용해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>Funnel<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span>\n          <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"phoneNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> phoneNumber <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span>\n          <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"citizenNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> citizenNumber <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        &lt;AddressStep\n          phoneNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          citizenNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          onNext=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"address\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// 제출 로직</span>\n              <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n              <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> address <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n              <span class=\"token keyword\">return</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        />\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// useFunnel 훅</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactNode\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Step</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> StepProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactNode\n  step<span class=\"token operator\">:</span> <span class=\"token string\">\"주민번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"주소\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"핸드폰번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"제출완료\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>\n    <span class=\"token string\">\"주민번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"주소\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"핸드폰번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"제출완료\"</span>\n  <span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FunnelComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> FunnelProps<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> validSteps <span class=\"token operator\">=</span> Children<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isValidElement<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> targetStep <span class=\"token operator\">=</span> validSteps<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span>\n        children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactElement<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n          name<span class=\"token operator\">:</span> <span class=\"token string\">\"주민번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"주소\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"핸드폰번호\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"제출완료\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> children<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> step\n    <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetStep <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>step<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 스텝 컴포넌트를 찾지 못했습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> targetStep\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>FunnelComponent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>발표 자료의 코드는 짧은 시간내의 이해도를 위해 조금 더 간소화 버전을 소개해주셨지만 <a href=\"https://github.com/toss/slash/blob/main/packages/react/use-funnel/src/Funnel.tsx\">useFunnel 오픈 소스</a>를 보면 예제 코드처럼 유효한 children만 필터링하여 현재 step과 일치하는 step만 렌더링하는 방식으로 구현되어있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/6607c0df56dfc1cc58aa59a7c8bbd51f/78873/useFunnel_funnel.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 38.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVR42qVR2WoDMQzc///IXmlIk/X6kO9jdyK5oU+BFioQNoK5pGVYi0YEayxiyjCOELVGM4RNaahNg8gjxIgQwk+nlOCcm22ZI+WCfd+xVGWxnhVeXt/w/nHC6fMCwyTBMPnmcbutcCxYW0Ot9dH8b2POGv9LKRhj4DiAJfiM25fFph2TnbFeDbaVVUNGzh2VnXh2ZNiFEIujEDModbQ+0DmV9366k1oiA3LJUyVnJuE38SuKUqIq/ddaDtkH70fUc6lTzXviWUWgBBGUppBgY5/OQuQZY54SJmpwlqCU4mgcjwFyBK0NHyjisloo43FVhFV7lNZnvDH254TdBUQf5zU3uWjga3FGAUl3ji7gPr5Jjl/yL8e8zjF3Nh7g/9Qd7wZvhD58NVEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='실제 Funnel 컴포넌트' title='' src='/static/6607c0df56dfc1cc58aa59a7c8bbd51f/ca1dc/useFunnel_funnel.png' srcset='/static/6607c0df56dfc1cc58aa59a7c8bbd51f/e7570/useFunnel_funnel.png 170w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/f46e7/useFunnel_funnel.png 340w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/ca1dc/useFunnel_funnel.png 680w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/02d09/useFunnel_funnel.png 1020w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/9d567/useFunnel_funnel.png 1360w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/78873/useFunnel_funnel.png 1520w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>실제 Funnel 컴포넌트</figcaption>\n  </figure></p>\n<p>여기서 또한 볼 수 있는 것은 외부에 노출할 필요가 없는 Step 컴포넌트를 useFunnel 내부에 숨기고, 외부에 노출할 Funnel 컴포넌트만 노출하는 <strong>Compound 패턴</strong>으로 컴포넌트 간 관계를 잘 보여주고 있다.</p>\n<h3>3. Steps 타입 추상화</h3>\n<p>발표내용에는 없지만 예제 코드에 구현한 훅은 현재 타입이 내부에서 하드코딩되어있어, 이를 추상화하여 외부에서 타입을 지정할 수 있게 만들어보려 한다.\n이 작업은 오픈소스 코드에서 어떻게 타입을 관리하고 있는지를 참고해 구현해보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>Funnel<span class=\"token punctuation\">,</span>setStep<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        steps<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'주민번호'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'주소'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// useFunnel 훅</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">readonly</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepsType</span> <span class=\"token operator\">=</span> NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    children<span class=\"token operator\">:</span> ReactNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Step</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    children<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span><span class=\"token punctuation\">;</span>\n    steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">;</span>\n    step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Funnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">,</span> step<span class=\"token punctuation\">,</span> steps<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> validSteps <span class=\"token operator\">=</span> Children<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isValidElement<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> steps<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>props <span class=\"token keyword\">as</span> Partial<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">??</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> targetStep <span class=\"token operator\">=</span> validSteps<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> children<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> step\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetStep <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>step<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 스텝 컴포넌트를 찾지 못했습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> targetStep<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Omit<span class=\"token operator\">&lt;</span>\n    FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"steps\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"step\"</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelComponent<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n    props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">Step</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n            Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                            <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span>\n        <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 useFunnel 오픈소스 코드를 거의 그대로 가져온 코드로 추상화된 훅을 사용하면서 외부에서 타입을 지정할 수 있게 만들어보았다.\n각 코드들을 조금씩 뜯어보면서 왜 각각이 필요한지 정리해보자.</p>\n<ul>\n<li>StepsType</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">readonly</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepsType</span> <span class=\"token operator\">=</span> NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></code></pre></div>\n<p>StepsType은 빈배열이 아님을 타입적으로 보장하고, 전달하는 스텝 배열에 따라 <code class=\"language-text\">리터럴</code>로 타입을 좁혀주기 위해, <strong>readonly</strong>로 되어 있다.\nGeneric으로 받은 Steps 타입은 StepProps와 FunnelProps에서 사용되어, 각각의 컴포넌트에서 사용할 수 있게 되었다.</p>\n<ul>\n<li>StepProps</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">StepProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n  children<span class=\"token operator\">:</span> ReactNode\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Step</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>StepProps는 Step 컴포넌트에서 사용할 타입을 정의한 것으로, name은 <strong>전달된 Steps 배열의 요소중 하나</strong>로 타입을 좁힌다.</p>\n<ul>\n<li>FunnelProps</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  children<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span>\n  steps<span class=\"token operator\">:</span> Steps\n  step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Funnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  children<span class=\"token punctuation\">,</span>\n  step<span class=\"token punctuation\">,</span>\n  steps<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> validSteps <span class=\"token operator\">=</span> Children<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isValidElement<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>child <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> steps<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>props <span class=\"token keyword\">as</span> Partial<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">??</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span>\n\n  <span class=\"token keyword\">const</span> targetStep <span class=\"token operator\">=</span> validSteps<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>children <span class=\"token operator\">=></span> children<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> step<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetStep <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>step<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 스텝 컴포넌트를 찾지 못했습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> targetStep\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>FunnelProps는 Funnel 컴포넌트의 Prop을 지정한 부분이고 Funnel 내부에 유효한 children으로 필터링하는 과정에서 타입 단언으로 작성되어 있다.\n타입 단언으로 작성된 이유가 뭘까하고 제거해보았을 때, 아래 <code class=\"language-text\">children.props.name</code>에서 <code class=\"language-text\">name</code>이 정의되어 있지 않다는 에러가 발생하기 때문에 타입 단언을 사용한 것으로 보인다.</p>\n<ul>\n<li>FunnelComponent</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Omit<span class=\"token operator\">&lt;</span>\n  FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"steps\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"step\"</span>\n<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelComponent<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n  props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">Step</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>RouteFunnel은 Funnel 컴포넌트를 분리하는 대신 바로 작성해도 동작에는 문제가 없지만 코드 가독성을 위해 분리시키신 것으로 보였다.\nFunnelComponent 타입 Step 컴포넌트의 타입을 지정해줌으로서 <strong>Step의 name이 전달받은 Steps 배열의 요소중 하나임을 보장</strong>할 수 있게된다.</p>\n<p>해당 타입 없이도 StepsType을 사용하면서 자동으로 좁혀지지 않을까 했지만, 타입 지정전에는 단순 컴포넌트로 암묵적으로 추론되면서 name에 지정된 값이 아닌 다른값을 넣거나, Steps로 빈배열을 넣어도 타입에러가 안나게 된다.</p>\n<table width='100%'>\n    <tbody><tr>\n        <th>타입 지정 전</th>\n    </tr>\n    <tr>\n        <td>\n            <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 589px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/e5ea89efc96c0620a136fae8a77b5d57/49bab/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 15.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuklEQVR42h2OW07DMBBFswDqOI6pW9M8TeymJg8KoQKJL/a/poOVj6OZqzvSmawfN6K/4+qVq/tCm35H6Rp9rHaMqVBlyrpJ+wVrG0rTpq7leOr2W6leyJUlk4UlNJ7oJoZuY3lb+Xl8cl9mvj8ibphY48w8/bK9/xGc4xZese0Vewk0XUSfHULanezpoJOl4rF6xqEn+IHQ3qj7yLgEfPSYJMzTB4U6IXLDQRiEeEZKgyzMPsvSotSZf8IOUXu2xNNNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='FunnelComponent      ' title='' src='/static/e5ea89efc96c0620a136fae8a77b5d57/49bab/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png' srcset='/static/e5ea89efc96c0620a136fae8a77b5d57/e7570/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png 170w,\n/static/e5ea89efc96c0620a136fae8a77b5d57/f46e7/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png 340w,\n/static/e5ea89efc96c0620a136fae8a77b5d57/49bab/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png 589w' sizes='(max-width: 589px) 100vw, 589px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n        </td>\n    </tr>\n    <tr>\n        <th>타입 지정 후</th>\n    </tr>\n    <tr>\n        <td>\n            <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 655px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/1d0adfe028a8fe349365b382d4df9919/2728a/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVR42jWPWY6DMBAFuUA07EkAmwCGGDD7R6S5/71qGpH5KNltqZ9feenL0RlDelfc/CdBVPDj5wRhhh/l+OF5fxLFOWGkBE0YK+K7nEkhKKJUXXuy4+l2QStL/uhRaqCxO27fGcaRsnLU3UFvJ5bBonVHWUw8MkPrZDZvispQW0uaVfJRgZckJVMz4LoPXbNTS1u7bJj3zNBZ1nlmW1d5n8hzy6ueqJpZmpVikl0EF6eNdxM9VRp+jx43ChJUVweNNHRbj24tUXIqfZVjLXN5KX5D/gNP/gDRTGwhht6uPwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='FunnelComponent      ' title='' src='/static/1d0adfe028a8fe349365b382d4df9919/2728a/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png' srcset='/static/1d0adfe028a8fe349365b382d4df9919/e7570/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png 170w,\n/static/1d0adfe028a8fe349365b382d4df9919/f46e7/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png 340w,\n/static/1d0adfe028a8fe349365b382d4df9919/2728a/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png 655w' sizes='(max-width: 655px) 100vw, 655px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n        </td>\n    </tr>\n</tbody></table>\n<h3>4. 히스토리 관리</h3>\n<p>하나의 페이지로 관리하게 되면서 가독성은 올라가게 되었지만 뒤로가기를 했을 때 스텝별 히스토리가 유지되지 못하게 되었다.</p>\n<p>해당 문제를 해결하기 위해 발표 내용을 참고해보면 step을 상태가 아니라 <strong>QueryParam</strong>으로 관리하는 방식으로 해결했다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/f1cc3f408383890aeea9c0eedad7f358/d98b8/history.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 45.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVR42oWSa1ObQBSGjbHRmKR2DHdIAAmEywKLYEtInH7q//9Jry9gbaY6+uGZM3t29jlnz+7F9NsMq7WNlWIRc2Rtjbl7C8szxvwHKDYWPzRMJhNcXM9XsNJfMOrfsIsjrMcWxtMBRn6AldRwkwpeIuGlFeyohhU+vqPP616Gy8sphTdLGGEFrWjhxBRnDdSqgVE9QS1q+LlEmAsEIoMR5NC8vxSvkXk/h7rZj8LZnMKdhCY7GLLFpnqGnZywLf/AlEes6xPUqIOfdZS22MYlQiEQZoKdF3DTljdpKYzPhA8l/OJAOjhlB09Q3lM/Q2PHfvoTWUkZC5ivUncv4IQFnH0NM2r+E+44n0BSzNYDwcjr8Bo6Y1/MHCJzROda94sz8mHvn/BmAXNXwkgbWKzmxQ0ry6ErM+BhN+PABWclhvgR/QwVJ8JkFC6hs0MtqmDycTZx/2oVtknDQnI81Hf7CX2HCh9lEE6vZsMfWt6pWJDbNxTm1WHva3TMv6+Hf/gC25Lzh34H6jcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='히스토리 관리' title='' src='/static/f1cc3f408383890aeea9c0eedad7f358/ca1dc/history.png' srcset='/static/f1cc3f408383890aeea9c0eedad7f358/e7570/history.png 170w,\n/static/f1cc3f408383890aeea9c0eedad7f358/f46e7/history.png 340w,\n/static/f1cc3f408383890aeea9c0eedad7f358/ca1dc/history.png 680w,\n/static/f1cc3f408383890aeea9c0eedad7f358/02d09/history.png 1020w,\n/static/f1cc3f408383890aeea9c0eedad7f358/9d567/history.png 1360w,\n/static/f1cc3f408383890aeea9c0eedad7f358/d98b8/history.png 1588w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>히스토리 관리</figcaption>\n  </figure></p>\n<p>위 방법과 같이 예제코드에 적용해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// QS</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">createQueryString</span><span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> queryString <span class=\"token operator\">=</span> <span class=\"token function\">createSearchParamString</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>queryString <span class=\"token operator\">===</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">?</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>queryString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createSearchParamString</span><span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLSearchParams</span><span class=\"token punctuation\">(</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"%20\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">QS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  create<span class=\"token operator\">:</span> createQueryString<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// useFunnel 훅</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">SetStepOptions</span> <span class=\"token punctuation\">{</span>\n  stepChangeType<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token string\">\"push\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"replace\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">STEP_QUERY_KEY</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"funnel-step\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n  steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">,</span>\n  initialStep<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> setStep <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span>step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> setStepOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> SetStepOptions<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">QS</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">[</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> step<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n\n      <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>setStepOptions<span class=\"token operator\">?.</span>stepChangeType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">\"replace\"</span><span class=\"token operator\">:</span>\n          router<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">return</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">\"push\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n          router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>router<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> step <span class=\"token operator\">=</span> <span class=\"token function\">useQueryParam</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> initialStep\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>QueryParam으로 Step을 관리하게 되면서 더이상 step 지역상태는 불필요하게 되었고, setStep의 옵션으로 push와 replace에 따라 히스토리를 관리할 수 있게 되었다.</p>\n<table>\n    <tbody><tr>\n        <th>히스토리 관리 전 뒤로가기</th>\n        <th>히스토리 관리 후 뒤로가기</th>\n    </tr>\n    <tr>\n        <td>\n            <img width='655' src='/static/히스토리관리_전-e88ad3891bcf87daf5248f9cfd2a2739.gif'>\n        </td>\n        <td>\n            <img width='655' src='/static/히스토리관리_후-ff98dc2a0acd2b11a1101cedca42e98a.gif'>\n        </td>\n    </tr>\n</tbody></table>\n<h3>5. 폼 데이터 관리</h3>\n<p>발표는 히스토리 관리까지를 라이브러리 작업에 대한 소개로 마무리했지만, 오픈 소스 코드를 보면 폼 데이터 관리에 대한 부분도 있어서 추가해보았다.</p>\n<p>코드 중에는 데이터 스토리지를 이용해 이전 작성한 값들을 저장하고 불러오는 로직도 있었지만, 현재 예제에서는 생략하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Form</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  phoneNumber<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  address<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  citizenNumber<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>Funnel<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">WithState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span>\n              <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"phoneNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                  <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n                  step<span class=\"token operator\">:</span> <span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">,</span>\n                  phoneNumber<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span>\n              <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span>\n              <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"citizenNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                  <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n                  step<span class=\"token operator\">:</span> <span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">,</span>\n                  citizenNumber<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            &lt;AddressStep\n              phoneNumber=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n              citizenNumber=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n              onNext=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"address\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token comment\">// 제출 로직</span>\n                  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>prev <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n                    step<span class=\"token operator\">:</span> <span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">,</span>\n                    address<span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n                  <span class=\"token keyword\">return</span>\n                <span class=\"token punctuation\">}</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            />\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// useFunnel 훅</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n  steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">,</span>\n  initialStep<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> _initialStep <span class=\"token operator\">=</span> initialStep <span class=\"token operator\">??</span> steps<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> setStep <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span>step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> setStepOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> SetStepOptions<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">QS</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">[</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> step<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n\n      <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>setStepOptions<span class=\"token operator\">?.</span>stepChangeType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">\"replace\"</span><span class=\"token operator\">:</span>\n          router<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">return</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">\"push\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n          router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>router<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> step <span class=\"token operator\">=</span> <span class=\"token function\">useQueryParam</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> _initialStep\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token constant\">S</span></span> <span class=\"token operator\">=</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n  <span class=\"token keyword\">type</span> <span class=\"token class-name\">Step</span> <span class=\"token operator\">=</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">type</span> <span class=\"token class-name\">NextState</span> <span class=\"token operator\">=</span> <span class=\"token constant\">S</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Step <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> nextPendingStepRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Step <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> nextStateRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Partial<span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> WithState <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">State</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">S</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(initialState: State) => </span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> _setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> setState <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span>\n        next<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>NextState<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>next<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>NextState<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> NextState<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> nextStepValue<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>NextState<span class=\"token operator\">></span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> next <span class=\"token operator\">===</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          nextStepValue <span class=\"token operator\">=</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          nextStepValue <span class=\"token operator\">=</span> next\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nextStepValue<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextStepValue<span class=\"token punctuation\">.</span>step <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          nextPendingStepRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> nextStepValue<span class=\"token punctuation\">.</span>step\n        <span class=\"token punctuation\">}</span>\n        nextStateRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> nextStepValue\n\n        <span class=\"token function\">_setState</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>_setState<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextPendingStepRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">deepEqual</span><span class=\"token punctuation\">(</span>nextStateRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span>nextPendingStepRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n        nextPendingStepRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\n  return Object.assign([FunnelComponent, setStep] as const, </span><span class=\"token punctuation\">{</span>\n    WithState<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">) as readonly [\n    FunnelComponent&lt;Steps>,\n    (step: Steps[number], options?: SetStepOptions) => void\n  ] &amp; </span><span class=\"token punctuation\">{</span>\n    WithState<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>StateExcludeStep <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n      initialState<span class=\"token operator\">:</span> StateExcludeStep\n    <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n      FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n      StateExcludeStep<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">(</span>\n        next<span class=\"token operator\">:</span>\n          <span class=\"token operator\">|</span> Partial<span class=\"token operator\">&lt;</span>StateExcludeStep <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n              next<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>StateExcludeStep <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> StateExcludeStep <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n}</span></code></pre></div>\n<p>setState로 폼 데이터를 업데이트시킨 후에 다음 step으로 이동시키기 위해 nextPendingStepRef와 nextStateRef와 useEffect를 사용한 것으로 보인다.\n마지막 타입 단언을 하지 않았을 때 state의 타입이 주입한 타입이 아니라 <code class=\"language-text\">Record&lt;string, unknown></code>로 추론되기 때문에 타입 단언을 사용한 것으로 보인다.</p>\n<p>이렇게 step과 폼 데이터를 함께 관리하게 되면서, 보다 응집도를 높인 훅을 완성할 수 있었다.</p>\n<h2>마치며</h2>\n<p>useFunnel이란 훅을 너무 좋은 방법이다 생각하다 드디어 직접 분석해보았다.\n요구사항들과 해결방법을 코드와 함께 히스토리를 분석해보는 과정에서 더 깊이 있게 공부할 수 있게 되었고, 앞으로도 틈틈히 오픈소스를 분석해보며 더 많은 것을 배워나가야겠다.</p>","frontmatter":{"title":"📚 useFunnel 분석하고 따라 만들어 보기","date":"September 17, 2024","tags":["slash","FE Accelerator","useFunnel"],"series":null},"fields":{"slug":"/2024-09-17-useFunnel-분석해보기/","readingTime":{"minutes":25.935}}},"seriesList":{"edges":[{"node":{"id":"4dd6f66b-f311-5b91-9eac-28095d67106f","fields":{"slug":"/2022-09-06-BEM과-자료형/"},"frontmatter":{"title":"BEM과 자바스크립트의 자료형"}}},{"node":{"id":"484c98ee-5762-55db-84b4-6b21ae960acf","fields":{"slug":"/2022-09-07-자바스트립트의-두가지-복사방법/"},"frontmatter":{"title":"자바스크립트의 두가지 복사 방법"}}},{"node":{"id":"352ba125-5786-518a-9c7a-303042a0755f","fields":{"slug":"/2022-09-07-자바스크립트의-타입과연산자/"},"frontmatter":{"title":"자바스크립트의 타입과 연산자"}}},{"node":{"id":"10db5919-95c0-53f5-94be-dcbac01e5d37","fields":{"slug":"/2022-09-10-intersection-observer /"},"frontmatter":{"title":"Intersection observer"}}},{"node":{"id":"5b188256-9365-5320-a67f-97afab6d630f","fields":{"slug":"/2022-09-12-브라우저API/"},"frontmatter":{"title":"Browser API"}}},{"node":{"id":"db56d225-cd7a-5168-8079-35d6d038e94f","fields":{"slug":"/2022-09-13-함수/"},"frontmatter":{"title":"함수"}}},{"node":{"id":"80cd5d8e-ad25-5b3f-921a-53a5f16a9bd5","fields":{"slug":"/2022-09-14-객체/"},"frontmatter":{"title":"객체"}}},{"node":{"id":"44dc8bd6-7888-58d2-b3fb-124760fd2e55","fields":{"slug":"/2022-09-17-빌트인객체/"},"frontmatter":{"title":"빌트인 객체"}}},{"node":{"id":"75d48151-20bb-5d55-9b13-7c77c923e577","fields":{"slug":"/2022-09-19-array/"},"frontmatter":{"title":"Array"}}},{"node":{"id":"962839d3-d3ea-5820-a045-07d3cdaa0079","fields":{"slug":"/2022-09-22-iteration/"},"frontmatter":{"title":"Iteration"}}},{"node":{"id":"cd30073c-7f4c-54d8-b893-090480da82c3","fields":{"slug":"/2022-09-24-Map과Set/"},"frontmatter":{"title":"Map과 Set"}}},{"node":{"id":"900f53ea-b7eb-5996-b44b-626400cf9d87","fields":{"slug":"/2022-10-06-HTTP란/"},"frontmatter":{"title":"HTTP 정리"}}},{"node":{"id":"458970f3-d49a-5b5f-8975-6f084e4ab43b","fields":{"slug":"/2022-10-18-Node-JS-기초/"},"frontmatter":{"title":"Node js:NodeJS 이용한 서버 만들기"}}},{"node":{"id":"f0792841-794b-5ec0-a351-a2f7605adc40","fields":{"slug":"/2022-10-19-Express-기초/"},"frontmatter":{"title":"NodeJS: express"}}},{"node":{"id":"d2bb44f2-60ad-5ed7-90ab-2bf43c831572","fields":{"slug":"/2022-11-18-CSR과-SSR/"},"frontmatter":{"title":"CSR과 SSR 그리고 Universal Rendering"}}},{"node":{"id":"cb62a84f-d1d5-5894-8175-64624d84a372","fields":{"slug":"/2022-11-20-스코프-실행컨테스트-클로저/"},"frontmatter":{"title":"스코프,실행컨텍스트,클로저"}}},{"node":{"id":"3b08f6c0-b947-5562-b38c-1228108dd551","fields":{"slug":"/2022-11-24-Critical-Rendering-Path/"},"frontmatter":{"title":"💻 Critical Rendering Path"}}},{"node":{"id":"9735256f-9deb-5bc5-a7a3-9d68d3278b4a","fields":{"slug":"/2022-11-27-비동기와-프로미스/"},"frontmatter":{"title":"비동기와 프로미스"}}},{"node":{"id":"ce607981-e768-5fdf-96d7-5d026072082f","fields":{"slug":"/2022-11-30-지스트-청원-서비스-회고/"},"frontmatter":{"title":"지스트 청원서비스 회고"}}},{"node":{"id":"f6194d07-b810-5332-9cbc-da0ce80eb312","fields":{"slug":"/2022-12-02-제너레이터와-async-await/"},"frontmatter":{"title":"제너레이터와 Async-Await"}}},{"node":{"id":"ad48afd5-0612-56fe-a974-7edb7de83a74","fields":{"slug":"/2022-12-03-모으잡-리팩토링/"},"frontmatter":{"title":"모으잡-check box 수정, react-query 커스텀 훅, 크롤링 이슈"}}},{"node":{"id":"2776079b-37ef-5268-9738-de277120a7da","fields":{"slug":"/2022-12-05-호이스팅/"},"frontmatter":{"title":"호이스팅"}}},{"node":{"id":"01501fd0-6b11-5e0d-80ae-5f607d766625","fields":{"slug":"/2022-12-09-쿠키-session-jwt/"},"frontmatter":{"title":"Cookie,Session과 JWT"}}},{"node":{"id":"72347779-5753-5035-b978-e4569b4f14cf","fields":{"slug":"/2022-12-09-this/"},"frontmatter":{"title":"this"}}},{"node":{"id":"a64e2757-3cf3-5eb6-a560-d93cbc6b68b2","fields":{"slug":"/2022-12-10-http와https/"},"frontmatter":{"title":"http와 https"}}},{"node":{"id":"89b94977-8c1a-5723-af2b-1bf7c7750ebe","fields":{"slug":"/2022-12-12-생성자함수-프로토타입/"},"frontmatter":{"title":"생성자 함수, 프로토타입"}}},{"node":{"id":"5d40ad58-a897-564b-9a54-5c4a65ca9c0c","fields":{"slug":"/2022-12-30-이벤트/"},"frontmatter":{"title":"이벤트"}}},{"node":{"id":"93b78365-058d-511b-bb11-72485e3f0d70","fields":{"slug":"/2022-12-23-class/"},"frontmatter":{"title":"클래스"}}},{"node":{"id":"94db5333-429d-592a-a409-e8f0a0c76354","fields":{"slug":"/2023-01-23-리액트의-기본원리/"},"frontmatter":{"title":"React study: 리액트의 기본 원리"}}},{"node":{"id":"fe5c6476-9c85-50cc-938a-137246b45864","fields":{"slug":"/2023-01-23-Vite와-번들러/"},"frontmatter":{"title":"Vite는 왜 빠를까, 번들러에 대한 정리"}}},{"node":{"id":"80445e0b-511b-5e28-bde0-99498fbf3a5d","fields":{"slug":"/2022-12-20-리액트-성능보장/"},"frontmatter":{"title":"React study: 리액트가 성능을 보장하는 방법"}}},{"node":{"id":"782ca102-9c01-52ee-8b4d-b5432da4b448","fields":{"slug":"/2023-02-03-useState,useEffect, useRef, memo/"},"frontmatter":{"title":"React Study: useState, useEffect, useRef, memo"}}},{"node":{"id":"c1d41785-332b-595b-b9b8-0c7a719657c7","fields":{"slug":"/2023-02-17-취업준비-회고/"},"frontmatter":{"title":"신입으로 시작하며 작성하는 취준 회고"}}},{"node":{"id":"e06ed826-880e-5b59-ae78-c098858b0634","fields":{"slug":"/2023-02-21-google.com-입력했을때-일어나는-일/"},"frontmatter":{"title":"google.com를 브라우저에 검색했을 때 일어나는 일"}}},{"node":{"id":"aad7179c-dbc9-5851-a7fd-38251e0a508b","fields":{"slug":"/2023-03-01-CDN/"},"frontmatter":{"title":"CDN은 뭘까?"}}},{"node":{"id":"beed37b9-064d-581e-89d3-b4c43838e429","fields":{"slug":"/2023-03-05-디자인패턴/"},"frontmatter":{"title":"MVC, MVVM, Flux패턴 그리고 Service와 Repository 패턴"}}},{"node":{"id":"6f3b633d-c73e-5585-b597-edaa1d26c2bb","fields":{"slug":"/2023-03-31-2023년-3월회고/"},"frontmatter":{"title":"🐤 2023년 3월 회고"}}},{"node":{"id":"aed1969e-b959-5454-8c2f-52c4a0ec6e94","fields":{"slug":"/2023-05-06-2023년-4월회고/"},"frontmatter":{"title":"😎 2023년 4월 회고"}}},{"node":{"id":"a73d6084-a910-5da1-bcb0-f555558f6e3b","fields":{"slug":"/2023-06-05-2023년-5월회고/"},"frontmatter":{"title":"☀︎ 2023년 5월 회고"}}},{"node":{"id":"90c8982f-2982-5a80-bd85-6283a0f82d70","fields":{"slug":"/2023-07-06-2023년-6월회고/"},"frontmatter":{"title":"☼ 2023년 6월 회고"}}},{"node":{"id":"88fffefc-5bb1-5a85-b1aa-b0ac1d4bed94","fields":{"slug":"/2023-08-09-2023년-7월회고/"},"frontmatter":{"title":"☂︎ 2023년 7월 회고"}}},{"node":{"id":"e274816c-0eb9-5b42-93d0-823495b63d87","fields":{"slug":"/2023-09-09-2023년-8월회고/"},"frontmatter":{"title":"😊 2023년 8월 회고"}}},{"node":{"id":"0370cc06-a8be-5505-9714-383d053b476d","fields":{"slug":"/2023-10-03-2023년-9월회고/"},"frontmatter":{"title":"🚅 2023년 9월 회고"}}},{"node":{"id":"4eea6c19-13d8-5363-bc87-963f217b7a42","fields":{"slug":"/2023-11-01-2023년-10월회고/"},"frontmatter":{"title":"🧐 2023년 10월 회고"}}},{"node":{"id":"a2a6e999-a53d-5e52-aae6-d57a75673c5f","fields":{"slug":"/2023-12-02-2023년-11월회고/"},"frontmatter":{"title":"😃 2023년 11월 회고"}}},{"node":{"id":"ee90f174-21d6-5bbf-b2cf-6fd226bc9353","fields":{"slug":"/2023-12-31-2023년-12월회고/"},"frontmatter":{"title":"🌟 2023년 12월 회고"}}},{"node":{"id":"642af668-e5c7-501d-bbaa-7a7e0724a982","fields":{"slug":"/2024-02-07-2024년-1월회고/"},"frontmatter":{"title":"🐥 2024년 1월회고"}}},{"node":{"id":"f30aaeb4-d2ed-5b78-82cb-556facbdb597","fields":{"slug":"/2024-03-02-2024년-2월회고/"},"frontmatter":{"title":"🙊 2024년 2월회고"}}},{"node":{"id":"0a55cde5-eb6e-50ef-a0b9-3307863119d1","fields":{"slug":"/2024-03-03-자바스크립트의-동시성-이해하기/"},"frontmatter":{"title":"Promise.all의 동시성 이해하기"}}},{"node":{"id":"b8f3cba2-e71c-5b78-9eef-169fcdfde70f","fields":{"slug":"/2024-03-30-App-StartUp-time-개선/"},"frontmatter":{"title":"App StartUp time 개선"}}},{"node":{"id":"8ffb09b1-c80e-58a2-b89a-6e3c6729e89b","fields":{"slug":"/2024-04-07-2024년-3월회고/"},"frontmatter":{"title":"🙌 2024년 3월회고"}}},{"node":{"id":"67fd6178-63b4-5b39-8e3c-fb1b0c5db869","fields":{"slug":"/2024-04-21-onViewableItemsChanged-이해해보기/"},"frontmatter":{"title":"👀 onViewableItemsChanged 이해해보기"}}},{"node":{"id":"40a3836b-74fe-59bb-80a8-7d921608f55a","fields":{"slug":"/2024-05-01-2024년-4월회고/"},"frontmatter":{"title":"🙌 2024년 4월회고"}}},{"node":{"id":"6a36dcc8-a80b-5581-9649-954e0ad0c5eb","fields":{"slug":"/2024-06-01-2024년-5월회고/"},"frontmatter":{"title":"🙌 2024년 5월회고"}}},{"node":{"id":"39b77a6b-96d6-5c2e-9012-c6b6be81f72d","fields":{"slug":"/2024-06-02-에러바운더리-도입하기/"},"frontmatter":{"title":"✅ 에러바운더리 도입하기"}}},{"node":{"id":"f85b5d27-6e2c-5dd3-8ca4-1f8b70fb4815","fields":{"slug":"/2024-06-30-2024년-6월회고/"},"frontmatter":{"title":"🤭 2024년 6월회고"}}},{"node":{"id":"e4ae5f2a-10c8-58d3-bacb-6a25ce1b95fc","fields":{"slug":"/2024-06-30-NativeStack적용하기/"},"frontmatter":{"title":"🖥️ Native Stack 적용하기"}}},{"node":{"id":"36c25ccf-f28b-5447-9899-c3d0d414a44f","fields":{"slug":"/2024-08-03-2024년-7월회고/"},"frontmatter":{"title":"👏 2024년 7월회고 "}}},{"node":{"id":"e7ef6c08-c8ff-556b-8f64-b2e61225fa6f","fields":{"slug":"/2024-09-15-2024년-8월회고/"},"frontmatter":{"title":"🥳 2024년 8월회고 "}}},{"node":{"id":"7e844836-6a81-5bd8-a59f-4907b5d6fab3","fields":{"slug":"/2024-09-17-useFunnel-분석해보기/"},"frontmatter":{"title":"📚 useFunnel 분석하고 따라 만들어 보기"}}},{"node":{"id":"54a91c29-22f4-5ec0-ac9b-2902d00e195d","fields":{"slug":"/2024-09-25-로딩경험-개선/"},"frontmatter":{"title":"⏳ 로딩 경험 개선"}}},{"node":{"id":"5d3a72d4-3907-5696-ba59-56b475ad67af","fields":{"slug":"/2024-10-01-2024년-9월-회고/"},"frontmatter":{"title":"9️⃣ 2024년 9월 회고"}}},{"node":{"id":"6ce7e536-b3fc-556d-84f8-09e393e3180e","fields":{"slug":"/2024-10-25-숨고를-떠나며/"},"frontmatter":{"title":"10월 회고, 숨고를 떠나며"}}},{"node":{"id":"f3912500-0fb7-5202-9f96-94405a29c7d7","fields":{"slug":"/2024-11-18-패키지매니저/"},"frontmatter":{"title":"패키지 매니저 비교해보기"}}},{"node":{"id":"f8303667-d369-58a3-bcc5-6d612982cfeb","fields":{"slug":"/2024-11-24-overlay-kit-분석/"},"frontmatter":{"title":"Overlay Kit 분석"}}},{"node":{"id":"e431d5fb-3f76-5190-b63a-51e32f5d7244","fields":{"slug":"/2024-12-01-2024년-11월회고/"},"frontmatter":{"title":"2024년 11월 회고, welcome to 토스"}}},{"node":{"id":"7e7c7b65-d941-5e27-bf28-d0d6785641d8","fields":{"slug":"/2024-12-27-2024년-12월회고/"},"frontmatter":{"title":"2024년 12월 회고, bye bye 2024"}}}]},"previous":{"fields":{"slug":"/2024-09-15-2024년-8월회고/"},"frontmatter":{"title":"🥳 2024년 8월회고 "}},"next":{"fields":{"slug":"/2024-09-25-로딩경험-개선/"},"frontmatter":{"title":"⏳ 로딩 경험 개선"}}},"pageContext":{"id":"7e844836-6a81-5bd8-a59f-4907b5d6fab3","series":null,"previousPostId":"e7ef6c08-c8ff-556b-8f64-b2e61225fa6f","nextPostId":"54a91c29-22f4-5ec0-ac9b-2902d00e195d"}},"staticQueryHashes":[],"slicesMap":{}}