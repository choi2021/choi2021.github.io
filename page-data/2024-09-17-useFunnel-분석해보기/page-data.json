{"componentChunkName":"component---src-templates-post-jsx","path":"/2024-09-17-useFunnel-분석해보기/","result":{"data":{"site":{"siteMetadata":{"title":"Troy DevLog"}},"markdownRemark":{"id":"8fb916d1-72dc-5f0d-88cb-e8a54ddb0259","excerpt":"2023 토스 Slash의 퍼널: 쏟아지는 페이지 한 방에 관리하기 발표에서 복잡한 퍼널간 상태관리를 위한 라이브러리 useFunnel을 소개했다. 퍼널: 쏟아지는 페이지 한 방에 관리하기 인트로 \n 프론트엔드 개발자라면 여러 스텝에 거쳐서 사용자의 입력을 받고, 해당 정보를 제출하는 폼 정보를 다루는 경험을 한번쯤은 하게된다. 그리고 페이지나 스텝이 많…","html":"<p>2023 토스 Slash의 <a href=\"https://www.youtube.com/watch?v=NwLWX2RNVcw&#x26;t=50s\">퍼널: 쏟아지는 페이지 한 방에 관리하기 발표</a>에서 복잡한 퍼널간 상태관리를 위한 라이브러리 useFunnel을 소개했다.</p>\n<p>[퍼널: 쏟아지는 페이지 한 방에 관리하기 인트로 ]\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/ca2701c7fe0b3e0a62f89412447155cb/c9112/useFunnel-presentation-cover.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC8UlEQVR42j2SeUjTYRiAf145Ny2NkFK7D0OWM11pzePn1myS5RypuXJZQkRWlEVhYKUdJpEWdCGhZnbZBWVomUW35AVlUNhBBxRBh1QgbvPp28o+eN7jn+d7349PGjFhCv6JRoJ0iwiJX8wY2cpoeRljknMIkXNEbSU4KYdgo43JE2cQo1QSPXIU2qAgUpMMJCQvwGzOw2i0oNPpkWxbSmn7+ZvmD99p+fSLlm/2v3wd+M8tFz+c6JeuROXtJfBBIUnERsWQFKsjTZ9KojaemMiZSBuLy3jW3cn7t29wnUGnQ4RBhs6gqIfaJSvyUQaOJFiXhGqeGZ84E16JaXgIvOdZ8JouhKsLt/Dg4UNutrTQ3tFJ040b9L56jVNIHCLYHU4G7A63cL4lE0nyQLN0LZr8IjTLi4jKE6zaQXTBXubYCpDWbN5KV1c3jdcaaW1tpam5mac9PTiE0C5GG3AKoRC7hpTT0oXQE41+MVo5k4ToRIxqNbGzZGYbsliQlYu0Ydt29+19fX309/cz6HAI7EML/135XyenmNwTRqVaiZibQUFmOm21xchxOqJNuZjzViMVFpf8f69Xn79Q8aidsievKXvcy+7uj5R0vKO04z27uz4QW3GaYdM0qGUz6uRsitavpef8LiwWKzNTrBhElgwLzZw428DR6pPsr6pl8/4jlFadoaKugZrrt7l47wnn77S5qWm6K2QmQiJl1mwqoffFS553Pqa9vRO9JZ85pgzXBhIenp6ikIjQzmXnvkMcPHiUSydraaip4Up9PQ3V1dy/3sjp+jOEa1MYPcvEprJKTl25yqG6czTduUt55TFixJ+UfH19GKEKcAtnxCWw58ARCssPYzl2gYzKOszlJ0Q+heX4ZdZVVBEeaUAREY/fVDW+UyLxGBdOaJzM/CwrYdPVSP7DA1H5B+Cn8GVqeAQLs23o0rOZaLYxycWiXJGXM16QkJlLaNhYvAMC8QsdjzJ0HMqwCQwPGYuPYhh+KgV/AC/3En2SAbtsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='useFunnel Slash 발표' title='' src='/static/ca2701c7fe0b3e0a62f89412447155cb/ca1dc/useFunnel-presentation-cover.png' srcset='/static/ca2701c7fe0b3e0a62f89412447155cb/e7570/useFunnel-presentation-cover.png 170w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/f46e7/useFunnel-presentation-cover.png 340w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/ca1dc/useFunnel-presentation-cover.png 680w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/02d09/useFunnel-presentation-cover.png 1020w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/9d567/useFunnel-presentation-cover.png 1360w,\n/static/ca2701c7fe0b3e0a62f89412447155cb/c9112/useFunnel-presentation-cover.png 2436w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>useFunnel Slash 발표</figcaption>\n  </figure></p>\n<p>프론트엔드 개발자라면 여러 스텝에 거쳐서 사용자의 입력을 받고, 해당 정보를 제출하는 폼 정보를 다루는 경험을 한번쯤은 하게된다. 그리고 페이지나 스텝이 많아지면 많아질수록 복잡도는 올라가고, 디버깅의 어려움을 겪기도 한다.</p>\n<p>현업에서 자주 마주치는 이 문제를 우아하게 풀어낸 토스의 useFunnel 라이브러리를 언젠가 분석하고 적용해봐야겠다고 생각했지만 당시에는 미래의 나에게 맡겨두고(?) 미뤄두었다.</p>\n<p>토스의 프론트엔드 accelerator 멘토링 과정의 2주차 주제였던 <code class=\"language-text\">퍼널간 상태 관리하기</code>라는 주제로 과제를 개선하게 되었고, 더이상 미루지말자라는 마음으로 useFunnel 라이브러리를 분석하고 적용해보는 과정을 진행했다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; '>\n      <a class='gatsby-resp-image-link' href='/static/d17b23ed4f990b38d3eea6e16f455b27/12f38/infinite_challenge.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 104.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF30lEQVR42h2TC1DUhxHG/7aZqK0TJRiq8lIBE02xiBpAUKMIAopwII8D7uC404PjEA6RAw+8E/EUz4CAQjBqlFRMBEMBCYISopWXAkFQUaoJU+tz7ANqYuvr13+zMzuzuzO7881+3ye0tHbzVW0DGnUyWwy7kaabCZSn0tLYwuFjtShUafiEJKBq+hsbLI14rAjCZ0UIAeklxGQWkV/4Gaojl1FW9SDbUYZw/9E4/VdvEqo0EP55F4azg+SFryWzsJKO6/dQ5BaxWbkZ2YUxopuesjZQQsD2z5Ce+xfRx3qRFLeivPicyEPt+Gr2Iuy3VLDjZDshWy1Yar4jJXsPmXExfFnbzOG7IElUE73YgfUHGoi7/JKdefnkftWJ9OILZB0vUF55Iyak5h5ALQlBSD7RiOX6E841NjN4qRNJQBizZ84lLCYZ2dE2bO1s+cD6bdwSdKSe/JYMjZbMLemom28TfxNUI5DUeJO0df7kSNYgHBr+J/3/eImlYB+GrduJ2ShDEAQC/EIpsZQx8TeTfuk9o+QklZxAIokiIkH8d00b6Q8h8z7kVDej9Pcm1mUaQk3fzxS0PiJVa6Dw4Bkk8VlMnDAJV1cPdpXXERivJ0Cc6Qo+RV5UQ6R2J9GmSuKK6sjrfsqO3jEKmm+Rur8a9eYshNGnL1BX9FHVMoKxpAaPlWFM/NVkpk55j9LjrRxvvEbHrWdoSs8htzSwt6YT08nLpB08T9fQUzoHHlN+6iI9o/+lZXAMoefGfTJPXOf66L+prDjK2xMmk5y0jY/cV2DI3slf7z2mt3cAVcZe5OZq7MJzcYvKxUdbhNxYQmTOJxyubmJ4eISG+maE85032FTcTprIUkqKnrlzfk9NXRspGj1+/qF09w3T8l03Q33XSC87gRCkZeJyOW+t0/BraQ5CeBZrZZnUNbRybfgHhJb2q8iMpzGZK5CGxxITpWBA1F9KajahwRH0XBmkrb2T1vYutuUfwGWNDE//ePxjdKxOMrJ+zxFCZWk01n/D/n0lCKn1d4k9dhXDhQdsOvpnggrOoNBZWLNOgXugkrCcT8kur+Vs6R5M2hSCEvTkNNzg9uhj+nt6ydRmYNpdhu5kFzHinwXJ+Z8IbR5jia6SgPJOItpf4rA0hPnLIgnNP4Vu02aSM3fyp+1q9setJ7LwDGZRGT88+Q/j9+6iXLeWpbEGpPUPiP3mCYK0GzzyTrNqnhPHzUbkrWOs3tfMMlM9SQWHqdOrUMlUHMxI4fPcDPTmcn4ef873vUNUZqVj0WmIb7iP4vw48rOPECJ6YEPtj+SqlDSZ9SS3PyJUnAVeek1FxyhXvr3A3LmumLbnY9Qb8VjkRV9PP6qNwfi5LyTCy5VEYynytufIxKNCzABEfz2MUVwo0GhQf1JF3tBLqu884//x491R3p/3B6Ij48lIyWLh/MVIQqJZuWgBIV4fIvvYneBVK5GcFrnoAKFQtE/j1/XEhsVSfaqe0kILr9+84fWrV4wMDKCUb8La2pH57y8i0DeYOfbzmCV63dHBmY8Xu5EY6IOH2xKCvxhE1vUG4Yjoxb/cukNarIyHN4d4JaJ69tMLykorUYeHssprBVOt7Jkx0wl7uw9wEXVqK9bTrG2xtXfG2XkBNla/w7+kCWWbSIrp+79z5+E4hduyyNWmo9+SzYMRUYeKZDZ6e+C90B1rKztmWdthP8MZRzsXZooIbd6zw9Z2Nnaz5/Hub63wyTlE4pfdCOktt/ljez/VVdXYTJ+NvW8U247Xs0qmY0lgJHZuq3nH0QMrz/XYu/ny4QJvbGa4MN3GHlsHF+znzGf6NBvckkzIi6sREksusWhNHJpUPRnR8UzVmpmQWcpb/klMkuXyztZiJnvGMFmxC6cNGpYvj2BpQCKx+iL81GZ8ZVk4O7mSojNg2FUkHjTVEJh8ED+FmSCpAee4HGYnGLH9SMosXwXvBquY4ujFFM9QrJy8sXdYwrJwHVLDIZYrdxOoLUZmqMKw9wv0u47yP0/NASRqKb+GAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='이제는 useFunnel을 분석하고 적용해보자' title='' src='/static/d17b23ed4f990b38d3eea6e16f455b27/12f38/infinite_challenge.png' srcset='/static/d17b23ed4f990b38d3eea6e16f455b27/e7570/infinite_challenge.png 170w,\n/static/d17b23ed4f990b38d3eea6e16f455b27/f46e7/infinite_challenge.png 340w,\n/static/d17b23ed4f990b38d3eea6e16f455b27/12f38/infinite_challenge.png 580w' sizes='(max-width: 580px) 100vw, 580px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>이제는 useFunnel을 분석하고 적용해보자</figcaption>\n  </figure></p>\n<p>useFunnel 라이브러리는 당시 Next JS에 의존도를 가지고 있었지만 현재는 타입적으로 강화되었고, Next JS 뿐 아니라 React Router와 같은 다양한 Routing 라이브러리들을 지원할 수 있게 <a href=\"https://use-funnel.slash.page/ko\">개선된 버전</a>도 만들어졌다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLklEQVR42p1Sy07DMBDMb/MLfAZfwYkDBw5cEEKqhCilpGmrNqR5+JXEsYfNpmmlQJTCShvbm/V4RjuB1gZSSrjGwTv/Mz3AH3+utb22ttBaozQlrLVQUnE9wESkuUJ8EDBV3YFPxCigc93tx6cZrq5vcPfwzGc/gtrXRwH7Buccbu9fiKk+1v/JsAWMNjt8rja8LsM1PijdBGIwBpblBd4WS8xe5wS2ovUd80WINMuZ9STg8N12ci1wScOIYgFd1nyuj/U/S+6jISvkqkJFNrkkgl6iIB9JpXjfp1KGpAtiWZ0uaGOQF+L0wJBt0E9yvd1zfiUpkkNO4BpJmiGMttjtEzK/QkXy06zgvjg5UF/Gfb8yLITkNGVFMhuW2nqx2zdnG3nP/yzVamI5HNA3rP5emeT7/0sAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='개선된 useFunnel' title='' src='/static/61d297b0bc689d3bc90e2de8a43607f5/ca1dc/updated_useFunnel.png' srcset='/static/61d297b0bc689d3bc90e2de8a43607f5/e7570/updated_useFunnel.png 170w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/f46e7/updated_useFunnel.png 340w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/ca1dc/updated_useFunnel.png 680w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/02d09/updated_useFunnel.png 1020w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/9d567/updated_useFunnel.png 1360w,\n/static/61d297b0bc689d3bc90e2de8a43607f5/434e6/updated_useFunnel.png 2972w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>개선된 useFunnel</figcaption>\n  </figure></p>\n<p>이번 글은 <a href=\"https://www.slash.page/ko/libraries/react/use-funnel/README.i18n\">구 useFunnel 라이브러리</a> 발표와 라이브러리를 분석하고, 이를 적용해보는 과정을 공유하려 한다.</p>\n<h2>useFunnel이 풀고 싶은 문제</h2>\n<h3>Funnel이란?</h3>\n<p>Funnel이란 용어는 현재 재직중인 회사에서도 많이 사용하는 용어로, 원래는 마케팅에서 많이 사용하는 용어로 알려져있다.</p>\n<p>Funnel의 의미는 깔때기로 번역되며 초기 단계에 많은 사용자가 들어오다가, 중간 단계에서는 일부 사용자가 빠져나가고, 마지막 단계에서는 일부 사용자만 남게되는 형태를 의미한다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/a9e9547c2f9b3058548fab5dece6a1de/e2f49/funnel.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 75.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVElEQVR42pVTXUySYRT++BBHIFQmUQMpWi5Ll9ZVYl3VVlk3eZ3mVmvdtXXXrHXX6q75g7oyJQnDbNU0kwRhMBJRGCFOk9KAiWlZa7nm1trT64tfkh+wefF878855znP+c55GYZhsB4sK4AyvwDCbCkUOzUQSbchT6mCWL4Dm7fkQq7YhVRxq+BfirOzoKu8BvH2/Sg/U4Oc3UdRdrwSuQfOovhwObTHLlI/QSpClmXp5mBJKR53mtHaZkDbIyMetHegrqEJDU0tqNc34159I1lboG++j4cGI0EHxYq/Wq1OJBAIwNAPOUgkErjeerC0/BtzX75hdv4rnO4heEb98Iz4MOT1/Vs/E3t8YRHLf4AnXd38kjmV+woLCekwCfTTwNFAkO4HBh2wOVwY9gXgJXB7RohtDD19FigUijV1yf+QI629eQvff/5CeCaCmVgcU9MRWKx2vCGkHyMxTEdn8eFTFIs/lnC+qprGCIVCflO4DCKRCK3tBgTHJ6nKFSKLjRASWO1Oejf+Pozbd+6uV8bvMqfyiE6HaHyeKvQHQ7A73RT+dyHE5hYQmgxDq93zX0zaseEcLl2+QpW87O0j6hzotw6i97UFoYkpnDpdkY6MT8iVIJPJaZmJJnhpswJjEzCazOlKTT/YXOaiomLYXW6YzE/Rae6mCpVK5cYJk0mv197Ai55X6B+wofpCTaZSMxOuDbwUXc+eo65RD6k0h7xjDXkNWRsnTFZSUnoIKpUKJyrO4eRVEwSy/IRP6rKZTNm490n3Gm0B8vaWQbhp66qdT/gXoa0K8Qf8d3IAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='funnel 이미지' title='' src='/static/a9e9547c2f9b3058548fab5dece6a1de/ca1dc/funnel.png' srcset='/static/a9e9547c2f9b3058548fab5dece6a1de/e7570/funnel.png 170w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/f46e7/funnel.png 340w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/ca1dc/funnel.png 680w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/02d09/funnel.png 1020w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/9d567/funnel.png 1360w,\n/static/a9e9547c2f9b3058548fab5dece6a1de/e2f49/funnel.png 1366w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>funnel 이미지</figcaption>\n  </figure></p>\n<p>그러면 이러한 Funnel 형태로 구성되는 디자인을 알아보자.</p>\n<h3>디자인 요구사항 탐방</h3>\n<p>발표 자료는 휴대폰 가입에 대한 예제로, 각 스텝별로 가입방식, 주민번호, 집주소를 입력한 후에 제출하는 방식을 취하고 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/a5a679839627226da03f15b9ae502e2a/2ac49/design.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 44.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42p2Q0WuSYRTGP0VBQlrmHEWGoGaJIrQ2XQjBAvvUUEsqJ0ISc42o/hWZgoY4ocUUvdttf0HdBi2iLsZYdFMURNPva+ovv3dzCXXVAw/ve57DeXjOkRwOB7IsEw6HCYVCRCIRfD4fkiRhMBjQ6/XodDrxjqnVWv+f+mShvSaTCaPRKAb+i16vl3K5TLFYFLTZbORyOarVKpVKhXw+j9VqZW2tRKlUotFoEAgExLA2W6/XaayvU6vV0LaV4vE4Y6iqisfjodlsHmutVguXy8UkUqmUMNROpWEw1DgkGAwixWKxQ7E/oNfr/WWo/TXDfr8vqCGdTgvDZDKB0vvF9tsdlFEYYTiZUFEU/H4/7Xb7WOt0OmK14SjBGNlsllMWC5lMRujd/S6DweDQMBqNHiVUR40fuN1umpsv/iTc3MDpdDLsK4JwwJ17S0zbL5BI3YYjbXjQY35+DunaoszLNypbr7+z9eorTpeb0rMN9r7BzhcoVZ8Lww+furzb3efjZ5XErbsYTkwhx5O83+uyvav1fjJ7ZWRot5+nsPqU/PIj7j9YxTJ1kouz11m4+YRQ7DGXLi9iNpu5GlshFC2wEHvIzFmHuOHMmXME5RXmIgWCN5axnJ7mN4iYpJ38++BPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='디자인 요구사항' title='' src='/static/a5a679839627226da03f15b9ae502e2a/ca1dc/design.png' srcset='/static/a5a679839627226da03f15b9ae502e2a/e7570/design.png 170w,\n/static/a5a679839627226da03f15b9ae502e2a/f46e7/design.png 340w,\n/static/a5a679839627226da03f15b9ae502e2a/ca1dc/design.png 680w,\n/static/a5a679839627226da03f15b9ae502e2a/02d09/design.png 1020w,\n/static/a5a679839627226da03f15b9ae502e2a/9d567/design.png 1360w,\n/static/a5a679839627226da03f15b9ae502e2a/2ac49/design.png 2336w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>디자인 요구사항</figcaption>\n  </figure></p>\n<p>이를 해결하는 방법, useFunnel을 사용하기 전 후로 나눠서 살펴보자.</p>\n<h3>useFunnel 전 해결 방법과 예제</h3>\n<p>useFunnel을 사용하기 전에는 전역상태를 사용하여 데이터를 관리하고, 각 스텝을 페이지로 별로 관리하고, 제출 API를 호출할 때 모아온 데이터를 담아 발송하는 방식으로 구현할 수 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/6b7bd0d534320fef51131382f6327d22/d68dd/globalstate.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 42.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB40lEQVR42jWSWW/aQBSFeWnTFkKAAgKDbWw2L9gsxmanbIECTRoFEbWJUpRWVd/6/9++Dq7yMJrRN1fnHN17I2/eXqCUzfDk1RqJtMTF+xilio2sGyGLJzN8iF2FrFCqkZNrROMpYvEkes2hqNXIK1Wil0kil6L4+v4Xq7sXJjcnLH9BOq+yOf5mcXdiKljFGSEphmB/GO8eGe1PqPU2atXl5ukvi68vTG9/olSbRGJXKdTWFMWZUW1co5kT4RigW8vwaO4MqeWSdero3TG2v8LubcgqdYplm97mEW9+YLh9Qq44ImEiHQJvdo+/eMBoz0lLungf8T4Jtnyg0hyQ0QyM8Rp7sKAzWVMQYrJINNo9EyyPjLbPr4IZBpvvDNbfwk87WPExp4SO/ZD9wPSEieagNEXyVpd2f4BUtlDNblh3Fhy+Cp6b6w63NIafaU93ol99MZgCzfFepNkItqdkdoSJSr09o+wOqXszsnKVgm4TrI50prfhXdCs/4L1zgSl5dMMupQti1gqj+FNkZseTi9A0muksgqmP6fU8fHHfTF9jZxqiHQH2pMvojUHJM0k8k6siCai66aPbvfCouh5HSwfzRAGdp9socx5G3Q7oGR46I2+MJBJZCQq7gDN6or7zIr8A40R9f5d/AFRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='전역상태를 이용한 해결방법' title='' src='/static/6b7bd0d534320fef51131382f6327d22/ca1dc/globalstate.png' srcset='/static/6b7bd0d534320fef51131382f6327d22/e7570/globalstate.png 170w,\n/static/6b7bd0d534320fef51131382f6327d22/f46e7/globalstate.png 340w,\n/static/6b7bd0d534320fef51131382f6327d22/ca1dc/globalstate.png 680w,\n/static/6b7bd0d534320fef51131382f6327d22/02d09/globalstate.png 1020w,\n/static/6b7bd0d534320fef51131382f6327d22/9d567/globalstate.png 1360w,\n/static/6b7bd0d534320fef51131382f6327d22/d68dd/globalstate.png 2094w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>전역상태를 이용한 해결방법</figcaption>\n  </figure></p>\n<p>발표보다 조금 더 간단히 이동 버튼을 누르면 전역 상태를 업데이트 하고 마지막 집 주소 스텝에서는 alert를 보여주고 제출 완료 화면에서 작성된 내용을 출력하는 예제를 작성해 보았다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 259px; '>\n      <a class='gatsby-resp-image-link' href='/static/d0b81ce44de2280ace3eb539bdb495bc/8b5e5/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 78.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8klEQVR42pWUW4+bMBCF91c13QQMtrkTbg4GHAhJk92oW7UPK7W//3SgFymqlNCHIyPbHOabo+Fpw7fgYYWwMBjffqCoR5T6iCDVeHYSWDyFJbaL9WQ7DhhJBgHqroeqNcpKIYxiOJzTmTtrurdEZMhhMZdelnDoebx+QX+6oO8HjMczDuMZea6w3kwv8Id6utlwBTa2AxHEKPZHuIGESHxqiQSPJJj7n4aMDG3mwIpz8PM3uKmApzzwlIwzCZu7M81Dw+mSK314fojT568YjhfUSsGYHnsz0DpA6xan8wWl2s0Uy5BJwo8QJhkUBRRlJcKs+i2FIEog6MP3qvxrOF2yaF2vN1gHKfjLO1hcEfIIh1ZZdITs3a3uFll4kIQ8vr6hPXxCmldo2hadMWi7Di4F8sjspsIpkElRmmNLZrppkZU75ErPqwxTOqeklxr+QV59WOHZT+Bdv8NJdhCEzGJFyAZrRi2xGN0Xy5CFF2C4XNEMJ+SNoURr6HZCNnO6pj8gTrNloUy407SkhFftNBoawW1eIi8q5KWinha0X89JLzL8JYGPqxU2hOxf32HHDLyiWY5pekpJyIyQnaWTImBRinFJIbQDEr1HoSoUO6quyMG4mHWvf/9WaDOw/Sui4QWm0ej2B1TUx4LaYNnuop/DTyY8QokJdBe2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='예제 폴더 구조' title='' src='/static/d0b81ce44de2280ace3eb539bdb495bc/8b5e5/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png' srcset='/static/d0b81ce44de2280ace3eb539bdb495bc/e7570/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png 170w,\n/static/d0b81ce44de2280ace3eb539bdb495bc/8b5e5/%EC%A0%84_%EC%98%88%EC%A0%9C_%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0.png 259w' sizes='(max-width: 259px) 100vw, 259px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>예제 폴더 구조</figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">PhoneNumberPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> setForm<span class=\"token operator\">=</span><span class=\"token function\">useFormStore</span><span class=\"token punctuation\">(</span>state<span class=\"token operator\">=></span>state<span class=\"token punctuation\">.</span>setForm<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> router<span class=\"token operator\">=</span><span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>phoneNumber<span class=\"token operator\">:</span><span class=\"token string\">'010-1234-5678'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/form/citizenNumber'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">휴대전화 입력</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">주민번호 입력 스텝으로 이동</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">CitizenNumberPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> setForm<span class=\"token operator\">=</span><span class=\"token function\">useFormStore</span><span class=\"token punctuation\">(</span>state<span class=\"token operator\">=></span>state<span class=\"token punctuation\">.</span>setForm<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> phoneNumber<span class=\"token operator\">=</span><span class=\"token function\">useFormStore</span><span class=\"token punctuation\">(</span>state<span class=\"token operator\">=></span>state<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> router<span class=\"token operator\">=</span><span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>citizenNumber<span class=\"token operator\">:</span><span class=\"token string\">'123456789'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/form/address'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">주민번호 입력</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">입력된 휴대번호: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>phoneNumber<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">주소입력 스텝으로 이동</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// 전역 스토어</span>\n\n<span class=\"token keyword\">const</span> initialForm<span class=\"token operator\">:</span> Form <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    phoneNumber<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    address<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    citizenNumber<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useFormStore <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">create</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>StoreType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>set<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    form<span class=\"token operator\">:</span> initialForm<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">setForm</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>form<span class=\"token operator\">:</span>Partial<span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>state<span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">{</span>\n            <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n            form<span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n                <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">,</span>\n                <span class=\"token operator\">...</span>form\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">resetForm</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> form<span class=\"token operator\">:</span> initialForm <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<img src='/static/적용전_실행-d3e0bc163ebf7cda03e8700ac2c5c43f.gif' width='400'>\n<p>요구사항을 모두 충족하면서 정석적인 방법이지만, 두가지 유지보수의 어려움이 존재하게 된다.</p>\n<ol>\n<li>스텝별로 어떤 데이터/ 어떤 스텝으로 이동하는지 <strong>페이지를 들어가야 알 수 있다</strong></li>\n<li>상태를 수집하는 곳과 사용하는 곳이 달라 <strong>수정할 때 전체 흐름을 추적해야한다</strong></li>\n</ol>\n<p>위 두가지 문제를 어떻게 해결한 useFunnel 훅에 대해 알아보자.</p>\n<h3>useFunnel을 이용한 해결 방법</h3>\n<p>위 문제를 해결하기 위해서 우선 여러개의 페이지로 구성된 스텝을 <strong>하나의 페이지</strong>에서 관리하고 각 스텝들은 조건부 렌더링을 이용해 하위 컴포넌트로 변경해 <strong>스텝별 UI 흐름을 한눈에 추적하기 쉽게</strong> 개선할 수 있다.</p>\n<p>그리고 기존 전역상태로 관리하던 폼 데이터는 지역상태로 둠으로써 스텝과 데이터가 한곳에서 관리하게 되고, 사용하는 곳과 업데이트 하는 곳 모두 하나의 파일내 작성해 <strong>응집도를 높이는 이점</strong>을 가질 수 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/76723b2c9ea4762e12348ff63405b2f5/9aa73/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACXUlEQVR42oWSW3LaUBBEWULiWA8QeoPQGyEJEGCBwYBjO/FPquJU9r+PkxGOy85XPk7dkRB9p6enp49L9OyGfrJhkLRydqwxki1GtMOIt2iCmqxQ8iVKukb1ZqhOhuJM5cwvKHaO7mX0dPmwf/yJNf+BX74wrn7j1i9Yi+9Y+69Ymydmh3uCQ0v01BCdt4RVhZ9mpFXKeFowygvyOqE/momgl9Of1Oj+DN1JhRzNLtDcGHUUovgxw1GM4aWYXoIpz2aQYQRTrEnGUM63WvenIuhKUewx5g/0PfnRz3CDSOocw53iyCWmnzIQtFGJ5hViL5NLEyFFtRJUqVW3s5y/dqiJqLs4YmwfMW/2pOcNZvuEu3wiqe5I1mK3PTNqnxnLCOzmEUPe94tbrPrAMG+5NPYm2NlUygXXJxHaboj2K5zmgJptucpa1HTHUP5spg1WtsYudvTzHVp6w3DaSoCrj4LSvl9g5ZJ0MBe7KeUsYDCWuTgFkdgZjQPscYTiimWZpxqNscKQMJ7IsyTulxexD5ZzJqt7rPUz7mZNeahx1yfqxZZVM6dsl3jbZ7SlUJ9QmyP9ei92b9EnCwmjeBfUOkE7Rq+P6KdfmPsdxWlFItaDVYPbrNGrPc7iLCIntPKIVj2gzL9xPX9ECyo0J7nk0NFTnS6hjEEsc5gsGUrKYRLIGGRhrRxHUrRssdslaYbyTmyaHcEFVZq5aPylp3Yfyw4OZ3fowUJmlxBkE9nNqYgXxLJ7vuyg2s3KTt5x3ur4H3qK9Xr7F7n1umMY8tkIX2vhk3R1JShSK1b4X/4A1iVght83m8sAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='useFunnel을 이용한 해결 방법' title='' src='/static/76723b2c9ea4762e12348ff63405b2f5/ca1dc/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png' srcset='/static/76723b2c9ea4762e12348ff63405b2f5/e7570/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 170w,\n/static/76723b2c9ea4762e12348ff63405b2f5/f46e7/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 340w,\n/static/76723b2c9ea4762e12348ff63405b2f5/ca1dc/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 680w,\n/static/76723b2c9ea4762e12348ff63405b2f5/02d09/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 1020w,\n/static/76723b2c9ea4762e12348ff63405b2f5/9d567/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 1360w,\n/static/76723b2c9ea4762e12348ff63405b2f5/9aa73/useFunnel-%EC%9D%B4%EC%9A%A9%EB%B0%A9%EC%8B%9D.png 1912w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>useFunnel을 이용한 해결 방법</figcaption>\n  </figure></p>\n<p>그러면 이에 맞게 이전 예제를 리팩토링해보자.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 381px; '>\n      <a class='gatsby-resp-image-link' href='/static/7a4976675b9a882234a0b05f3152478f/7a1fe/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 85.88235294117648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVR42p2T2W7aQBSGeYpWvehNS+9amlRqUMGezeNlBtvgZeIYCND3f4i/xwaiWlUVnItPluw5n+dsEyElEmPRPh+QpimEFBBCQCqF7ttYJj6XYELBZgUedyTNN+BSw2MCPlfovo+hF3bBnXS1Luimp16qwggLj2Hp8/HCHpLGNkWzP6GuHKq6QUq3NvSOvUlIcBkgtDmydg9bWiJFvDJvvOEFnZcwzR5xliDJLKS+1nOksAuSQQjnKN1LyptNhdiko+o4EKogwn57Qlk7lFWNTVlB6RBLao7PxfimiDBB2v7GunSweYGscJCRpfcGjEbpFumLcEFpKRGgrVqIzEGlDsIWUCYn1uAq6n96s1BR/SJqSNgcYdY1TNHQGOXwKF2PsZtkA6GODNz2gMo9oXaPyDclVtm63xaPjRgbLmj+CEb10VGM+mmHgpqio5AOcIhup1U3o+dznF+e/2Hy/ZfAGYnZ3McdS7BwBzzEEnOjMU8Iq/EzDvDDl7hfStwtrjH/Mnk/YzjD8e6rh49zg1n+jE8ex5SaNKWUp7TnX3oCfGYKH+7p7Ldr3JDBpnjUaR6vEG+PEImETDV1m8g05EqDaYXlK/WcdIv/wkUY7o5QViLIQgQk7NA5QWJlg76eg7i/+ANXdFgCht70xwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='적용 후 프로젝트 구조 ' title='' src='/static/7a4976675b9a882234a0b05f3152478f/7a1fe/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png' srcset='/static/7a4976675b9a882234a0b05f3152478f/e7570/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png 170w,\n/static/7a4976675b9a882234a0b05f3152478f/f46e7/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png 340w,\n/static/7a4976675b9a882234a0b05f3152478f/7a1fe/%EC%A0%81%EC%9A%A9%ED%9B%84_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B5%AC%EC%A1%B0.png 381w' sizes='(max-width: 381px) 100vw, 381px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>적용 후 프로젝트 구조 </figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Form</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    phoneNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    address<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    citizenNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> initialForm<span class=\"token operator\">:</span> Form <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    phoneNumber<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    address<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    citizenNumber<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token string\">'주민번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'주소'</span><span class=\"token operator\">|</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'제출완료'</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'핸드폰번호'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span> <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'phoneNumber'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> phoneNumber<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'주민번호'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'주민번호'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span> <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'citizenNumber'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> citizenNumber<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'주소'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'주소'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span>AddressStep phoneNumber<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span> citizenNumber<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span> onNext<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">try</span><span class=\"token punctuation\">{</span>\n                            <span class=\"token comment\">// 제출 로직</span>\n                            <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                                <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                            <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> address<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\n                </span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'제출완료'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 주민번호 스텝 컴포넌트</span>\n<span class=\"token string\">'use client'</span>\n\n<span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/app/page.module.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Form<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/app/registerForm/page\"</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CitizenNumberPageProps</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n    phoneNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'phoneNumber'</span><span class=\"token punctuation\">]</span>\n    onNext<span class=\"token operator\">:</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'citizenNumber'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">CitizenNumberStep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>phoneNumber<span class=\"token punctuation\">,</span>onNext<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span>CitizenNumberPageProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">onNext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'123456789'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">주민번호 입력</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">입력된 휴대번호: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>phoneNumber<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">주소입력 스텝으로 이동</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 리팩토링한 예제 코드를 통해 보면 발표처럼 여러 페이지가 아니라 하나의 페이지로, 전역상태로 폼 데이터를 관리하는 것이 아니라 지역상태로 관리하고, 각 스텝별로 조건부 렌더링을 통해 UI를 관리하는 것을 확인할 수 있다.</p>\n<img src='/static/적용후_실행-6882830cf62bd2f548ca6853a374eebc.gif' width='400'>\n<p>동작도 기존과 동일하게 작동하며, 새로운 스텝이 생겨도 조건부 렌더링 조건을 추가하면 되고, 제출을 다른 스텝에서 진행해야 하더라도 prop만 변경하면 되어, <strong>코드의 가독성과 유지보수성</strong>이 향상되었다.</p>\n<h2>useFunnel 라이브러리 따라 만들어가기</h2>\n<p>그러면 이제 useFunnel 라이브러리를 따라 만들어가보자. 발표에서 순차적으로 추상화 과정이 잘 설명되어있어서 그대로 순차적으로 만들어가보려 한다.</p>\n<h3>1. 조건부 렌더링 추상화</h3>\n<p>먼저 조건부 렌더링 부분을 Step이라는 컴포넌트로 추상화할 수 있다. 조건이 맞을 때에만 보여줄 수 있게 하는 컴포넌트로 발표에서는 if라는 property로,\n예제에서는 show라는 property로 적용해보았다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/4955b3420970f58450b5d5cf08981669/600ec/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0UlEQVR42q2TaW+bQBCGiZP4DHYTcy0QDOYyYO4jbpzWSlop//8XvR0gaevUVqWqHx6xo919Zmd24TiOw3+Gw+DyCtP5EiNiQkz5O0z4W8zmt108vBEw5gVMFzS3EDCjb0u7Z7YQMRzPjoXXowmYm8P3K9h+Cm27g518gbzZQw9K5HWEqEjBnApsHUOyciKjcQLNK7EQ9T+FyjqFTZOPQYEsrFA/lNiWJaToCU5RYd3swepX6OkjsjpA2mwp4Q6MmC/VY+GQhJKdwfEbJF4Fw05x70YwvBiKU0BcF5DdkjbXYJTU3MRYbRKay6myEnNBO3XCBLqTQndTSGYCeZVCNklobaGYEcUhlFXUxZKVdLRj1clOCIfUQ8qmZs9QkxfIcQY5j7pyNOqrkX2FWb5ADT9D9uoueU9MwvzMCalkITrAyL+DJXsoxRPU8hUs2EGlUvWg6cptW/C7kJ0VtgtcWhwfSLKHnx8QNN9w79PFtCWbVLoV97wLrTPCq+GYekLPwX+A6FaQCJkWymZI9LKe6ANhJ+aX7ISQNohvQpH6JNn01owQEl3EeSghXQ5/90F4eT2CoPs9mvsL3fsLLkRjg5tP0rGQ4y663+9fuRgMfgp/ADaHSsMqyhF1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='조건부 렌더링 추상화' title='' src='/static/4955b3420970f58450b5d5cf08981669/ca1dc/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png' srcset='/static/4955b3420970f58450b5d5cf08981669/e7570/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 170w,\n/static/4955b3420970f58450b5d5cf08981669/f46e7/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 340w,\n/static/4955b3420970f58450b5d5cf08981669/ca1dc/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 680w,\n/static/4955b3420970f58450b5d5cf08981669/02d09/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 1020w,\n/static/4955b3420970f58450b5d5cf08981669/600ec/%EC%A1%B0%EA%B1%B4%EB%B6%80%EB%A0%8C%EB%8D%94%EB%A7%81_%EC%B6%94%EC%83%81%ED%99%94.png 1126w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>조건부 렌더링 추상화</figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token string\">'주민번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'주소'</span><span class=\"token operator\">|</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'제출완료'</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span> <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'phoneNumber'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> phoneNumber<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'주민번호'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'주민번호'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span> <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'citizenNumber'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> citizenNumber<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'주소'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'주소'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    &lt;AddressStep phoneNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> citizenNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> onNext=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">try</span><span class=\"token punctuation\">{</span>\n                            <span class=\"token comment\">// 제출 로직</span>\n                            <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                                <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                            <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> address<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">/>\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Step</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token operator\">===</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Step 컴포넌트</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Step</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> show<span class=\"token punctuation\">,</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> PropsWithChildren<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> show<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>show<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2. 반복되는 조건문과 Step 상태 추상화</h3>\n<p>step에 조건문을 반복하지 않고, 단순히 어떤 스텝인지만 넘겨주면, 현재 step과 비교하여 조건부 렌더링을 할 수 있게 추상화해보자.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/16aa4f5db6a11c33122f2a0ffe7ab513/c7b1b/step_%EC%B6%94%EC%83%81%ED%99%94.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 52.352941176470594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVR42p2SW2/aUBCE89IWAgkEgu8Ggy/I2Mc22IBJIJc2qiq1///vfF2bKmqUtg99GM3RnrOzs2NffOr2ufVWjL0EzUnQHdXy+Zy1mEhtNA258X1Gs4iRFTKyg5bHwmPL59aJ6PSuuej2Blj5A+b6M378wiL+QpB8w40fcDcH3OIetT0QlgXxKSXabljmBX5aoMoUZ7WT3mes5I7Lq5EI9oeYUYkRVRgLceSlGPOciTjWgxgtSLHDBMtX2HLfcqiwggw3krd+hhGsMQWX16+CG8z9d5z8ETcpmWY7vHyHEcoQGaB7GZpAn0vzQv3i7JWNuRLBQgTHInh10xYay/X+K1V9R/W0JTw+o6ePmNkRWx3IyhXzdC2Ot61oK/Qb3gpKwc6f2Bx/SEYnoqoikNyM5V7WKTDDtawnQ8Nc3hbvxN4K9s8Ojbim2L6Ik5q03uBVJ7TVPbo4t1VNpGIZUKH7hayq3sHwc7pNhp3+AG22wor3BOqI1mQzXTKZxm1dkwzPaM7JufYHNB+z2faiI7+NLplMgpLxQjISocmsafx78z8FP3R6DHWPgeYw1Fzh6X9hqM/42O3zE8NwFf7FPGDEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='반복되는 조건문과 Step 상태 추상화한 인터페이스' title='' src='/static/16aa4f5db6a11c33122f2a0ffe7ab513/ca1dc/step_%EC%B6%94%EC%83%81%ED%99%94.png' srcset='/static/16aa4f5db6a11c33122f2a0ffe7ab513/e7570/step_%EC%B6%94%EC%83%81%ED%99%94.png 170w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/f46e7/step_%EC%B6%94%EC%83%81%ED%99%94.png 340w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/ca1dc/step_%EC%B6%94%EC%83%81%ED%99%94.png 680w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/02d09/step_%EC%B6%94%EC%83%81%ED%99%94.png 1020w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/9d567/step_%EC%B6%94%EC%83%81%ED%99%94.png 1360w,\n/static/16aa4f5db6a11c33122f2a0ffe7ab513/c7b1b/step_%EC%B6%94%EC%83%81%ED%99%94.png 1632w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>반복되는 조건문과 Step 상태 추상화한 인터페이스</figcaption>\n  </figure></p>\n<p>이를 위해서 드디어 오늘 주제인 useFunnel 훅이 나오게 된다. 현재 스텝을 Step 컴포넌트가 알기 위해서는 이를 관리하는 Funnel이라는 컴포넌트로 children으로 전달되는 Step들중 현재와 일치하는 step만 렌더링하게 할 수 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/0f7b56170a933c49f45c76dd3acc566d/0aea6/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 51.764705882352935%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuElEQVR42o2SX3OaQBTFg53JaIwNdIRl+S+SIIooERHRGNqEZtpMp+10mu//TU7vAg99qdOH39xluXv23Lv3QpJ6uNEcKGYA2XAhWyZFBzJzoahOg8za73MouofLwRAXkiRBn21hfnqDtf8G+1DDKb7DyL6AlyX4oYIRFTCmaxhB+k/M2w2uRh9IsNcDm8TQ1yewJAOfH+AkFXh8hB7l0MMM+nQF3V+ehVPOYCQLwXfQ3AX48ggW53CXJe7SBwRJCZucMZ/EJuJQchZOFQxGSutQ82IwsswCitO4ccRvU1qvyX0C5i2gU44QZiJXINbiom6vdUiCvU6Qxw9wtgWc7AQvfUFYfoW/e4G9qjBJH2HGe+p1DnNRwCJMaoeAE8Z8R33eYXCtdCU7M/DVEU7+inj/Bruo4T4+I6t/YXb4Cf/4A+Hzb+ibGn7+hKD4DH9Twb8/wUg/kpEaVlqhf33TlqzaITR6KebHMPwFxYiYU5mi1Ki5UHfnTVStEGNCtWcYEyKKPc2NOkGaw7FDyTQ6xt097LDFi7ZQ6bFU+qe6LdoZRJ/7w07wvWrRcNtN/Bux97+I4b/sD/EH5lwUwHz02OYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='useFunnel' title='' src='/static/0f7b56170a933c49f45c76dd3acc566d/ca1dc/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png' srcset='/static/0f7b56170a933c49f45c76dd3acc566d/e7570/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 170w,\n/static/0f7b56170a933c49f45c76dd3acc566d/f46e7/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 340w,\n/static/0f7b56170a933c49f45c76dd3acc566d/ca1dc/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 680w,\n/static/0f7b56170a933c49f45c76dd3acc566d/02d09/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 1020w,\n/static/0f7b56170a933c49f45c76dd3acc566d/9d567/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 1360w,\n/static/0f7b56170a933c49f45c76dd3acc566d/0aea6/step_%EC%83%81%ED%83%9C%EC%B6%94%EC%83%81%ED%99%94.png 1756w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>useFunnel</figcaption>\n  </figure></p>\n<p>예제 코드에 적용해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>Funnel<span class=\"token punctuation\">,</span>setStep<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span> <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'phoneNumber'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> phoneNumber<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'주민번호'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'주민번호'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span> <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'citizenNumber'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> citizenNumber<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'주소'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'주소'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                &lt;AddressStep phoneNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> citizenNumber=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> onNext=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span>Form<span class=\"token punctuation\">[</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">try</span><span class=\"token punctuation\">{</span>\n                        <span class=\"token comment\">// 제출 로직</span>\n                        <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                            <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>prev<span class=\"token operator\">=></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> address<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">/>\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>form<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// useFunnel 훅 </span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepProps</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n    children<span class=\"token operator\">:</span>React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Step</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span>StepProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelProps</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n    children<span class=\"token operator\">:</span>React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">;</span>\n    step<span class=\"token operator\">:</span><span class=\"token string\">'주민번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'주소'</span><span class=\"token operator\">|</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token string\">'주민번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'주소'</span><span class=\"token operator\">|</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'제출완료'</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FunnelComponent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span>FunnelProps<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> validSteps<span class=\"token operator\">=</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isValidElement<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> targetStep<span class=\"token operator\">=</span>validSteps<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>children<span class=\"token operator\">:</span>React<span class=\"token punctuation\">.</span>ReactElement<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>name<span class=\"token operator\">:</span><span class=\"token string\">'주민번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'주소'</span><span class=\"token operator\">|</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token operator\">|</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>children<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token operator\">===</span>step<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>targetStep<span class=\"token operator\">==</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>step<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 스텝 컴포넌트를 찾지 못했습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> targetStep<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>FunnelComponent<span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>Step<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>발표 자료의 코드는 짧은 시간내의 이해도를 위해 조금 더 간소화 버전을 소개해주셨지만 <a href=\"https://github.com/toss/slash/blob/main/packages/react/use-funnel/src/Funnel.tsx\">useFunnel 오픈 소스</a>를 보면 예제 코드처럼 유효한 children만 필터링하여 현재 step과 일치하는 step만 렌더링하는 방식으로 구현되어있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/6607c0df56dfc1cc58aa59a7c8bbd51f/78873/useFunnel_funnel.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 38.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVR42p1R2U7EMAzs/38k17JaqqRN4txHOzhm4QUkEJZGVqPac3g5rEUnguMeU4Z1HnHf0Sxh2wz0toOI32JECOELKSU4RwJrHVKuOI4DS9UW6rrh4fEJzy8XXF5vMLwk2gyzeyilZGFrFbVWtNpQW+Pv8dH5rZSCMQ6c54kl+Iz1jZXslpddoVaDTTnYkJi1o7ASz4qMsXdFDiFmUOpofaCzK++9qJu1RB7IJQt7zlnYZh9jyA9MKvhrLWfkPDifaSuXKmzeE3KsCJQwCSeIFbvYRVmISTL9cWGixgchaK3ZGtvjAcdH2vgwxgXclIU2Hqt2UJxpqV3sfTr4trBTQPRJFkxQLDjY4xya6Bz2OE4JfcycfvG/nMw0rzMZBfdw/1vvJRpvo3gp8KQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='실제 Funnel 컴포넌트' title='' src='/static/6607c0df56dfc1cc58aa59a7c8bbd51f/ca1dc/useFunnel_funnel.png' srcset='/static/6607c0df56dfc1cc58aa59a7c8bbd51f/e7570/useFunnel_funnel.png 170w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/f46e7/useFunnel_funnel.png 340w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/ca1dc/useFunnel_funnel.png 680w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/02d09/useFunnel_funnel.png 1020w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/9d567/useFunnel_funnel.png 1360w,\n/static/6607c0df56dfc1cc58aa59a7c8bbd51f/78873/useFunnel_funnel.png 1520w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>실제 Funnel 컴포넌트</figcaption>\n  </figure></p>\n<p>여기서 또한 볼 수 있는 것은 외부에 노출할 필요가 없는 Step 컴포넌트를 useFunnel 내부에 숨기고, 외부에 노출할 Funnel 컴포넌트만 노출하는 <strong>Compound 패턴</strong>으로 컴포넌트 간 관계를 잘 보여주고 있다.</p>\n<h3>3. Steps 타입 추상화</h3>\n<p>발표내용에는 없지만 예제 코드에 구현한 훅은 현재 타입이 내부에서 하드코딩되어있어, 이를 추상화하여 외부에서 타입을 지정할 수 있게 만들어보려 한다.\n이 작업은 오픈소스 코드에서 어떻게 타입을 관리하고 있는지를 참고해 구현해보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>Funnel<span class=\"token punctuation\">,</span>setStep<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        steps<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">'핸드폰번호'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'주민번호'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'주소'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'제출완료'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// useFunnel 훅</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">readonly</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepsType</span> <span class=\"token operator\">=</span> NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    children<span class=\"token operator\">:</span> ReactNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Step</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    children<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span><span class=\"token punctuation\">;</span>\n    steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">;</span>\n    step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Funnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">,</span> step<span class=\"token punctuation\">,</span> steps<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> validSteps <span class=\"token operator\">=</span> Children<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isValidElement<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> steps<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>props <span class=\"token keyword\">as</span> Partial<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">??</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> targetStep <span class=\"token operator\">=</span> validSteps<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> children<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> step\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetStep <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>step<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 스텝 컴포넌트를 찾지 못했습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> targetStep<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Omit<span class=\"token operator\">&lt;</span>\n    FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"steps\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"step\"</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelComponent<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n    props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">Step</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n            Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                            <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span>\n        <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 useFunnel 오픈소스 코드를 거의 그대로 가져온 코드로 추상화된 훅을 사용하면서 외부에서 타입을 지정할 수 있게 만들어보았다.\n각 코드들을 조금씩 뜯어보면서 왜 각각이 필요한지 정리해보자.</p>\n<ul>\n<li>StepsType</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">readonly</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">StepsType</span> <span class=\"token operator\">=</span> NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>StepsType은 빈배열이 아님을 타입적으로 보장하고, 전달하는 스텝 배열에 따라 <code class=\"language-text\">리터럴</code>로 타입을 좁혀주기 위해, <strong>readonly</strong>로 되어 있다.\nGeneric으로 받은 Steps 타입은 StepProps와 FunnelProps에서 사용되어, 각각의 컴포넌트에서 사용할 수 있게 되었다.</p>\n<ul>\n<li>StepProps</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">StepProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    children<span class=\"token operator\">:</span> ReactNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Step</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>StepProps는 Step 컴포넌트에서 사용할 타입을 정의한 것으로, name은 <strong>전달된 Steps 배열의 요소중 하나</strong>로 타입을 좁힌다.</p>\n<ul>\n<li>FunnelProps</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    children<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span><span class=\"token punctuation\">;</span>\n    steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">;</span>\n    step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">Funnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">,</span> step<span class=\"token punctuation\">,</span> steps<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> validSteps <span class=\"token operator\">=</span> Children<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isValidElement<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> steps<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>props <span class=\"token keyword\">as</span> Partial<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">??</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactElement<span class=\"token operator\">&lt;</span>StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">>>></span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> targetStep <span class=\"token operator\">=</span> validSteps<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> children<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> step\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetStep <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>step<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 스텝 컴포넌트를 찾지 못했습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> targetStep<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>FunnelProps는 Funnel 컴포넌트의 Prop을 지정한 부분이고 Funnel 내부에 유효한 children으로 필터링하는 과정에서 타입 단언으로 작성되어 있다.\n타입 단언으로 작성된 이유가 뭘까하고 제거해보았을 때, 아래 <code class=\"language-text\">children.props.name</code>에서 <code class=\"language-text\">name</code>이 정의되어 있지 않다는 에러가 발생하기 때문에 타입 단언을 사용한 것으로 보인다.</p>\n<ul>\n<li>FunnelComponent</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Omit<span class=\"token operator\">&lt;</span>\n    FunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"steps\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"step\"</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FunnelComponent<span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n    props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">Step</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> StepProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactElement<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>step<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>steps<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n            Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                            <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span>\n        <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>RouteFunnel은 Funnel 컴포넌트를 분리하는 대신 바로 작성해도 동작에는 문제가 없지만 코드 가독성을 위해 분리시키신 것으로 보였다.\nFunnelComponent 타입 Step 컴포넌트의 타입을 지정해줌으로서 <strong>Step의 name이 전달받은 Steps 배열의 요소중 하나임을 보장</strong>할 수 있게된다.</p>\n<p>해당 타입 없이도 StepsType을 사용하면서 자동으로 좁혀지지 않을까 했지만, 타입 지정전에는 단순 컴포넌트로 암묵적으로 추론되면서 name에 지정된 값이 아닌 다른값을 넣거나, Steps로 빈배열을 넣어도 타입에러가 안나게 된다.</p>\n<table>\n    <tbody><tr>\n        <th>타입 지정 전</th>\n        <th>타입 지정 후</th>\n    </tr>\n    <tr>\n        <td>\n            <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 589px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/e5ea89efc96c0620a136fae8a77b5d57/49bab/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 15.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVR42h2PwW6DMABDua8tkKYEggIUSMLIKHRb0aZpp/3/N71FPVi2ZEtPTvrXB8HfGZuNadi5qAEZJWQTs0EWBhVdnBuk7FClodYtZ9XFrqMo++c2EzWp0CRpVuEaSxgW7HVnfdv4+Xrwvt74/giMdmELC7fll8/7H34cmP2Ibie08bTXgKx60lw/lbwcZKQY9s0x2R7vLK6bMf3MtHpscKjWRXpNLkqOqeJwUhxPF7KsIMtVdBUfaISo+AfHzVF5Duip4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='FunnelComponent      ' title='' src='/static/e5ea89efc96c0620a136fae8a77b5d57/49bab/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png' srcset='/static/e5ea89efc96c0620a136fae8a77b5d57/e7570/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png 170w,\n/static/e5ea89efc96c0620a136fae8a77b5d57/f46e7/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png 340w,\n/static/e5ea89efc96c0620a136fae8a77b5d57/49bab/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%EC%A0%84.png 589w' sizes='(max-width: 589px) 100vw, 589px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n        </td>\n        <td>\n            <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 655px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/1d0adfe028a8fe349365b382d4df9919/2728a/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4UlEQVR42jWPWW6EQAxEuUCGpYEhNEuAHqZZmlWaj9z/Xi8GKR+lsi1X2eU9G0f/MqTPkq8gI1IFjyAnjHICpQmiq/5GxZooLlGqujnOhJNCILO0JBSdL7te9VqpSovOBspypLMH83EyzhN1M9P2J4N1LKOVvZ5aO7K84zVLb94UjaG1ljRv5FCBlyQVrhuZ+w99t9Mag113zHth7C3bsrKvm8wdurD8dI6mW1BJjR/m+JLmZkEQabxHqKlqw+854KaBWYza9qAdB6bt+sKK+IokkZXEkwcuszviZSL6f8MLf9RVbCGgCtOeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='FunnelComponent      ' title='' src='/static/1d0adfe028a8fe349365b382d4df9919/2728a/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png' srcset='/static/1d0adfe028a8fe349365b382d4df9919/e7570/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png 170w,\n/static/1d0adfe028a8fe349365b382d4df9919/f46e7/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png 340w,\n/static/1d0adfe028a8fe349365b382d4df9919/2728a/FunnelComponent%ED%83%80%EC%9E%85%EC%A7%80%EC%A0%95_%ED%9B%84.png 655w' sizes='(max-width: 655px) 100vw, 655px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n        </td>\n    </tr>\n</tbody></table>\n<h3>4. 히스토리 관리</h3>\n<p>하나의 페이지로 관리하게 되면서 가독성을 올라가게 되었지만 뒤로가기를 했을 때 스텝별 히스토리가 유지되지 못하게 되었다. </p>\n<p>해당 문제를 해결하기 위해 발표에서 히스토리 관리를 위해, step을 상태가 아니라 QueryParam으로 관리하는 방식으로 해결했다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/f1cc3f408383890aeea9c0eedad7f358/d98b8/history.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 45.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVR42o2S226jMBRFm94vKe00iY2BFGgSCLUxEGiH0FTzNP//SXs2JFWrkaaah6UjC7yO97GPTs8u4Ex93E49oobqTHp8OA8exgP+UJ3pP5jx+w+B0WiEo4urW3j6J1TzC4F9g7fZQr10UPkWXtYgzDaInytEegM/reGtWA94B/ykhow0jo9PKLwcw11VELbFPGvh6heIqoFbsdoacV4iyQ2WRsNd5BDRB5aSfBC5cY7ZPN0Lz68oXJYQZUcJpdU7/GyHsPgNVb5hUu8wSzrEusPCbPG4LrBig5UxiDKLULdM0lK4/iJ8KniSLWLbISg6RNzoGjao3yF0w8iv0EWLx3IHZVqElIZrgyCxCDgGlTZ/CZcV/EVJsYVgrKEyhlwUQzPFdY8gkmsZ2y/s//8UXt5AMbL73MBLN4jWDTtXjPgKxSYy1JyT+ZZ+htMgwehDKPsZUqJ40nna32DJWTHKshiGLmPzLe4ThfOD8OT0nG9IYnw/w03P3Z5rMr4X/4nEtTMZ3uEfckbz0eeTMrcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='히스토리 관리' title='' src='/static/f1cc3f408383890aeea9c0eedad7f358/ca1dc/history.png' srcset='/static/f1cc3f408383890aeea9c0eedad7f358/e7570/history.png 170w,\n/static/f1cc3f408383890aeea9c0eedad7f358/f46e7/history.png 340w,\n/static/f1cc3f408383890aeea9c0eedad7f358/ca1dc/history.png 680w,\n/static/f1cc3f408383890aeea9c0eedad7f358/02d09/history.png 1020w,\n/static/f1cc3f408383890aeea9c0eedad7f358/9d567/history.png 1360w,\n/static/f1cc3f408383890aeea9c0eedad7f358/d98b8/history.png 1588w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>히스토리 관리</figcaption>\n  </figure></p>\n<p>위 방법과 같이 예제코드에 적용해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// QS</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">createQueryString</span><span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> queryString <span class=\"token operator\">=</span> <span class=\"token function\">createSearchParamString</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>queryString <span class=\"token operator\">===</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">?</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>queryString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createSearchParamString</span><span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLSearchParams</span><span class=\"token punctuation\">(</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"%20\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">QS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    create<span class=\"token operator\">:</span> createQueryString<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// useFunnel 훅</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">SetStepOptions</span> <span class=\"token punctuation\">{</span>\n    stepChangeType<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token string\">\"push\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"replace\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">STEP_QUERY_KEY</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"funnel-step\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n    steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">,</span>\n    initialStep<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> setStep <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> setStepOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> SetStepOptions<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">QS</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token punctuation\">[</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> step<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>setStepOptions<span class=\"token operator\">?.</span>stepChangeType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">case</span> <span class=\"token string\">\"replace\"</span><span class=\"token operator\">:</span>\n                    router<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">case</span> <span class=\"token string\">\"push\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                    router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>router<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n            Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> step <span class=\"token operator\">=</span> <span class=\"token function\">useQueryParam</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> initialStep<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                            <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>Step<span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> setStep<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>QueryParam으로 Step을 관리하게 되면서 더이상 step 지역상태는 불필요하게 되었고, setStep의 옵션으로 push와 replace에 따라 히스토리를 관리할 수 있게 되었다.</p>\n<table>\n    <tbody><tr>\n        <th>히스토리 관리 전 뒤로가기</th>\n        <th>히스토리 관리 후 뒤로가기</th>\n    </tr>\n    <tr>\n        <td>\n            <img width='655' src='/static/히스토리관리_전-e88ad3891bcf87daf5248f9cfd2a2739.gif'>\n        </td>\n        <td>\n            <img width='655' src='/static/히스토리관리_후-ff98dc2a0acd2b11a1101cedca42e98a.gif'>\n        </td>\n    </tr>\n</tbody></table>\n<h3>5. 폼 데이터 관리</h3>\n<p>발표는 히스토리 관리까지를 라이브러리 작업에 대한 소개로 마무리했지만, 오픈 소스 코드를 보면 폼 데이터 관리에 대한 부분도 있어서 추가해보았다.</p>\n<p>코드 중에는 데이터 스토리지를 이용해 이전 작성한 값들을 저장하고 불러오는 로직도 있었지만, 현재 예제에서는 생략하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Form</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  phoneNumber<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  address<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  citizenNumber<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FormPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>Funnel<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFunnel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">WithState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Form<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"핸드폰번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PhoneNumberStep</span></span>\n              <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>phoneNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"phoneNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                  <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n                  step<span class=\"token operator\">:</span> <span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">,</span>\n                  phoneNumber<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"주민번호\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CitizenNumberStep</span></span>\n              <span class=\"token attr-name\">phoneNumber</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span></span>\n              <span class=\"token attr-name\">onNext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>citizenNumber<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"citizenNumber\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                  <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n                  step<span class=\"token operator\">:</span> <span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">,</span>\n                  citizenNumber<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"주소\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            &lt;AddressStep\n              phoneNumber=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n              citizenNumber=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>citizenNumber<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n              onNext=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>address<span class=\"token operator\">:</span> Form<span class=\"token punctuation\">[</span><span class=\"token string\">\"address\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token comment\">// 제출 로직</span>\n                  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n                    step<span class=\"token operator\">:</span> <span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">,</span>\n                    address<span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제출 실패: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            />\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Funnel.Step</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"제출완료\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompleteStep</span></span> <span class=\"token attr-name\">form</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel.Step</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// useFunnel 훅</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useFunnel</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Steps <span class=\"token keyword\">extends</span> StepsType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n    steps<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">,</span>\n    initialStep<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> _initialStep <span class=\"token operator\">=</span> initialStep <span class=\"token operator\">??</span> steps<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> setStep <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> setStepOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> SetStepOptions<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">QS</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token punctuation\">[</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> step<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>setStepOptions<span class=\"token operator\">?.</span>stepChangeType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">case</span> <span class=\"token string\">\"replace\"</span><span class=\"token operator\">:</span>\n                    router<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">case</span> <span class=\"token string\">\"push\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                    router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>router<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> FunnelComponent<span class=\"token operator\">:</span> FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n            Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">function</span> <span class=\"token function\">RouteFunnel</span><span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> RouteFunnelProps<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> step <span class=\"token operator\">=</span> <span class=\"token function\">useQueryParam</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STEP_QUERY_KEY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> _initialStep<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token operator\">&lt;</span>Funnel<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span> steps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>steps<span class=\"token punctuation\">}</span> step<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>step<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                            <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Funnel</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span> Step <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span>\n        <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token constant\">S</span></span> <span class=\"token operator\">=</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">type</span> <span class=\"token class-name\">Step</span> <span class=\"token operator\">=</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">type</span> <span class=\"token class-name\">NextState</span> <span class=\"token operator\">=</span> <span class=\"token constant\">S</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Step <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> nextPendingStepRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Step <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> nextStateRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Partial<span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> WithState <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">State</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">S</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(initialState: State) => </span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> _setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> setState <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span>\n                next<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>NextState<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>next<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>NextState<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> NextState<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">let</span> nextStepValue<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>NextState<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> next <span class=\"token operator\">===</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    nextStepValue <span class=\"token operator\">=</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    nextStepValue <span class=\"token operator\">=</span> next<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nextStepValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextStepValue<span class=\"token punctuation\">.</span>step <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    nextPendingStepRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> nextStepValue<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                nextStateRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> nextStepValue<span class=\"token punctuation\">;</span>\n\n                <span class=\"token function\">_setState</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">[</span>_setState<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextPendingStepRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">deepEqual</span><span class=\"token punctuation\">(</span>nextStateRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setStep</span><span class=\"token punctuation\">(</span>nextPendingStepRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                nextPendingStepRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>FunnelComponent<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\n    return Object.assign([FunnelComponent, setStep] as const, </span><span class=\"token punctuation\">{</span>\n        WithState<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token plain-text\">) as readonly [\n        FunnelComponent&lt;Steps>,\n        (step: Steps[number], options?: SetStepOptions) => void\n    ] &amp; </span><span class=\"token punctuation\">{</span>\n        WithState<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>StateExcludeStep <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n            initialState<span class=\"token operator\">:</span> StateExcludeStep\n        <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n            FunnelComponent<span class=\"token operator\">&lt;</span>Steps<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n            StateExcludeStep<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">(</span>\n                next<span class=\"token operator\">:</span>\n                    <span class=\"token operator\">|</span> Partial<span class=\"token operator\">&lt;</span>StateExcludeStep <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                    <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n                    next<span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>StateExcludeStep <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> StateExcludeStep <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> Steps<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n}</span></code></pre></div>\n<p>setState로 폼 데이터를 업데이트시킨 후에 다음 step으로 이동시키기 위해 nextPendingStepRef와 nextStateRef와 useEffect를 사용한 것으로 보인다.\n마지막 타입 단언을 하지 않았을 때 state의 타입이 주입한 타입이 아니라 <code class=\"language-text\">Record&lt;string, unknown></code>로 추론되기 때문에 타입 단언을 사용한 것으로 보인다.</p>\n<p>이렇게 step과 폼 데이터를 함께 관리하게 되면서, 보다 응집도를 높인 훅을 완성할 수 있었다.</p>\n<h2>마치며</h2>\n<p>useFunnel이란 훅을 너무 좋은 방법이다 생각하다 드디어 직접 분석해보았다.\n요구사항들과 해결방법을 코드와 함께 히스토리를 분석해보는 과정에서 더 깊이 있게 공부할 수 있게 되었고, 앞으로도 틈틈히 오픈소스를 분석해보며 더 많은 것을 배워나가야겠다.</p>","frontmatter":{"title":"📚 useFunnel 분석하고 따라 만들어 보기","date":"September 17, 2024","tags":["slash","FE Accelerator","useFunnel"],"series":null},"fields":{"slug":"/2024-09-17-useFunnel-분석해보기/","readingTime":{"minutes":24.91}}},"seriesList":{"edges":[{"node":{"id":"db12bfaf-9b68-5456-b2d3-bf7af6db01f6","fields":{"slug":"/2022-09-06-BEM과-자료형/"},"frontmatter":{"title":"BEM과 자바스크립트의 자료형"}}},{"node":{"id":"11c1a396-7281-552a-9589-6f14d399473b","fields":{"slug":"/2022-09-07-자바스크립트의-타입과연산자/"},"frontmatter":{"title":"자바스크립트의 타입과 연산자"}}},{"node":{"id":"1b75d916-f93f-54a4-bcb0-ee6a88e1e807","fields":{"slug":"/2022-09-07-자바스트립트의-두가지-복사방법/"},"frontmatter":{"title":"자바스크립트의 두가지 복사 방법"}}},{"node":{"id":"3b564afa-9e11-5817-9130-4e2a191f4dff","fields":{"slug":"/2022-09-10-intersection-observer /"},"frontmatter":{"title":"Intersection observer"}}},{"node":{"id":"ac0c72d8-87ec-5038-8d94-316c5fcc3d62","fields":{"slug":"/2022-09-12-브라우저API/"},"frontmatter":{"title":"Browser API"}}},{"node":{"id":"362a634b-e650-5526-851e-d5fbd908dab8","fields":{"slug":"/2022-09-13-함수/"},"frontmatter":{"title":"함수"}}},{"node":{"id":"fa488a20-ff1a-5d21-a871-7cd7a1943bb7","fields":{"slug":"/2022-09-14-객체/"},"frontmatter":{"title":"객체"}}},{"node":{"id":"93e28849-ee68-5f54-a013-82287b705626","fields":{"slug":"/2022-09-17-빌트인객체/"},"frontmatter":{"title":"빌트인 객체"}}},{"node":{"id":"792817ac-87f4-5be2-a7aa-360f10d5c8b4","fields":{"slug":"/2022-09-19-array/"},"frontmatter":{"title":"Array"}}},{"node":{"id":"b9665749-4456-51bc-8980-7b1df634660e","fields":{"slug":"/2022-09-22-iteration/"},"frontmatter":{"title":"Iteration"}}},{"node":{"id":"b36e6692-59b2-579e-a86a-a032da431840","fields":{"slug":"/2022-09-24-Map과Set/"},"frontmatter":{"title":"Map과 Set"}}},{"node":{"id":"483fabc0-6bc7-5db7-9654-84987635add6","fields":{"slug":"/2022-10-06-HTTP란/"},"frontmatter":{"title":"HTTP 정리"}}},{"node":{"id":"197d4909-e862-5b9a-8676-b53e027e5379","fields":{"slug":"/2022-10-18-Node-JS-기초/"},"frontmatter":{"title":"Node js:NodeJS 이용한 서버 만들기"}}},{"node":{"id":"bd10a339-6c06-5837-862e-192c45081282","fields":{"slug":"/2022-10-19-Express-기초/"},"frontmatter":{"title":"NodeJS: express"}}},{"node":{"id":"8195c683-dc7e-58d3-b7b6-c5a1e78b6522","fields":{"slug":"/2022-11-18-CSR과-SSR/"},"frontmatter":{"title":"CSR과 SSR 그리고 Universal Rendering"}}},{"node":{"id":"f05c2eb8-16da-5e6e-a906-bbdffa05ace6","fields":{"slug":"/2022-11-20-스코프-실행컨테스트-클로저/"},"frontmatter":{"title":"스코프,실행컨텍스트,클로저"}}},{"node":{"id":"24ec8ed8-dfae-5619-8c64-df914805c0eb","fields":{"slug":"/2022-11-24-Critical-Rendering-Path/"},"frontmatter":{"title":"💻 Critical Rendering Path"}}},{"node":{"id":"c32a9017-54df-5eb4-98cd-5eba4b9ae41c","fields":{"slug":"/2022-11-27-비동기와-프로미스/"},"frontmatter":{"title":"비동기와 프로미스"}}},{"node":{"id":"364cb56c-45fc-52dc-8311-0f61a88dfdfe","fields":{"slug":"/2022-11-30-지스트-청원-서비스-회고/"},"frontmatter":{"title":"지스트 청원서비스 회고"}}},{"node":{"id":"40c2d20c-04f0-5876-aee6-be5b43bce78a","fields":{"slug":"/2022-12-02-제너레이터와-async-await/"},"frontmatter":{"title":"제너레이터와 Async-Await"}}},{"node":{"id":"4ed9db58-39c3-5f21-ad1e-59be0b94e988","fields":{"slug":"/2022-12-03-모으잡-리팩토링/"},"frontmatter":{"title":"모으잡-check box 수정, react-query 커스텀 훅, 크롤링 이슈"}}},{"node":{"id":"937a4bc1-5318-52a9-b6fd-61188127ce23","fields":{"slug":"/2022-12-05-호이스팅/"},"frontmatter":{"title":"호이스팅"}}},{"node":{"id":"09bdd07c-e41f-573e-bd66-71c526ab83f8","fields":{"slug":"/2022-12-09-쿠키-session-jwt/"},"frontmatter":{"title":"Cookie,Session과 JWT"}}},{"node":{"id":"b552cf79-29a8-5e87-a162-c03661121fb6","fields":{"slug":"/2022-12-09-this/"},"frontmatter":{"title":"this"}}},{"node":{"id":"05a00e19-f52a-5596-a97e-4f7390b20119","fields":{"slug":"/2022-12-10-http와https/"},"frontmatter":{"title":"http와 https"}}},{"node":{"id":"b91bff56-be62-5318-b6f1-dc3ddc789d08","fields":{"slug":"/2022-12-12-생성자함수-프로토타입/"},"frontmatter":{"title":"생성자 함수, 프로토타입"}}},{"node":{"id":"3b7d6329-680d-5db9-8ee6-cb15da44b6a8","fields":{"slug":"/2022-12-30-이벤트/"},"frontmatter":{"title":"이벤트"}}},{"node":{"id":"a94c02b8-45b0-5fac-b129-cf99c64a8f24","fields":{"slug":"/2022-12-23-class/"},"frontmatter":{"title":"클래스"}}},{"node":{"id":"d1dc9a50-2824-5859-826f-ceb445994e93","fields":{"slug":"/2023-01-23-리액트의-기본원리/"},"frontmatter":{"title":"React study: 리액트의 기본 원리"}}},{"node":{"id":"8dd5dd72-0262-582e-8a1d-33fd6b2245f3","fields":{"slug":"/2023-01-23-Vite와-번들러/"},"frontmatter":{"title":"Vite는 왜 빠를까, 번들러에 대한 정리"}}},{"node":{"id":"2cd6faf4-d340-58ee-a4bc-c4b16bc21c42","fields":{"slug":"/2022-12-20-리액트-성능보장/"},"frontmatter":{"title":"React study: 리액트가 성능을 보장하는 방법"}}},{"node":{"id":"717eb8fb-45a2-5fef-aaa9-c5c5eceb792a","fields":{"slug":"/2023-02-03-useState,useEffect, useRef, memo/"},"frontmatter":{"title":"React Study: useState, useEffect, useRef, memo"}}},{"node":{"id":"26ed4c76-848a-56e4-ae68-7e879e23bf77","fields":{"slug":"/2023-02-17-취업준비-회고/"},"frontmatter":{"title":"신입으로 시작하며 작성하는 취준 회고"}}},{"node":{"id":"166ce257-9146-51aa-a470-57c257844c07","fields":{"slug":"/2023-02-21-google.com-입력했을때-일어나는-일/"},"frontmatter":{"title":"google.com를 브라우저에 검색했을 때 일어나는 일"}}},{"node":{"id":"aaa88fe5-37a4-5ff4-9de2-959da89dcd86","fields":{"slug":"/2023-03-01-CDN/"},"frontmatter":{"title":"CDN은 뭘까?"}}},{"node":{"id":"f2fa5329-7ce4-5a65-9e28-0e4b1d188a6c","fields":{"slug":"/2023-03-05-디자인패턴/"},"frontmatter":{"title":"MVC, MVVM, Flux패턴 그리고 Service와 Repository 패턴"}}},{"node":{"id":"543681af-5db3-518d-b19e-7668efdda7fc","fields":{"slug":"/2023-03-31-2023년-3월회고/"},"frontmatter":{"title":"🐤 2023년 3월 회고"}}},{"node":{"id":"eecd0175-5be8-556d-a36a-756d4af0700b","fields":{"slug":"/2023-05-06-2023년-4월회고/"},"frontmatter":{"title":"😎 2023년 4월 회고"}}},{"node":{"id":"055d38ec-e2c0-5a63-aa95-fbc147365d29","fields":{"slug":"/2023-06-05-2023년-5월회고/"},"frontmatter":{"title":"☀︎ 2023년 5월 회고"}}},{"node":{"id":"32156a84-756c-50c3-bd9f-77b3dc2e7547","fields":{"slug":"/2023-07-06-2023년-6월회고/"},"frontmatter":{"title":"☼ 2023년 6월 회고"}}},{"node":{"id":"5438a45e-764a-5e14-b5ba-b71f4ba8be23","fields":{"slug":"/2023-08-09-2023년-7월회고/"},"frontmatter":{"title":"☂︎ 2023년 7월 회고"}}},{"node":{"id":"7a788f0b-75af-5eac-b509-fd0d3f119d98","fields":{"slug":"/2023-09-09-2023년-8월회고/"},"frontmatter":{"title":"😊 2023년 8월 회고"}}},{"node":{"id":"d47fe7ea-21c5-5c88-b64e-e34021957c29","fields":{"slug":"/2023-10-03-2023년-9월회고/"},"frontmatter":{"title":"🚅 2023년 9월 회고"}}},{"node":{"id":"4268b04a-703c-5bd0-8081-e900ee0ce15c","fields":{"slug":"/2023-11-01-2023년-10월회고/"},"frontmatter":{"title":"🧐 2023년 10월 회고"}}},{"node":{"id":"01c028b9-d56c-52a8-8719-eb5cbcf6ea70","fields":{"slug":"/2023-12-02-2023년-11월회고/"},"frontmatter":{"title":"😃 2023년 11월 회고"}}},{"node":{"id":"e696cf5b-451a-5fe0-a2cb-100a22d3d356","fields":{"slug":"/2023-12-31-2023년-12월회고/"},"frontmatter":{"title":"🌟 2023년 12월 회고"}}},{"node":{"id":"b0eb4259-0e5c-53fd-9fdc-cd5e53336653","fields":{"slug":"/2024-02-07-2024년-1월회고/"},"frontmatter":{"title":"🐥 2024년 1월회고"}}},{"node":{"id":"e7e95438-a61a-5b79-b114-ba3d8026517d","fields":{"slug":"/2024-03-02-2024년-2월회고/"},"frontmatter":{"title":"🙊 2024년 2월회고"}}},{"node":{"id":"1bc07ca5-bb4e-5644-a20e-a011d944706b","fields":{"slug":"/2024-03-03-자바스크립트의-동시성-이해하기/"},"frontmatter":{"title":"Promise.all의 동시성 이해하기"}}},{"node":{"id":"bb2429ab-4ef6-53ad-950b-f49dae0134da","fields":{"slug":"/2024-03-30-App-StartUp-time-개선/"},"frontmatter":{"title":"App StartUp time 개선"}}},{"node":{"id":"a20bddb0-3f08-5708-81e9-73695d6250c7","fields":{"slug":"/2024-04-07-2024년-3월회고/"},"frontmatter":{"title":"🙌 2024년 3월회고"}}},{"node":{"id":"1e59eab7-ece6-5711-97f8-273322a2644b","fields":{"slug":"/2024-04-21-onViewableItemsChanged-이해해보기/"},"frontmatter":{"title":"👀 onViewableItemsChanged 이해해보기"}}},{"node":{"id":"a96d70dd-918a-592f-b9a9-4300903c6dd2","fields":{"slug":"/2024-05-01-2024년-4월회고/"},"frontmatter":{"title":"🙌 2024년 4월회고"}}},{"node":{"id":"4b7beeac-e53e-56b2-b35c-a77e998edb64","fields":{"slug":"/2024-06-01-2024년-5월회고/"},"frontmatter":{"title":"🙌 2024년 5월회고"}}},{"node":{"id":"2fd67da4-b9da-54bb-8fac-9974572e6e56","fields":{"slug":"/2024-06-02-에러바운더리-도입하기/"},"frontmatter":{"title":"✅ 에러바운더리 도입하기"}}},{"node":{"id":"976d3bb5-2ac5-5164-9e34-ecda451f70f4","fields":{"slug":"/2024-06-30-2024년-6월회고/"},"frontmatter":{"title":"🤭 2024년 6월회고"}}},{"node":{"id":"f326c8c4-4a20-548d-86bf-35bd5ed917e0","fields":{"slug":"/2024-06-30-NativeStack적용하기/"},"frontmatter":{"title":"🖥️ Native Stack 적용하기"}}},{"node":{"id":"b61202c0-e758-5ab4-b8fb-ef238cfe39ee","fields":{"slug":"/2024-08-03-2024년-7월회고/"},"frontmatter":{"title":"👏 2024년 7월회고 "}}},{"node":{"id":"ee15b1b5-e849-59af-843e-f4c8917a81d9","fields":{"slug":"/2024-09-15-2024년-8월회고/"},"frontmatter":{"title":"🥳 2024년 8월회고 "}}},{"node":{"id":"8fb916d1-72dc-5f0d-88cb-e8a54ddb0259","fields":{"slug":"/2024-09-17-useFunnel-분석해보기/"},"frontmatter":{"title":"📚 useFunnel 분석하고 따라 만들어 보기"}}}]},"previous":{"fields":{"slug":"/2024-09-15-2024년-8월회고/"},"frontmatter":{"title":"🥳 2024년 8월회고 "}},"next":null},"pageContext":{"id":"8fb916d1-72dc-5f0d-88cb-e8a54ddb0259","series":null,"previousPostId":"ee15b1b5-e849-59af-843e-f4c8917a81d9","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}