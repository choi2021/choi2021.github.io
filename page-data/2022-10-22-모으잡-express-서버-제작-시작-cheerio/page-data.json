{"componentChunkName":"component---src-templates-post-jsx","path":"/2022-10-22-모으잡-express-서버-제작-시작-cheerio/","result":{"data":{"site":{"siteMetadata":{"title":"Troy DevLog"}},"markdownRemark":{"id":"10d9caf7-56a9-5377-a0bb-d16a96bc0bbf","excerpt":"공부를 바탕으로 서버를 만들기 전에 우선 서버의 어떤 기능이 필요할 지 먼저 정리한 후에, 직접 서버를 만들었다. SCHEMA Job data 스크롤러로 받아올 데이터 내용은 회사이름, 주요업무, 자격요건, 우대사항, 플랫폼, url 으로 정했다. GET /jobs 데이터베이스에 저장되어있는 공고들을 받아온다. GET /jobs?platform=:plat…","html":"<p>공부를 바탕으로 서버를 만들기 전에 우선 서버의 어떤 기능이 필요할 지 먼저 정리한 후에, 직접 서버를 만들었다.</p>\n<h2>SCHEMA</h2>\n<h4>Job data</h4>\n<p>스크롤러로 받아올 데이터 내용은 회사이름, 주요업무, 자격요건, 우대사항, 플랫폼, url 으로 정했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//Job\n{\n\tname:string\n\tplatform:string\n\tid:string\n\tmain_work:string[]\n\tqualification:string[]\n\tpreferential:string[]\n\turl:string\n}</code></pre></div>\n<h4>GET /jobs</h4>\n<p>데이터베이스에 저장되어있는 공고들을 받아온다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">response 200\n{\n\t[job,job...]\n}</code></pre></div>\n<h4>GET /jobs?platform=:platform</h4>\n<p>해당 플랫폼에 맞는 공고들을 받아온다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">response 200\n{\n\t[job,job...]\n}</code></pre></div>\n<h4>POST /jobs</h4>\n<p>전달 받은 url과 platform을 이용해서 크롤링을 한 후에 데이터베이스에 추가하고 만들어 진 job을 보여준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">request\n{\n\turl:string\n\tplatform:string\n}\n\nreponse 201\n{\n\tname:string\n\tplatform:string\n\tid:string\n\tmain_work:string[]\n\tqualification:string[]\n\tpreferential:string[]\n\turl:string\n}</code></pre></div>\n<h4>DELETE /jobs/:id</h4>\n<p>전달 받은 id에 해당하는 job을 삭제한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">request\n{\n\tid:string\n}\n\nresponse 204</code></pre></div>\n<p>위의 스키마를 바탕으로 서버를 만들고, postman을 이용해서 api가 정상적으로 작동하는지 확인했다. 앞서 공부했던 유용한 미들웨어 (helmet, cors)등을 적용해보았고, 아직 데이터베이스가 없기 때문에, 우선 서버의 로컬변수로 저장해서 관리했다. 데이터는 op.gg의 공고문을 참고해서 만들었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> express <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span>\n<span class=\"token keyword\">import</span> helmet <span class=\"token keyword\">from</span> <span class=\"token string\">\"helmet\"</span>\n<span class=\"token keyword\">import</span> cors <span class=\"token keyword\">from</span> <span class=\"token string\">\"cors\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"express-async-errors\"</span>\n<span class=\"token keyword\">import</span> morgan <span class=\"token keyword\">from</span> <span class=\"token string\">\"morgan\"</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> jobs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"오피지지(OP.GG)\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">platform</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wanted\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">main_work</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"OGT 웹사이트 최적화\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"OGT 글로벌 플랫폼 개발 및 운영\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">qualification</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"Javascript의 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Next.js, React.js을 활용한 개발 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"HTTP, Networking에 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"HTML, CSS 등 마크업에 대한 충분한 이해도가 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Server Side Rendering에 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"자신이 만드는 서비스와 기능에 대한 책임감이 높으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"다양한 직군의 사람들과 원활한 협업이 가능하신 분\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">preferential</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"프로젝트를 스스로 리딩 해본 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"i18n을 적용한 글로벌 서비스에 대한 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Next.js를 이용하여 서버 사이드 렌더링 개발 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"사용자를 위한 UI/UX 경험 개선을 지향하는 성향을 지니신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"프로젝트 기획 단계부터 출시까지 모든 과정에 참여하신 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"E스포츠 게임을 즐기거나 게임 및 시장에 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"서비스 운영에 있어 Search Engine Optimization, User Retention, Acquisition에 대한 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.wanted.co.kr/wd/124677\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"오피지지(OP.GG)\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">platform</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Wanted\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">main_work</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"OGT 웹사이트 최적화\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"OGT 글로벌 플랫폼 개발 및 운영\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">qualification</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"Javascript의 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Next.js, React.js을 활용한 개발 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"HTTP, Networking에 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"HTML, CSS 등 마크업에 대한 충분한 이해도가 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Server Side Rendering에 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"자신이 만드는 서비스와 기능에 대한 책임감이 높으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"다양한 직군의 사람들과 원활한 협업이 가능하신 분\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">preferential</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"프로젝트를 스스로 리딩 해본 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"i18n을 적용한 글로벌 서비스에 대한 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Next.js를 이용하여 서버 사이드 렌더링 개발 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"사용자를 위한 UI/UX 경험 개선을 지향하는 성향을 지니신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"프로젝트 기획 단계부터 출시까지 모든 과정에 참여하신 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"E스포츠 게임을 즐기거나 게임 및 시장에 대한 높은 이해도를 보유하신 분\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"서비스 운영에 있어 Search Engine Optimization, User Retention, Acquisition에 대한 경험이 있으신 분\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.wanted.co.kr/wd/124677\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">cors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">helmet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">morgan</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tiny\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/jobs\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> platform <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">.</span>platform\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> platform <span class=\"token operator\">?</span> jobs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span>platform <span class=\"token operator\">===</span> platform<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> jobs\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/jobs\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> url<span class=\"token punctuation\">,</span> platform <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body\n  <span class=\"token keyword\">const</span> job <span class=\"token operator\">=</span> jobs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">//cheerio로 크롤링해야해, 에러 조건도 달아줘야해</span>\n  jobs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>job<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>jobs<span class=\"token punctuation\">]</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">201</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span>job<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/jobs/:id\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>id\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n  jobs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">job</span> <span class=\"token operator\">=></span> job<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!=</span> id<span class=\"token punctuation\">)</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">204</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">404</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"something wrong\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">4000</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>postman으로 정상적으로 다 작동하는 것을 확인할 수 있었다. 이제 중요한 건 실제로 크롤링을 한 데이터를 만드는 과정이다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/68c9ff8fb27fd2d8ec5209281efbc8be/93a6a/postman.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 63.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVR42p2RXW4DIQyEuf9Fcos85ga9RrQsPwZs2A62ipq2u1LzPSCDGA9jnPf7tm1E1JXjB2PM9eNx3G+tVmYBraGsWJ3fJ977EGJKEacppaLklHLOjbmV0grhNqNWWHEpRtjmnCCrqokxWmN0qdNNEWFepVTF7dsT0i9hgWaM0c+Z72bGI3PYHbVqGhxa5qE5xwmWGf6ji5MuEMN59TZna/Gb9S4UDqOIISCe9TN/FH9MXlnTxgXXBfMibEQ5M1y2a9TTWShj4PNLNPaFp7G+Sp2ZCxFim+1FWmMFns5rjMc/meLjXV6cL7Bf4G9Y7E9QQ/8kf+cv2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image-20221023033122214' title='' src='/static/68c9ff8fb27fd2d8ec5209281efbc8be/ca1dc/postman.png' srcset='/static/68c9ff8fb27fd2d8ec5209281efbc8be/e7570/postman.png 170w,\n/static/68c9ff8fb27fd2d8ec5209281efbc8be/f46e7/postman.png 340w,\n/static/68c9ff8fb27fd2d8ec5209281efbc8be/ca1dc/postman.png 680w,\n/static/68c9ff8fb27fd2d8ec5209281efbc8be/02d09/postman.png 1020w,\n/static/68c9ff8fb27fd2d8ec5209281efbc8be/9d567/postman.png 1360w,\n/static/68c9ff8fb27fd2d8ec5209281efbc8be/93a6a/postman.png 1446w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>image-20221023033122214</figcaption>\n  </figure></p>\n<h1>Cheerio를 이용한 크롤링</h1>\n<p>cheerio는 크롤링을 위한 Node Js 라이브러리로, 파이썬의 beautifulSoup과 같은 역할을 한다.</p>\n<p>먼저 원티드 페이지를 보면 내가 원하는 정보는 h6태그에 카테고리 제목이, p안의 span의 내용들이 바로 담겨 있다. 페이지 내부의 다른 곳에서 h6태그와 p태그가 사용되고 있지 않기 때문에 간단하게 할 수 있을 것이라 생각했지만 이상하게 아무것도 크롤링이 되지 않았다.</p>\n<p>[원티드 페이지 html구조]</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/7bb90e7ed2ad80425739e234a9d4e146/43a77/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 46.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVR42j1RSW7EIBD0/w/5QQ455JB7pEh5UMYeA92szWacwpNJCdnYUBssKSXn3HH0fhyt99bwHud59j5K7aUW65Il7714n5V2u2Hn/c+633e1xBiVUs5avgCtA+wxoFJrwxxCZNj+wTniEEKtFZZLznm9TWzbhm/Qzid67yIyyURaG2bLRLwraEjOCLNgmZniE5DsFya5dchJEnM32NZaM4CaZO9hH6bzvt9hq7XGcikli9RSQL7Cz+SWLCzRSCulbzcowgPEBb+QCp7/bf+TP5pjEnwAGRyjtSOcXsCZgbCUnGG7ruu2TX+lDJGLMbc+MGb+cSYf4YMUIURNTMxKG+eenUXSw3yMep7tMcbk4hIP1gwPRIAEKY2NIiiXl1KbwwVSQdMk9f27vHyU108889tXC6mkEGnHQSFv8NZHMu1CFvkFjo4CuHMqSNEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='원티드페이지구조' title='' src='/static/7bb90e7ed2ad80425739e234a9d4e146/ca1dc/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png' srcset='/static/7bb90e7ed2ad80425739e234a9d4e146/e7570/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png 170w,\n/static/7bb90e7ed2ad80425739e234a9d4e146/f46e7/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png 340w,\n/static/7bb90e7ed2ad80425739e234a9d4e146/ca1dc/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png 680w,\n/static/7bb90e7ed2ad80425739e234a9d4e146/02d09/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png 1020w,\n/static/7bb90e7ed2ad80425739e234a9d4e146/9d567/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png 1360w,\n/static/7bb90e7ed2ad80425739e234a9d4e146/43a77/%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B5%AC%EC%A1%B0.png 1903w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>원티드페이지구조</figcaption>\n  </figure></p>\n<p>아래 코드를 보면 p태그 안에 있는 span을 받아와야 하지만 아무 것도 받아오지 못했고, 내가 잘못 코드를 친 부분이 있는지</p>\n<p>확인 차 span만 불러왔을 때는 navbar에 있는 beta만 받아왔다. 전혀 예상하지 못한 Beta가 어디서 나온 건지 확인해보니</p>\n<p>페이지 상단의 navbar의 AI 합격예측이라는 메뉴에 있는 span의 text내용이었다.</p>\n<p>[헤더 화면]\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/a75f3aba9daf01d4815a28cf0db87677/d7258/%ED%97%A4%EB%8D%94.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 16.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAY0lEQVR42o2MQQ6AIAwE+f8beQEJolALpbRYNNGrc5jsYXcdEYUQvPcxxjmnqs7fuDFGKSWlBAA553oDcBYwQ624pYPHN7D3E1vceY1FpPfOzGZEfAItHhNiFdEX69s7tq6qF6TGr4krEmRVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='헤더' title='' src='/static/a75f3aba9daf01d4815a28cf0db87677/ca1dc/%ED%97%A4%EB%8D%94.png' srcset='/static/a75f3aba9daf01d4815a28cf0db87677/e7570/%ED%97%A4%EB%8D%94.png 170w,\n/static/a75f3aba9daf01d4815a28cf0db87677/f46e7/%ED%97%A4%EB%8D%94.png 340w,\n/static/a75f3aba9daf01d4815a28cf0db87677/ca1dc/%ED%97%A4%EB%8D%94.png 680w,\n/static/a75f3aba9daf01d4815a28cf0db87677/d7258/%ED%97%A4%EB%8D%94.png 966w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>헤더</figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> cheerio <span class=\"token keyword\">from</span> <span class=\"token string\">\"cheerio\"</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getHTML</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://www.wanted.co.kr/wd/43745</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">parsing</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getHTML</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> $List <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span\"</span><span class=\"token punctuation\">)</span>\n\n  $List<span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">idx<span class=\"token punctuation\">,</span> node</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//Beta</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>왜 안되는지 체크하기 위해서 네트워크 창을 보니 받아온 html을 보았을 때 <strong>정적으로 만들어진 페이지만 cheerio가 받아와서 찾다보니 생긴 일이 아닐까</strong> 라는 생각이 들었다. 만약 내 생각이 맞다면, 동적으로 페이지를 받아오기 위해서는 이전에 사용했던 chromium과 같은 라이브러리가 필요할 것 같다.</p>\n<p>[정적페이지만 먼저 받아오는 상황]\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/a8110236f59349700a9404d7cf0dd6de/cda85/%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 97.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR42o1UiXKbMBDl/z+u7aRJxrnAlkH3BToBAV3bbXpNHL8RMzto3+q9ZUWF0JEwLrSRGBNCsbQN1rs9JVxJpSgTlMu2w0xIZXsheUsY5kYoBaTq7vH5QDRXGr/VRhnt8hByPzjU4g7TPULNAUIilAY6E4pLafte2x7KVce2XbetlIK5qPeo6zrKGGRzqTBlsAiHwwWkQsxAjLGU844wKFRBmW3blmXxPhhr27aTUjnvlTFKm2kug/NciBhTyiNIdc5P0yyV1tpU4zgCucwl+7idsa7r9guXeD3j/90q5Xx5ZbT1MYWYeucG76VxTA+984Nz0IJ+gNj5cFIQUorn9ZMMaI7kYffyVh+gC+M46SFIG07pl1R4IBV0TtP7+k3OnlPSdZg451739ddvX16en7RW2weANv1JFgS3jPGcs4GWUhl82D7GX+Tk2BE16NjGGEFd05SUtlvJwdrD/gSwV8q4203PTyXE9XMypOQAA3oE0+fOxMfH8f6+xLTd6pmSllB2JieQffd9CWm9iex1bOoDQgg8wwYhwJ+tvY08iPHQIAKklKdpaprXGMM/I3Xl5ASXAMYbZANZKRtjWZabPK9ej/hkmV48I9QjNDl3VXZ+P1nlBiarrsEzSAX+spQr3xlucRVCmEuZl6XXEr4z/FiGwUFV2Js/ww9WHERmNm3l9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='정적페이지' title='' src='/static/a8110236f59349700a9404d7cf0dd6de/ca1dc/%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80.png' srcset='/static/a8110236f59349700a9404d7cf0dd6de/e7570/%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80.png 170w,\n/static/a8110236f59349700a9404d7cf0dd6de/f46e7/%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80.png 340w,\n/static/a8110236f59349700a9404d7cf0dd6de/ca1dc/%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80.png 680w,\n/static/a8110236f59349700a9404d7cf0dd6de/cda85/%EC%A0%95%EC%A0%81%ED%8E%98%EC%9D%B4%EC%A7%80.png 928w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>정적페이지</figcaption>\n  </figure></p>","frontmatter":{"title":"모으잡-express 서버 제작 시작과 cheerio","date":"October 22, 2022","tags":["사이드프로젝트","모으잡"],"series":"모으잡"},"fields":{"slug":"/2022-10-22-모으잡-express-서버-제작-시작-cheerio/","readingTime":{"minutes":8.525}}},"seriesList":{"edges":[{"node":{"id":"fbb4533a-723e-5252-ac98-c880bd9e222f","fields":{"slug":"/2022-09-22-채용공고-정리사이트-기획/"},"frontmatter":{"title":"채용공고 정리 서비스 기획"}}},{"node":{"id":"efb31bb7-b230-5b3a-bf03-af7bc949639c","fields":{"slug":"/2022-10-15-모으잡-기획-구체화/"},"frontmatter":{"title":"모으잡-기획 구체화"}}},{"node":{"id":"9c730376-b192-5125-bffc-4eeda18b7d68","fields":{"slug":"/2022-10-16-파이썬을-이용한-크롤러제작/"},"frontmatter":{"title":"모으잡-파이썬을 이용한 웹크롤러 제작"}}},{"node":{"id":"ee625e14-0c1c-52cc-97b4-7507fff98c99","fields":{"slug":"/2022-10-17-flask-서버만들기/"},"frontmatter":{"title":"모으잡-flask이용해 SSR서버만들기"}}},{"node":{"id":"72b694be-e580-5664-a455-ea458cd8ff2b","fields":{"slug":"/2022-10-20-모으잡-cors-에러핸들링/"},"frontmatter":{"title":"모으잡-express cors 에러, 에러핸들링"}}},{"node":{"id":"10d9caf7-56a9-5377-a0bb-d16a96bc0bbf","fields":{"slug":"/2022-10-22-모으잡-express-서버-제작-시작-cheerio/"},"frontmatter":{"title":"모으잡-express 서버 제작 시작과 cheerio"}}},{"node":{"id":"0318dcb1-92cd-5b90-92f7-6ac08d34934f","fields":{"slug":"/2022-10-23-모으잡-puppeteer-크롤러제작-프론트페이지-구상/"},"frontmatter":{"title":"모으잡-puppeteer을 이용한 크롤러제작, 프론트페이지 구상"}}},{"node":{"id":"ee78ba91-55fe-52e4-b52e-3fd75064102b","fields":{"slug":"/2022-10-24-모으잡-프론트페이지-UI제작/"},"frontmatter":{"title":"모으잡-프론트페이지 UI제작"}}},{"node":{"id":"4d8fbbcf-f6bd-532c-9616-d545a976bdc8","fields":{"slug":"/2022-10-25-모으잡-UI-수정-크롤링-데이터-연결/"},"frontmatter":{"title":"모으잡-프론트페이지 UI수정, 크롤링한 데이터 받아오기"}}},{"node":{"id":"2ae6ec5c-3c76-51df-9c62-42377b522f58","fields":{"slug":"/2022-11-23-모으잡-Next-migration/"},"frontmatter":{"title":"모으잡-Next js로 migration, 디자인 수정"}}},{"node":{"id":"f98d7300-5ba4-5582-81c9-563366499628","fields":{"slug":"/2022-11-25-모으잡-회원가입로그인-로직/"},"frontmatter":{"title":"모으잡-firebase를 이용한 회원가입 로직 구현"}}},{"node":{"id":"da8d5d14-2fc0-53f4-8a30-1b558488aa2c","fields":{"slug":"/2022-11-29-모으잡 DB연결과-크롤링-기능-연결/"},"frontmatter":{"title":"모으잡-DB연결과 크롤링 기능 연결"}}},{"node":{"id":"ce15da4f-20cc-557c-a65e-d3a9fc40a2d5","fields":{"slug":"/2022-11-30-모으잡-배포/"},"frontmatter":{"title":"모으잡-vercel부터 aws까지 배포과정"}}},{"node":{"id":"bc74e94c-1d4a-5507-a390-a54e07d094e6","fields":{"slug":"/2022-12-17-모으잡-인증인가/"},"frontmatter":{"title":"모으잡-SSR을 이용한 인증,인가 도입"}}},{"node":{"id":"7dbb331a-341a-5763-acac-83425a2e9707","fields":{"slug":"/2022-12-23-모으잡-기획-디자인 수정/"},"frontmatter":{"title":"모으잡-기획, 디자인 수정"}}},{"node":{"id":"204104d7-e0cf-5dff-9c31-15b046d4e428","fields":{"slug":"/2022-12-25-모으잡-서버사이드-랜더링을-이용한-성능개선/"},"frontmatter":{"title":"모으잡-서버사이드 랜더링을 이용한 성능 개선"}}}]},"previous":{"fields":{"slug":"/2022-10-20-모으잡-cors-에러핸들링/"},"frontmatter":{"title":"모으잡-express cors 에러, 에러핸들링"}},"next":{"fields":{"slug":"/2022-10-23-모으잡-puppeteer-크롤러제작-프론트페이지-구상/"},"frontmatter":{"title":"모으잡-puppeteer을 이용한 크롤러제작, 프론트페이지 구상"}}},"pageContext":{"id":"10d9caf7-56a9-5377-a0bb-d16a96bc0bbf","series":"모으잡","previousPostId":"72b694be-e580-5664-a455-ea458cd8ff2b","nextPostId":"0318dcb1-92cd-5b90-92f7-6ac08d34934f"}},"staticQueryHashes":[],"slicesMap":{}}