{"componentChunkName":"component---src-templates-post-jsx","path":"/2022-10-31-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1-2-ê³¼ì œ-íšŒê³ /","result":{"data":{"site":{"siteMetadata":{"title":"Troy DevLog"}},"markdownRemark":{"id":"9f2e1dec-5bb3-514e-809b-4ab032184b86","excerpt":"ğŸ§¨1-2 ê³¼ì œ íšŒê³  ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ë‘ ë²ˆì§¸ ê³¼ì œëŠ” github APIë¥¼ ì´ìš©í•´ ë‘ ê°€ì§€ í˜ì´ì§€ (ì´ìŠˆ ëª©ë¡ê³¼ ìƒì„¸ í˜ì´ì§€)ë¥¼ ë§Œë“œëŠ” ê³¼ì œì˜€ë‹¤. ì„¸ë¶€ì ì¸ ìš”êµ¬ì‚¬í•­ì—ì„œ ê°€ì¥ ì¤‘ìš”í–ˆë˜ ë¶€ë¶„ì€ ë¦¬ìŠ¤íŠ¸ì—ì„œ Github API ë°ì´í„° ìš”ì²­, context APIë¥¼ í™œìš©í•œ APIì—°ë™, ë‹¤ì„¯ ë²ˆì§¸ ì…€ì— ê´‘ê³ ì´ë¯¸ì§€ë¥¼ ë„£ì–´ì¤„ ê²ƒ, ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë©´ ì´ìŠˆ ëª©ë¡ì— ì¶”ê°€ ë¡œë”©â€¦","html":"<h1>ğŸ§¨1-2 ê³¼ì œ íšŒê³ </h1>\n<p>ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ë‘ ë²ˆì§¸ ê³¼ì œëŠ” github APIë¥¼ ì´ìš©í•´ ë‘ ê°€ì§€ í˜ì´ì§€ (ì´ìŠˆ ëª©ë¡ê³¼ ìƒì„¸ í˜ì´ì§€)ë¥¼ ë§Œë“œëŠ” ê³¼ì œì˜€ë‹¤. ì„¸ë¶€ì ì¸ ìš”êµ¬ì‚¬í•­ì—ì„œ ê°€ì¥ ì¤‘ìš”í–ˆë˜ ë¶€ë¶„ì€ ë¦¬ìŠ¤íŠ¸ì—ì„œ <strong>Github API ë°ì´í„° ìš”ì²­,</strong> <strong>context APIë¥¼ í™œìš©í•œ APIì—°ë™</strong>, <strong>ë‹¤ì„¯ ë²ˆì§¸ ì…€ì— ê´‘ê³ ì´ë¯¸ì§€ë¥¼ ë„£ì–´ì¤„ ê²ƒ</strong>, <strong>ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë©´ ì´ìŠˆ ëª©ë¡ì— ì¶”ê°€ ë¡œë”©ì´ ë  ìˆ˜ ìˆê²Œ infinity scrollì„ êµ¬í˜„í•  ê²ƒ</strong>ì´ì—ˆë‹¤. ìœ„ ìš”êµ¬ì‚¬í•­ì„ ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€ì— ëŒ€í•´ ì •ë¦¬í•˜ê³  ì •ë¦¬í•´ ë³´ê³ ì í•œë‹¤.</p>\n<h2>1. Github Issue API</h2>\n<p>ì²«ë²ˆì§¸ ë¬¸ì œëŠ” ê°„ë‹¨í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤. ë¬¸ì„œë¥¼ ë³´ë‹ˆ list issue APIì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ openëœê±¸ ë¶ˆëŸ¬ì˜¤ê³  sort queryë¥¼ ì´ìš©í•´ì„œ commentê°€ ë§ì€ ìˆœìœ¼ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/b470df780511739fae267f49a8479bc3/4d326/image-20221031143703263.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 43.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABA0lEQVR42oVQCW7EIAzM/z/XN1RVVcJhboyBJDWJsruqWnU0BLAy2DOLMUYpbcCGEI8b+4njPywAYF0SUBLSvm+Mh2yf986VP8UhBB+CdcHzFqLzPsVERK01av1j9aXgj0efYimlWFet9SqVVAz9JQSTK0jj7R1rJV6M1xEuX4vU9lPo6XrO73gBXEc3m1fMMZScM2Jro/etj8lKjd9aIFSILRdsvZ8mt33bryFHH0IZIUFB9KnEzA6o1HaRf2HPfozxax5cB3DKRhuKi8Un5G/M9RZzZ3C1tnFixjLGIxi+Gx+MSxkplZNI+W4+OyPWmQdRvRImeorHhpVOL0+Om8dxfAM/cAvDTuU6xgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image 20221031143703263' title='' src='/static/b470df780511739fae267f49a8479bc3/ca1dc/image-20221031143703263.png' srcset='/static/b470df780511739fae267f49a8479bc3/e7570/image-20221031143703263.png 170w,\n/static/b470df780511739fae267f49a8479bc3/f46e7/image-20221031143703263.png 340w,\n/static/b470df780511739fae267f49a8479bc3/ca1dc/image-20221031143703263.png 680w,\n/static/b470df780511739fae267f49a8479bc3/02d09/image-20221031143703263.png 1020w,\n/static/b470df780511739fae267f49a8479bc3/9d567/image-20221031143703263.png 1360w,\n/static/b470df780511739fae267f49a8479bc3/4d326/image-20221031143703263.png 1486w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n<p>ë¬¸ì„œì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—ëŸ¬ëŠ” 404ì™€ 422 ë‘ ê°€ì§€ì´ê¸° ë•Œë¬¸ì— ë‘ ê°€ì§€ ì—ëŸ¬ì— ë”°ë¼ ì—ëŸ¬ë©”ì‹œì§€ë¥¼ ì»¤ìŠ¤í…€í•  ìˆ˜ ìˆê²Œ ì´ì „ì— ë§Œë“¤ì–´ë‘” httpError classë¥¼ ì´ìš©í•´ ì•Œë§ì€ ì—ëŸ¬ë¥¼ ë°˜í™˜í•´ ì¤„ ìˆ˜ ìˆê²Œ í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//issueService.js</span>\n\n<span class=\"token keyword\">import</span> HTTPError <span class=\"token keyword\">from</span> <span class=\"token string\">'../network/httpError'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getIssueList</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">page</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.github.com/repos/angular/angular-cli/issues?sort=comments&amp;per_page=30&amp;page=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REACT_APP_TOKEN</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>response<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HTTPError</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">.</span>statusText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> getIssueList<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//httpError.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HTTPError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">statusCode<span class=\"token punctuation\">,</span> message</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'HTTPError'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> statusCode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span> <span class=\"token function\">errorMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>statusCode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token number\">404</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> <span class=\"token string\">'í•´ë‹¹ ë ˆí¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> <span class=\"token number\">422</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> <span class=\"token string\">'ìš”ì²­ì´ ì˜ëª»ëœ endpointë¡œ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Unknown Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>2. context APIë¥¼ í™œìš©í•œ API ì—°ë™</h2>\n<h3>Context API</h3>\n<p>context APIëŠ” ì „ì—­ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ, providerë‚´ë¶€ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì—ê²Œ ì „ë‹¬ì‹œ propìœ¼ë¡œ ìì‹ ì»´í¬ë„ŒíŠ¸ì— í•˜ë‚˜í•˜ë‚˜ ì „ë‹¬í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°”ë¡œ ìƒíƒœì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” dbì™€ ê°™ì€ ì—­í• ì„ í•  ìˆ˜ ìˆë‹¤. ì´ë²ˆ ê³¼ì œì—ì„œ context APIë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•œë‹¤ë©´ issue listë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ context APIì— ë„£ì–´ì£¼ì–´, listë‚´ìš©ì´ í•„ìš”í•œ ê³³ì—ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì—ˆë‹¤.</p>\n<p><img width='1000' src='https://velog.velcdn.com/images/devjade/post/c155b13a-e1b7-4205-9f39-875e1c284454/contextAPI.png'></img></p>\n<p>context API ìì²´ì—ì„œ apië¥¼ ì´ìš©í•´ ê°’ì„ ë„£ì–´ë‘˜ê¹Œ ìƒê°ì„ í–ˆì§€ë§Œ, ë‚´ë¶€ì—ì„œ ê³„ì† ê°’ì´ ë°”ë€Œë©´ ë°›ëŠ” ì‹œì ì— ë”°ë¼ ë‹¤ë¥¸ ë°ì´í„°ê°€ ì „ë‹¬ë  ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ì•„ ë‹¨ìˆœì´ ë°ì´í„°ë§Œ ë³´ê´€í•˜ê³  ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ contextë¡œ ê°™ì´ ì œê³µí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ êµ¬ì„±í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useMemo<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> createContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ListContext <span class=\"token operator\">=</span> <span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListContextProvider</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>issues<span class=\"token punctuation\">,</span> setIssues<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setNextPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPage</span><span class=\"token punctuation\">(</span>page <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> issues<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">,</span> setNextPage<span class=\"token punctuation\">,</span> setIssues <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>issues<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>ListContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Custom Hook: useFetch</h3>\n<p>ë‘ê°€ì§€ í˜ì´ì§€ ì¤‘ ì–´ë””ë¥¼ ë¨¼ì € ì ‘ì†í•´ë„, apië¡œ ë°ì´í„°ë¥¼ contextAPIì— ì €ì¥í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” ë™ì¼í•œ ë¡œì§ì„ ë‘ í˜ì´ì§€ ëª¨ë‘ ê°€ì§€ê³  ìˆì–´ì•¼ í–ˆë‹¤. ë¡œì§ì˜ ì¬ì‚¬ìš©ì„ ìœ„í•´ useFetchë¼ëŠ” custon Hookì„ ë§Œë“¤ì–´ì„œ í•œ ê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í–ˆê³ , ë‘ í˜ì´ì§€ ì¤‘ ì–´ë””ë¥¼ ì ‘ì†í•´ë„ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì´ ë” ì¢‹ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.</p>\n<p>useEffect ë‚´ë¶€ì—ì„œëŠ” async awaitìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ê°ì‹¸ë©´ promiseê°€ ë°˜í™˜ë˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•  ìˆ˜ ì—†ì–´, getListë¥¼ í•¨ìˆ˜ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì„œ useEffectë¡œ ì‹¤í–‰í•´ ì£¼ëŠ” ë¡œì§ì„ ì‚¬ìš©í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> issues<span class=\"token punctuation\">,</span> setIssues<span class=\"token punctuation\">,</span> page <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ListContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> setIsLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getList</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getIssueList</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setLastPage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">setIssues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> updated <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>prev <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">issue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          updated<span class=\"token punctuation\">[</span>issue<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> issue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> updated<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">getList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> issues<span class=\"token punctuation\">,</span> lastPage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>issues ì „ì—­ìƒíƒœ ìë£Œêµ¬ì¡°</h3>\n<p>context ë‚´ë¶€ ìƒíƒœë¥¼ ì²˜ìŒì—ëŠ” ë°°ì—´ì„ ì´ìš©í•´ api ë°ì´í„°ë“¤ì„ ë‹´ì•„ë‘ë ¤ê³  í–ˆë‹¤. í•˜ì§€ë§Œ ìƒì„¸í˜ì´ì§€ì— ê°”ë‹¤ê°€ ëŒì•„ì™”ì„ ë•Œ, apiê°€ í˜¸ì¶œë˜ë©´ì„œ ê°™ì€ ë°ì´í„°ê°€ ë‘ê°œì”© ë“¤ì–´ê°€ëŠ” ì˜¤ë¥˜ê°€ ìƒê²¼ë‹¤. ì´ëŸ¬í•œ ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ <strong>Set</strong>ì„ ì´ìš©í•´ ì¤‘ë³µëœ ë°ì´í„°ëŠ” ì œê±°í•˜ë ¤ í–ˆì§€ë§Œ, ì—¬ì „íˆ ë‚¨ì•„ìˆì—ˆë‹¤. ì¤‘ë³µì œê±°ê°€ ë˜ì§€ ì•Šì•˜ë˜ ì´ìœ ëŠ” ë°ì´í„° objectë“¤ì´ ê°™ì€ ìë£Œë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ <strong>ë‹¤ë¥¸ ì°¸ì¡°ê°’</strong>ì„ ê°€ì§€ê³  ìˆì–´ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì²˜ë¦¬ê°€ ëœë‹¤ê³  ìƒê°í–ˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ ì¤‘ë³µì„ ì œê±°í•˜ê¸° ìœ„í•´ì„œ ì²˜ìŒì—ëŠ” ë°›ì€ ë°°ì—´ê³¼ ê¸°ì¡´ ë°°ì—´ì„ ë¹„êµí•˜ëŠ” ë¡œì§ì„ ì§œë ¤ê³  í–ˆì§€ë§Œ, <strong>O(n^2)ì˜ ì‹œê°„ë³µì¡ë„</strong>ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— ìë£Œì–‘ì´ ë§ì•„ì§ˆìˆ˜ë¡ ì„±ëŠ¥ì´ ì•ˆ ì¢‹ì•„ì§ˆ ê²ƒì´ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.</p>\n<p>ì´ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ìë£Œêµ¬ì¡°ë¥¼ <strong>Object</strong>ë¡œ ë°”ê¾¸ì—ˆë‹¤. objectì˜ keyë¥¼ dataì˜ idë¡œ, valueë¥¼ ë°ì´í„° ìì²´ë¡œ í•œ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ë©´, ì¤‘ë³µì„ ê°„ë‹¨í•˜ê²Œ ì œê±°í•  ìˆ˜ ìˆê³  ì´í›„ì— ë°°ì—´ë¡œ ë°”ê¾¸ì–´ mappingí•  ë•Œ ì •ë ¬ë§Œ í•´ì£¼ë©´ ë˜ê¸° ë•Œë¬¸ì— <strong>O(nlogn)</strong>ìœ¼ë¡œ ë³´ë‹¤ ë‚˜ì€ ì„±ëŠ¥ì„ ê°–ê²Œ ë  ê²ƒì´ë¼ ì˜ˆìƒí–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IssueList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> setNextPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ListContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> issues<span class=\"token punctuation\">,</span> lastPage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token punctuation\">.</span>List<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>issues<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> b<span class=\"token punctuation\">.</span>comments <span class=\"token operator\">-</span> a<span class=\"token punctuation\">.</span>comments<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">issue<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>IssueItem key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>issue<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">{</span>isLoading <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">&lt;</span>Loader <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token constant\">S</span><span class=\"token punctuation\">.</span>List<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IssueList<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìë£Œêµ¬ì¡°ë¥¼ objectë¡œ ë°”ê¾¼ ë•ë¶„ì— detailí˜ì´ì§€ì—ì„œ ë³´ì—¬ì¤„ ë•Œë„ ë‹¤ë¥¸ api í˜¸ì¶œì—†ì´ useParamìœ¼ë¡œ ë°›ì•„ì˜¨ idê°’ìœ¼ë¡œ issuesì— ì ‘ê·¼í•´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">import React, { memo } from &#39;react&#39;;\nimport { useNavigate, useParams } from &#39;react-router&#39;;\nimport S from &#39;./styles&#39;;\nimport formatDate from &#39;../../utils/formatDate&#39;;\n\nconst IssueItem = ({ id, number, title, user, created_at, comments }) =&gt; {\n  const navigate = useNavigate();\n  const params = useParams();\n  const date = formatDate(created_at);\n  const handleClick = () =&gt; {\n    if (!params.id) {\n      navigate(`/detail/${id}`);\n    }\n  };\n  return (\n    &lt;S.List onClick={handleClick} params={!!params.id}&gt;\n      &lt;S.LeftBox&gt;\n        &lt;header&gt;\n          &lt;span&gt;{`#${number}`}&lt;/span&gt;\n          &lt;S.Title&gt;{title}&lt;/S.Title&gt;\n        &lt;/header&gt;\n        &lt;div&gt;\n          &lt;span&gt;{`ì‘ì„±ì: ${user &amp;&amp; user.login}`}&lt;/span&gt;\n          &lt;span&gt;{date}&lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/S.LeftBox&gt;\n      &lt;S.RightBox&gt;\n        ì½”ë©˜íŠ¸:\n        {comments}\n      &lt;/S.RightBox&gt;\n    &lt;/S.List&gt;\n  );\n};\n\nexport default memo(IssueItem);</code></pre></div>\n<h2>3. ë‹¤ì„¯ë²ˆì§¸ ì…€ì— ê´‘ê³  ë³´ì—¬ì£¼ê¸°</h2>\n<p>listì˜ íŠ¹ì •ë¶€ë¶„ì— ì¶”ê°€ëœ ê²ƒì„ ë³´ì—¬ì¤€ ê²ƒì„ í•´ë³¸ ì ì´ ì—†ì–´ì„œ ê³ ë¯¼í•˜ë‹¤, mappingì„ í•  ë•Œ indexê°€ 4ê°€ ë˜ì—ˆì„ ë•Œ issueItem ì»´í¬ë„ŒíŠ¸ì™€ í•¨ê»˜ adBox ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì£¼ëŠ” ë°©ì‹ì„ ì„ íƒí–ˆë‹¤. í•˜ì§€ë§Œ keyê°€ ê³„ì†í•´ì„œ ì¤‘ë³µëœë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">import React, { useContext } from &#39;react&#39;;\nimport S from &#39;./styles&#39;;\nimport IssueItem from &#39;../issueItem/IssueItem&#39;;\nimport AdBox from &#39;../adBox/AdBox&#39;;\nimport useFetch from &#39;../../hooks/useFetch&#39;;\nimport useObservation from &#39;../../hooks/useObservation&#39;;\nimport { ListContext } from &#39;../../context/ListContext&#39;;\nimport Loader from &#39;../loader/Loader&#39;;\n\nconst IssueList = () =&gt; {\n  const { setNextPage } = useContext(ListContext);\n  const [isLoading, error, issues, lastPage] = useFetch();\n\n  return (\n    &lt;&gt;\n      &lt;S.List&gt;\n        {Object.values(issues)\n          .sort((a, b) =&gt; b.comments - a.comments)\n          .map((issue, idx) =&gt; {\n            if (idx === 4) {\n              return (\n                &lt;&gt;\n                  &lt;AdBox /&gt;\n                  &lt;IssueItem key={issue.id} {...issue} /&gt;\n                &lt;/&gt;\n              );\n            }\n            return &lt;IssueItem key={issue.id} {...issue} /&gt;;\n          })}\n        {isLoading &amp;&amp; &lt;Loader /&gt;}\n      &lt;/S.List&gt;\n    &lt;/&gt;\n  );\n};\n\nexport default IssueList;</code></pre></div>\n <br/>\n<img width='800px' src='/static/adì—ëŸ¬-9ccc9491df15c70c5fd634a242b0947d.png'>\n \n<br> \nì–´ë””ì„œ ê³„ì†í•´ì„œ ì—ëŸ¬ê°€ ë‚˜ì˜¤ëŠ”ì§€ ì°¾ëŠ” ì¤‘ì— issueItemì— keyê°’ì„ ì£¼ì—ˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆë‹¤. í•´ê²°í•˜ê¸° ìœ„í•´ì„œ fragmentê°€ ì•„ë‹ˆë¼ divë¡œ ê°ì‹¸ì£¼ê³  divì— keyê°’ì„ ì „ë‹¬í•´ì¤˜ ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">import React, { useContext } from &#39;react&#39;;\nimport S from &#39;./styles&#39;;\nimport IssueItem from &#39;../issueItem/IssueItem&#39;;\nimport AdBox from &#39;../adBox/AdBox&#39;;\nimport useFetch from &#39;../../hooks/useFetch&#39;;\nimport useObservation from &#39;../../hooks/useObservation&#39;;\nimport { ListContext } from &#39;../../context/ListContext&#39;;\nimport Loader from &#39;../loader/Loader&#39;;\n\nconst IssueList = () =&gt; {\n  const { setNextPage } = useContext(ListContext);\n  const [isLoading, error, issues, lastPage] = useFetch();\n\n\n  return (\n    &lt;&gt;\n      &lt;S.List&gt;\n        {Object.values(issues)\n          .sort((a, b) =&gt; b.comments - a.comments)\n          .map((issue, idx) =&gt; {\n            if (idx === 4) {\n              return (\n                &lt;div key={issue.id}&gt;\n                  &lt;AdBox /&gt;\n                  &lt;IssueItem {...issue} /&gt;\n                &lt;/div&gt;\n              );\n            }\n            return &lt;IssueItem key={issue.id} {...issue} /&gt;;\n          })}\n        {isLoading &amp;&amp; &lt;Loader /&gt;}\n      &lt;/S.List&gt;\n      {!lastPage ? (\n        &lt;S.Target ref={targetRef} /&gt;\n      ) : (\n        &lt;S.Banner&gt;ë§ˆì§€ë§‰ í˜ì´ì§€ì…ë‹ˆë‹¤ğŸˆ&lt;/S.Banner&gt;\n      )}\n    &lt;/&gt;\n  );\n};\n\nexport default IssueList;</code></pre></div>\n<p>(ë‚˜ì¤‘ì— ì•ˆ ì‚¬ì‹¤ì´ì§€ë§Œ react.fragmentì—ë„ keyê°’ì„ ì¤„ ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.)</p>\n<h2>4. Infinite Scroll</h2>\n<p>ì´ë²ˆ ê³¼ì œì—ì„œì˜ ê°€ì¥ í° í•µì‹¬ ì¡°ê±´ì´ì—ˆë‹¤. í…Œì˜¤ë‹˜ì˜ ì˜¤í”ˆì±„íŒ…ë°©ì—ì„œë„ ê°„ê°„íˆ ì˜¬ë¼ì˜¤ë˜ <strong>infinite scroll</strong>ì— ëŒ€í•œ ì§ˆë¬¸ë“¤ì„ ë³´ë©´ì„œ ì €ê²Œ ì™œ í•„ìš”í•˜ì§€ë¼ëŠ” ìƒê°ì„ í–ˆì—ˆëŠ”ë° ì´ë²ˆì— ì§ì ‘ êµ¬í˜„í•´ë³´ë©´ì„œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ë¼ëŠ” ì ì„ ë§ì´ ëŠê¼ˆë‹¤. í•œë²ˆë„ êµ¬í˜„í•´ë³¸ ì ì´ ì—†ë˜ ê¸°ëŠ¥ì´ê¸° ë•Œë¬¸ì— ê´€ë ¨ ê¸€ì„ ë§ì´ ì°¾ì•„ë³´ê³  ê°€ì¥ ì˜ ì •ë¦¬ë˜ì–´ ìˆëŠ” <a href=\"https://tech.kakaoenterprise.com/149\">ì¹´ì¹´ì˜¤ ì—”í„°í”„ë¼ì´ì¦ˆì˜ ê¸€</a>ì„ ì°¸ê³ í•´ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.</p>\n<p>ë§Œë“œëŠ” ë°©ì‹ì„ scroll eventë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ê³¼ Intersection Observer APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë‘ ê°€ì§€ ë°©ì‹ì´ ì„¤ëª…ë˜ì–´ ìˆì—ˆëŠ”ë°, ì´ì „ì— Intersection Observer APIë¥¼ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— ê³§ë°”ë¡œ Intersection Observer APIë¥¼ ì´ìš©í•´ì„œ êµ¬í˜„í•´ ë³´ì•˜ë‹¤.</p>\n<p>ê¸°ë³¸ì ì¸ ë¡œì§ì€ observerê°€ <strong>ê´€ì°°í•´ì•¼ í•  target</strong>ì„ ë§Œë“¤ê³ , observerê°€ ê°ì§€í•  ì˜ì—­ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ì€ <strong>option</strong>ê³¼ ê°ì§€ë˜ì—ˆì„ ë•Œ API í˜¸ì¶œì„ í•´ì¤„ <strong>callback</strong>ì„ ì „ë‹¬í•´ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì´ë‹¤. callbackí•¨ìˆ˜ëŠ” useFetch hookì— ì—°ê²°í•´ë‘ì—ˆë˜ pageë¥¼ ì¦ê°€ì‹œí‚¤ëŠ”ë°, page ìƒíƒœë¥¼ ì•ì„  useFetchì˜ useEffect hookì˜ dependencyë¡œ ì „ë‹¬í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— í˜ì´ì§€ ë³€í™”ì— ë”°ë¼ api í˜¸ì¶œì´ ìë™ìœ¼ë¡œ ì—°ê²°ëœë‹¤.</p>\n<h3>Custom Hook: useObservation</h3>\n<p>Observationì„ í•˜ëŠ” ë¡œì§ì„ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í•  ìˆ˜ ìˆê²Œ useObservationì´ë¼ëŠ” Hookìœ¼ë¡œ ë¡œì§ë“¤ì„ ì •ë¦¬í–ˆë‹¤. Hookì€ ê´€ì°°í•  refë¥¼ ë°˜í™˜í•´ refë¥¼ ìš°ë¦¬ê°€ ì›í•˜ëŠ” íƒ€ê²Ÿìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">import { useCallback, useEffect, useRef } from &#39;react&#39;;\n\nconst option = {\n  root: null,\n  rootMargin: &#39;0px&#39;,\n  threshold: 1,\n};\n\nconst useObservation = onIntersect =&gt; {\n  const ref = useRef(null);\n  const callback = useCallback(\n    (entries, observer) =&gt; {\n      entries.forEach(entry =&gt; {\n        if (entry.isIntersecting) onIntersect(entry, observer);\n      });\n    },\n    [onIntersect]\n  );\n\n  useEffect(() =&gt; {\n    if (!ref.current) {\n      return;\n    }\n    const observer = new IntersectionObserver(callback, option);\n    observer.observe(ref.current);\n    return () =&gt; observer.disconnect();\n  }, [ref.current, callback]);\n  return ref;\n};\n\nexport default useObservation;</code></pre></div>\n<p>ì–´ë ¤ì› ë˜ ì ì€ <strong>ì´ˆê¸° ë Œë”ë§ ì‹œì— ì „ë‹¬í•´ì£¼ì—ˆë˜ callbackì´ ì‹¤í–‰ë˜ì–´ì„œ ê³„ì†í•´ì„œ page 2ì¸ ìƒíƒœë¡œ ì‹œì‘ë˜ëŠ” ì </strong>ì´ì—ˆë‹¤. ì´ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œ useFetchì˜ isLoadingìƒíƒœë¥¼ ì´ìš©í•´ì„œ ë¡œë”©ì´ ì•„ë‹ ë•Œë§Œ useObservationì— ì „ë‹¬í•´ì¤€ callback í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê²Œ í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">import React, { useContext } from &#39;react&#39;;\nimport S from &#39;./styles&#39;;\nimport IssueItem from &#39;../issueItem/IssueItem&#39;;\nimport AdBox from &#39;../adBox/AdBox&#39;;\nimport useFetch from &#39;../../hooks/useFetch&#39;;\nimport useObservation from &#39;../../hooks/useObservation&#39;;\nimport { ListContext } from &#39;../../context/ListContext&#39;;\nimport Loader from &#39;../loader/Loader&#39;;\n\nconst IssueList = () =&gt; {\n  const { setNextPage } = useContext(ListContext);\n  const [isLoading, error, issues] = useFetch();\n  const onObserve = (entry, observer) =&gt; {\n    observer.unobserve(entry.target);\n    if (!isLoading) {\n      setNextPage();\n    }\n  };\n\n  const targetRef = useObservation(onObserve);\n\n  return (\n    &lt;&gt;\n      &lt;S.List&gt;\n        {Object.values(issues)\n          .sort((a, b) =&gt; b.comments - a.comments)\n          .map((issue, idx) =&gt; {\n            if (idx === 4) {\n              return (\n                &lt;div key={issue.id}&gt;\n                  &lt;AdBox /&gt;\n                  &lt;IssueItem {...issue} /&gt;\n                &lt;/div&gt;\n              );\n            }\n            return &lt;IssueItem key={issue.id} {...issue} /&gt;;\n          })}\n        {isLoading &amp;&amp; &lt;Loader /&gt;}\n      &lt;/S.List&gt;\n      &lt;S.Target ref={targetRef} /&gt;\n    &lt;/&gt;\n  );\n};\n\nexport default IssueList;</code></pre></div>\n<h3>ë§ˆì§€ë§‰ í˜ì´ì§€ ë¬´í•œ API í˜¸ì¶œ</h3>\n<p>êµ¬í˜„ì´ ë‹¤ ëë‚œ ì¤„ ì•Œì•˜ì§€ë§Œ ë§ˆì§€ë§‰ í˜ì´ì§€ì—ì„œ ê³„ì†í•´ì„œ APIê°€ í˜¸ì¶œë˜ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.</p>\n<img width='800px' src='https://user-images.githubusercontent.com/83333409/198885118-10dd9434-34c2-4af1-9055-2684890dcbe6.gif'>\n<p>ì—ëŸ¬ í•´ê²°ì„ ìœ„í•´ì„œ íŒ€ì›ë¶„ë“¤ì˜ ë„ì›€ì„ ë°›ì•„ useFetchì— lastPageë¼ëŠ” ìƒíƒœë¥¼ ì¶”ê°€í–ˆê³ , ë” ì´ìƒ ë¶ˆëŸ¬ì˜¬ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´ë¡œ ë°›ì•„ì˜¤ëŠ” ì ì„ ì´ìš©í•´ data.lengthê°€ 0ì¼ ë•Œ lastPageë¥¼ Trueë¡œ ë°”ê¿” í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">//useFetch.jsx\n\nconst useFetch = () =&gt; {\n  const { issues, setIssues, page } = useContext(ListContext);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(&#39;&#39;);\n  const [lastPage, setLastPage] = useState(false);\n  const getList = async () =&gt; {\n    setIsLoading(true);\n    try {\n      const data = await getIssueList(page);\n      if (data.length === 0) {\n        setLastPage(true);\n      }\n    ...\n  };\n  useEffect(() =&gt; {\n    getList();\n  }, [page]);\n\n  return [isLoading, error, issues, lastPage];\n};\n\nexport default useFetch;\n\n\n//issueList.jsx\n\nimport React, { useContext } from &#39;react&#39;;\nimport S from &#39;./styles&#39;;\nimport IssueItem from &#39;../issueItem/IssueItem&#39;;\nimport AdBox from &#39;../adBox/AdBox&#39;;\nimport useFetch from &#39;../../hooks/useFetch&#39;;\nimport useObservation from &#39;../../hooks/useObservation&#39;;\nimport { ListContext } from &#39;../../context/ListContext&#39;;\nimport Loader from &#39;../loader/Loader&#39;;\n\nconst IssueList = () =&gt; {\n  const { setNextPage } = useContext(ListContext);\n  const [isLoading, error, issues, lastPage] = useFetch();\n  const onObserve = (entry, observer) =&gt; {\n    observer.unobserve(entry.target);\n    if (!isLoading &amp;&amp; !lastPage) {\n      setNextPage();\n    }\n  };\n\n  const targetRef = useObservation(onObserve);\n\n  return (\n    &lt;&gt;\n      &lt;S.List&gt;\n\t\t...\n      &lt;/S.List&gt;\n      {!lastPage ? (\n        &lt;S.Target ref={targetRef} /&gt;\n      ) : (\n        &lt;S.Banner&gt;ë§ˆì§€ë§‰ í˜ì´ì§€ì…ë‹ˆë‹¤ğŸˆ&lt;/S.Banner&gt;\n      )}\n    &lt;/&gt;\n  );\n};</code></pre></div>\n<img width='800' src='https://user-images.githubusercontent.com/83333409/198885336-38510ffe-0e24-4010-9229-ab53ea785dcc.png'>\n<h2>ë§ˆì¹˜ë©°</h2>\n<p>í˜¼ì ê³µë¶€í•  ë•ŒëŠ” ê·¸ëƒ¥ ì—ëŸ¬í•´ê²°ì„ ìœ„í•´ì„œ í•´ê²°ë°©ë²•ì„ ì°¾ê³  ê¸°ë¡í•˜ëŠ” ê²Œ ë‹¤ì˜€ëŠ”ë°, íŒ€ì›ë¶„ë“¤ì´ ë¬¼ì–´ë´ ì£¼ì‹œê³  ë„ì™€ì£¼ì‹œëŠ” ê³¼ì •ì´ ë‚˜ì—ê²Œ ë„ˆë¬´ ë„ˆë¬´ ì†Œì¤‘í•œ ê²½í—˜ì´ì—ˆë‹¤. ë‚´ê°€ <strong>ì™œ ì´ë ‡ê²Œ ì½”ë“œë¥¼ ì§°ëŠ”ì§€</strong> ë¬¼ì–´ ë´ì£¼ëŠ” ì‚¬ëŒì´ ìˆë‹¤ëŠ” ê²Œ,<strong>í”¼ë“œë°±ê³¼ ì§ˆë¬¸</strong>ì„ í•´ì£¼ì‹œëŠ” ë¶„ì´ ìˆë‹¤ëŠ” ê²Œ ë‚´ê°€ ì„±ì¥í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ì•ìœ¼ë¡œëŠ” ë” ê³ ë¯¼í•˜ê³  <strong>ì™œ</strong>ì™€ <strong>ì–´ë–»ê²Œ</strong>ë¥¼ ì˜ ì„¤ëª…í•˜ëŠ” ì½”ë“œë“¤ì„ ë‹´ì•„ë‚´ì„œ ë” ì˜ ì¤€ë¹„í•´ ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ì‹œê°„ìœ¼ë¡œ ì‚¼ì•„ ê°€ì•¼ê² ë‹¤.</p>","frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1-2 ê³¼ì œíšŒê³ ","date":"October 31, 2022","tags":["íšŒê³ ","ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©"],"series":"ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©"},"fields":{"slug":"/2022-10-31-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1-2-ê³¼ì œ-íšŒê³ /","readingTime":{"minutes":16.145}}},"seriesList":{"edges":[{"node":{"id":"f7e153bc-b4a1-5c03-9372-06e76a5da423","fields":{"slug":"/2022-10-04-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ 1í¸/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-ê³¼ì œ 1,2"}}},{"node":{"id":"7ae817c7-3e3f-5597-a1ce-80840e62462b","fields":{"slug":"/2022-10-05-ì›í‹°ë“œ-í”„ë¦¬ì˜¨ë³´ë”©-ê³¼ì œ-2í¸/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-ê³¼ì œ 2,3"}}},{"node":{"id":"d036a290-e927-5383-8b1d-993a8ed8c794","fields":{"slug":"/2022-10-06-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ 3í¸/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-ê³¼ì œ 3í¸"}}},{"node":{"id":"3e41dc8a-b610-5427-bfe4-9a9c3557bffb","fields":{"slug":"/2022-10-08-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ4/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-login/register ì»´í¬ë„ŒíŠ¸í™”"}}},{"node":{"id":"73a3c928-fa52-5501-9938-8eece83ae45c","fields":{"slug":"/2022-10-09-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ5/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-í´ë” êµ¬ì¡° ìˆ˜ì •"}}},{"node":{"id":"e5737f1b-7b44-5548-9a92-a0d99e8821bb","fields":{"slug":"/2022-10-10-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ6/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-HTTPì—ëŸ¬ì •ë¦¬, fetch ì—ëŸ¬í•¸ë“¤ë§ ì‹œë„"}}},{"node":{"id":"29625880-cc86-526b-b650-b9bc8ee7d16c","fields":{"slug":"/2022-10-11-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ7/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-ë¦¬íŒ©í† ë§:ìµœì í™”,netlifyë¥¼ ì´ìš©í•œ ë°°í¬"}}},{"node":{"id":"f6746d99-0c3c-57b2-8b10-1f2d3770e2c3","fields":{"slug":"/2022-10-12-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ8/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-ë¦¬íŒ©í† ë§:todoBtn ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬,ì—ëŸ¬í•¸ë“¤ë§"}}},{"node":{"id":"e6aa9c8d-2e3a-55ea-ae9e-f8eca03b270e","fields":{"slug":"/2022-10-13-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©ì‚¬ì „ê³¼ì œíšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-íšŒê³ "}}},{"node":{"id":"dafe14dd-c51d-5ae4-a73c-ae39cf910b4d","fields":{"slug":"/2022-10-25-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©-1ì£¼ì°¨-1ì¼/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ 1-1 í˜‘ë ¥íˆ´:ESLint,Prettier,Git Hook, Husky"}}},{"node":{"id":"e35bbcaa-e695-518d-b955-34ad7f1b073f","fields":{"slug":"/2022-10-25-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©-1ì£¼ì°¨-2ì¼/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ ì²«ì§¸ì£¼ ê³¼ì œ-best caseì°¾ê¸°ì™€ ë³´ì¶©ê³µë¶€:context API"}}},{"node":{"id":"fc36457b-4432-5eae-9056-606dfb375804","fields":{"slug":"/2022-10-27-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1ì£¼-3ì¼ì°¨/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ ì²«ì§¸ì£¼ ê³¼ì œ 3ì¼ì°¨-best case í”„ë¡œì íŠ¸ íšŒê³ "}}},{"node":{"id":"81e94920-65df-5f6b-b854-2701c616bcc7","fields":{"slug":"/2022-10-28-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1ì£¼ì°¨-4ì¼/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ ì²«ì§¸ì£¼ 4ì¼ì°¨-ì´ˆê¸°ì„¸íŒ… ì»¤ë°‹ í•©ì¹˜ê¸°"}}},{"node":{"id":"9f2e1dec-5bb3-514e-809b-4ab032184b86","fields":{"slug":"/2022-10-31-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1-2-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1-2 ê³¼ì œíšŒê³ "}}},{"node":{"id":"5cac3131-6374-547f-b2c8-96e0f6084594","fields":{"slug":"/2022-11-04-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-2-1-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 2-1 ê³¼ì œíšŒê³ "}}},{"node":{"id":"15f55c7c-3142-5102-a046-55582836a60a","fields":{"slug":"/2022-11-07-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-2-2-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 2-2 ê³¼ì œíšŒê³ "}}},{"node":{"id":"20495c35-f22e-531b-b308-329bd9305a00","fields":{"slug":"/2022-11-11-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-3-1-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 3-1 ê³¼ì œíšŒê³ "}}},{"node":{"id":"4659ef8b-53a8-5f72-bbe8-967b2b76f5b7","fields":{"slug":"/2022-11-19-ì›í‹°ë“œ-í”„ë¦¬ì˜¨ë³´ë”©-ë§ˆì§€ë§‰ ê³¼ì œíšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ë§ˆì§€ë§‰ ê³¼ì œíšŒê³ "}}}]},"previous":{"fields":{"slug":"/2022-10-28-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1ì£¼ì°¨-4ì¼/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ ì²«ì§¸ì£¼ 4ì¼ì°¨-ì´ˆê¸°ì„¸íŒ… ì»¤ë°‹ í•©ì¹˜ê¸°"}},"next":{"fields":{"slug":"/2022-11-04-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-2-1-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 2-1 ê³¼ì œíšŒê³ "}}},"pageContext":{"id":"9f2e1dec-5bb3-514e-809b-4ab032184b86","series":"ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©","previousPostId":"81e94920-65df-5f6b-b854-2701c616bcc7","nextPostId":"5cac3131-6374-547f-b2c8-96e0f6084594"}},"staticQueryHashes":[],"slicesMap":{}}