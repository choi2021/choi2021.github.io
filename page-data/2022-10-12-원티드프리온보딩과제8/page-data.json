{"componentChunkName":"component---src-templates-post-jsx","path":"/2022-10-12-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ8/","result":{"data":{"site":{"siteMetadata":{"title":"Troy DevLog"}},"markdownRemark":{"id":"f6746d99-0c3c-57b2-8b10-1f2d3770e2c3","excerpt":"ìµœì í™”ë¥¼ ìœ„í•œ todo Btn ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ TodoItemì€ memoë¥¼ í†µí•´ ìµœì í™”ë¥¼ í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— íˆ¬ë‘ ì•„ì´í…œì— í´ë¦­ì„ í•˜ë©´ ë‹¤ë¥¸ íˆ¬ë‘ì•„ì´í…œë“¤ì´ re-renderingë˜ëŠ” ê²ƒì€ ë§‰ì•˜ë‹¤. í•˜ì§€ë§Œ ê°™ì€ TodoItem ë‚´ë¶€ì—ì„œ í´ë¦­ë˜ì§€ ì•Šì€ ë²„íŠ¼ë“¤ì´ ë‹¤ì‹œ re-renderingì´ ë˜ëŠ” ê²ƒì„ ë³´ê³ , TodoBtn ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•˜ê³  memoë¡œ ê°ì‹¸ì¤€ ë‹¤ìŒâ€¦","html":"<h2>ìµœì í™”ë¥¼ ìœ„í•œ todo Btn ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬</h2>\n<p>TodoItemì€ memoë¥¼ í†µí•´ ìµœì í™”ë¥¼ í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— íˆ¬ë‘ ì•„ì´í…œì— í´ë¦­ì„ í•˜ë©´ ë‹¤ë¥¸ íˆ¬ë‘ì•„ì´í…œë“¤ì´ re-renderingë˜ëŠ” ê²ƒì€ ë§‰ì•˜ë‹¤.</p>\n<p>í•˜ì§€ë§Œ ê°™ì€ TodoItem ë‚´ë¶€ì—ì„œ í´ë¦­ë˜ì§€ ì•Šì€ ë²„íŠ¼ë“¤ì´ ë‹¤ì‹œ re-renderingì´ ë˜ëŠ” ê²ƒì„ ë³´ê³ , TodoBtn ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•˜ê³  memoë¡œ ê°ì‹¸ì¤€ ë‹¤ìŒ,</p>\n<p>ì „ë‹¬í•´ì£¼ëŠ” í•¨ìˆ˜ë“¤ì€ useCallbackì„ í†µí•´ ë¶ˆí•„ìš”í•œ re-renderingì„ ë§‰ì•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">//TodoBtn.jsx\n\nfunction TodoBtn({ name, clicked, onClick, text }) {\n  return (\n    &lt;S.Btn name={name} clicked={clicked} onClick={onClick}&gt;\n      {text}\n    &lt;/S.Btn&gt;\n  );\n}\n\nexport default memo(TodoBtn);\n\n//TodoItem.jsx\n\nfunction TodoItem({\n  todoItem: { isCompleted, id, todo },\n  todoItem,\n  onDelete,\n  onUpdate,\n}) {\n\t...\n\n  const onClick = useCallback((e) =&gt; {\n    const { name } = e.currentTarget;\n    if (name === &#39;cancel&#39;) {\n      inputRef.current.value = ``;\n    }\n    setOnModifyMode((prev) =&gt; !prev);\n  }, []);\n\n  const handleDelete = useCallback(() =&gt; {\n    onDelete(id);\n  }, [id, onDelete]);\n\n  const handleCompleteUpdate = useCallback((e) =&gt; {\n    const { name } = e.currentTarget;\n    if (name === &#39;complete&#39;) {\n      setUpdated((prev) =&gt; {\n        return { ...prev, isCompleted: true };\n      });\n    } else {\n      setUpdated((prev) =&gt; {\n        return { ...prev, isCompleted: false };\n      });\n    }\n  }, []);\n\n  const handleSubmit = useCallback(() =&gt; {\n    const todo = inputRef.current.value;\n    if (!todo) {\n      setIsBlank(true);\n      return;\n    }\n    onUpdate({ ...updated, todo });\n    inputRef.current.value = ``;\n    setOnModifyMode((prev) =&gt; !prev);\n    setIsBlank(false);\n  }, [onUpdate, updated]);\n\n  return (\n    &lt;S.TodoLayout&gt;\n     ...\n      &lt;S.RightBox&gt;\n        {onModifyMode ? (\n          &lt;&gt;\n            &lt;div&gt;\n              &lt;TodoBtn\n                name=&#39;complete&#39;\n                clicked={updated.isCompleted}\n                onClick={handleCompleteUpdate}\n                text=&#39;CompletedğŸ™†â€â™€ï¸&#39;\n              &gt;&lt;/TodoBtn&gt;\n              &lt;TodoBtn\n                name=&#39;not yet&#39;\n                clicked={!updated.isCompleted}\n                onClick={handleCompleteUpdate}\n                text=&#39;Not yet ğŸ™…â€â™‚ï¸&#39;\n              &gt;&lt;/TodoBtn&gt;\n            &lt;/div&gt;\n            &lt;TodoBtn name=&#39;cancel&#39; onClick={onClick} text=&#39;ì·¨ì†Œí•˜ê¸°&#39;&gt;&lt;/TodoBtn&gt;\n            &lt;TodoBtn\n              name=&#39;submit&#39;\n              onClick={handleSubmit}\n              text=&#39;ì œì¶œí•˜ê¸°&#39;\n            &gt;&lt;/TodoBtn&gt;\n          &lt;/&gt;\n        ) : (\n          &lt;&gt;\n            &lt;TodoBtn\n              text={isCompleted ? &#39;CompletedğŸ™†â€â™€ï¸&#39; : &#39;Not yet ğŸ™…â€â™‚ï¸&#39;}\n            &gt;&lt;/TodoBtn&gt;\n            &lt;TodoBtn\n              name=&#39;modify&#39;\n              onClick={onClick}\n              text={&#39;ìˆ˜ì •í•˜ê¸°&#39;}\n            &gt;&lt;/TodoBtn&gt;\n          &lt;/&gt;\n        )}\n        &lt;TodoBtn onClick={handleDelete} text={&#39;ì‚­ì œí•˜ê¸°&#39;}&gt;&lt;/TodoBtn&gt;\n      &lt;/S.RightBox&gt;\n    &lt;/S.TodoLayout&gt;\n  );\n}\n\nexport default memo(TodoItem);</code></pre></div>\n<h2>fetchë¥¼ ì´ìš©í•œ ì—ëŸ¬í•¸ë“¤ë§</h2>\n<h4>ë¬¸ì œì </h4>\n<p>â€‹ ê¸°ì¡´ ì½”ë“œì—ì„œ exceptionTestë¼ëŠ” í•¨ìˆ˜ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆë˜, ì„±ê³µì„ í–ˆë˜ dataë¥¼ ë°›ì•„ì„œ, ì„±ê³µê³¼ ì‹¤íŒ¨ë¥¼ í•¨ê»˜ ì²˜ë¦¬í–ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´ ì„±ê³µê³¼ ì‹¤íŒ¨ê°€ ë¡œê·¸ì¸ê³¼ íšŒì›ê°€ì… ê°ê°ì— ë§ê²Œ ì—‰ì¼œìˆê³  ë„ˆë¬´ ë§ì€ ì¼ì„ í•˜ë‹¤ ë³´ë‹ˆ, ë°›ì•„ì•¼í•  ë³€ìˆ˜ê°€ ë§ì•„ ì´í•´í•˜ê¸° ì–´ë µê³  ìˆ˜ì •í•˜ê¸°ë„ ì–´ë ¤ì› ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> exceptionTest <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">,</span> process</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">>=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">===</span> <span class=\"token number\">401</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'ì´ë©”ì¼ í˜¹ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process <span class=\"token operator\">===</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/todo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'access_token'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span>access_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n          process <span class=\"token operator\">===</span> <span class=\"token string\">'login'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'ë¡œê·¸ì¸'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'íšŒì›ê°€ì…'</span>\n        <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>result<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>navigate<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>í•´ê²°ë°©ë²•</h4>\n<p>ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ì‹¶ì–´ì„œ ì—ëŸ¬í•¸ë“¤ë§ì— ëŒ€í•œ ìë£Œë¥¼ ê³„ì†í•´ì„œ ì°¾ê³  ìˆì—ˆì§€ë§Œ ì •í™•íˆ ì´í•´ê°€ ë˜ì§€ ì•Šì•„ì„œ ì •ë¦¬í•˜ì§€ ëª»í•˜ê³  ìˆì—ˆë‹¤ê°€, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ fetchë¥¼ ì´ìš©í•´ ì—ëŸ¬ í•¸ë“¤ë§ì„ í•˜ì‹  ê¸€ì„ ë³´ê²Œ ë˜ì—ˆë‹¤. ( <a href=\"https://www.rinae.dev/posts/how-to-handle-errors-2\">https://www.rinae.dev/posts/how-to-handle-errors-2</a>)</p>\n<p>ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>name\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">setPrototypeOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span><span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span>\n    Error<span class=\"token punctuation\">.</span>captureStackTrace <span class=\"token operator\">&amp;&amp;</span> Error<span class=\"token punctuation\">.</span><span class=\"token function\">captureStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span> <span class=\"token comment\">// í•˜ëŠ” ê¹€ì— ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ë„ ë°”ë¡œì¡ì•„ì¤ì‹œë‹¤</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HTTPError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">CustomError</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> statusCode<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">private</span> errorData<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    message<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> â€˜HTTPErrorâ€™\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">rawErrorData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>errorData\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">codeToErrorMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>statusCode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token number\">401</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You donâ€™t have a permission.</span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Error ê°ì²´ë¥¼ ìƒì†í•˜ëŠ” CustomError í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , CustomErrorí´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” HTTPErrorí´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ í•´ë‹¹ statusCodeì— ë”°ë¥¸ ê²°ê³¼ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ë°©ì‹ì´ì—ˆë‹¤.</p>\n<p>HTTPErrorí´ë˜ìŠ¤ëŠ” getterë¥¼ ì´ìš©í•´ codeToErrorMessageë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆëŠ”ë° getterë¥¼ ì´ìš©í•œ ì´ìœ ëŠ” í´ë˜ìŠ¤ì˜ statusCodeê°’ì´ ë°”ë€” ë•Œ ê°™ì´ ì—…ë°ì´íŠ¸ ë  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ì„œë¼ê³  ìƒê°ë˜ì—ˆê³ , ì§ì ‘ì ì¸ ìˆ˜ì •ì„ ë§‰ê¸°ìœ„í•´ì„œ getterë¡œ ì½ì„ ìˆ˜ë§Œ ìˆê²Œ ì„¤ì •í–ˆë‹¤ê³  ì´í•´í–ˆë‹¤.</p>\n<h4>ì ìš©í•´ë³´ê¸°</h4>\n<p>ì´ ê¸€ì„ ì œëŒ€ë¡œ ì´í•´í•˜ê³  ì´ë ‡ê²Œ í•œë²ˆ í•´ë³´ê¸°ë¡œ ë§ˆìŒë¨¹ì—ˆì„ ë•Œ ì‹œê°„ì´ ì €ë… 11ì‹œì—¬ì„œ, 12ì‹œê°€ ë˜ê¸° ì „ ì œì¶œí•´ì•¼í–ˆê¸° ë•Œë¬¸ì— ìš°ì„  HTTPErrorí´ë˜ìŠ¤ë§Œ Errorë¥¼ ìƒì†í•´ ë§Œë“¤ì—ˆë‹¤.</p>\n<p>Errorê°ì²´ë¥¼ ìƒì†í•  ë•ŒëŠ” ë°˜ë“œì‹œ messageë¥¼ ì „ë‹¬í•´ì£¼ì–´ì•¼í•˜ê¸°ì— superë¥¼ í†µí•´ ìƒì†í•œ Errorê°ì²´ì— ì „ë‹¬í•˜ê³ , statusCodeë¥¼ constructorí•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ì €ì¥í•œë‹¤. constructorë¥¼ í†µí•´ ì €ì¥í•œ statusCodeì— ë”°ë¼ messageìƒíƒœì— ì „í•´ì¤„ ê°ì²´ë¥¼ ë°˜í™˜í•˜ê²Œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.</p>\n<p>í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ HTTPì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œì˜ ë¡œì§ì„ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë” ê°€ë…ì„±ì´ ì¢‹ì•„ì¡Œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//auth.js</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HTTPError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">statusCode<span class=\"token punctuation\">,</span> message</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">HTTPError</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> statusCode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span> <span class=\"token function\">codeToErrorMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>statusCode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token number\">400</span><span class=\"token operator\">:</span>\n        result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'ë™ì¼í•œ ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤.'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> <span class=\"token number\">401</span><span class=\"token operator\">:</span>\n        result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'ì´ë©”ì¼ í˜¹ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> <span class=\"token number\">404</span><span class=\"token operator\">:</span>\n        result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'í•´ë‹¹ ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Unknown Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">postSignUp</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">email<span class=\"token punctuation\">,</span> password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">BASE_URL</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/auth/signup</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        email<span class=\"token punctuation\">,</span>\n        password<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>res<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>status<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HTTPError</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">.</span>statusText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> e<span class=\"token punctuation\">.</span>codeToErrorMessage<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë°˜í™˜í•œ ê°ì²´ë¥¼ ë°›ì•˜ë˜ handleSubmití•¨ìˆ˜ëŠ” ê°ê° loginê³¼ íšŒì›ê°€ì…ìœ¼ë¡œ 2ê°œì˜ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í–ˆë‹¤.</p>\n<p>ë¶„ë¦¬ í›„ì— ì„±ê³µí•œ ê²½ìš°ëŠ” ë‘˜ ë‹¤ access<em>tokenì´ ë“¤ì–´ìˆëŠ” ê°ì²´ë¥¼ ì „ë‹¬ë°›ê¸° ë•Œë¬¸ì— access</em>tokenì´ë¼ëŠ” í”„ë¡œí¼í‹°ì˜ ìœ ë¬´ì— ë”°ë¼ ì„±ê³µê³¼ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•˜ê²Œ í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"react\"><pre class=\"language-react\"><code class=\"language-react\">//auth.jsx\n\nconst handleLoginSubmit = useCallback(\n    (info) =&gt; {\n      const { email, password } = info;\n      postSignIn(email, password) //\n        .then((data) =&gt; {\n          if (&#39;access_token&#39; in data) {\n            navigate(&#39;/todo&#39;);\n            localStorage.setItem(&#39;access_token&#39;, data.access_token);\n          } else {\n            setLoginMessage((prev) =&gt; {\n              return {\n                ...prev,\n                ...data,\n              };\n            });\n          }\n        });\n    },\n    [navigate]\n  );\n\nconst handleRegisterSubmit = useCallback((info) =&gt; {\n    const { email, password } = info;\n    postSignUp(email, password) //\n      .then((data) =&gt; {\n        if (&#39;access_token&#39; in data) {\n          data = {\n            message: `íšŒì›ê°€ì…ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤`,\n            success: true,\n          };\n        }\n        setRegisterMessage((prev) =&gt; {\n          return {\n            ...prev,\n            ...data,\n          };\n        });\n      });\n  }, []);</code></pre></div>\n<p>ì´ë ‡ê²Œ ì—ëŸ¬ì™€ ì„±ê³µ, ë¡œê·¸ì¸ê³¼ íšŒì›ê°€ì…ì„ ë¡œì§ì„ ë¶„ë¦¬í•˜ë‹ˆê¹Œ ë” ë³´ê¸° ì¢‹ê³  ì´í•´ê°€ í¸í•´ì¡Œë‹¤.</p>\n<p>ë„ˆë¬´ ê³¼ë„í•˜ê²Œ í•©ì¹˜ëŠ” ê²Œ ë” ì´í•´í•˜ê¸° ì–´ë µë‹¤ëŠ” ê²ƒì„ ëŠê¼ˆê³ , ì—ëŸ¬í•¸ë“¤ë§ì„ í•  ë•Œ customErrorí´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë°°ìš¸ ìˆ˜ ìˆì—ˆë‹¤.</p>","frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-ë¦¬íŒ©í† ë§:todoBtn ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬,ì—ëŸ¬í•¸ë“¤ë§","date":"October 12, 2022","tags":["ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©"],"series":"ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©"},"fields":{"slug":"/2022-10-12-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ8/","readingTime":{"minutes":7.985}}},"seriesList":{"edges":[{"node":{"id":"f7e153bc-b4a1-5c03-9372-06e76a5da423","fields":{"slug":"/2022-10-04-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ 1í¸/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-ê³¼ì œ 1,2"}}},{"node":{"id":"7ae817c7-3e3f-5597-a1ce-80840e62462b","fields":{"slug":"/2022-10-05-ì›í‹°ë“œ-í”„ë¦¬ì˜¨ë³´ë”©-ê³¼ì œ-2í¸/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-ê³¼ì œ 2,3"}}},{"node":{"id":"d036a290-e927-5383-8b1d-993a8ed8c794","fields":{"slug":"/2022-10-06-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ 3í¸/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-ê³¼ì œ 3í¸"}}},{"node":{"id":"3e41dc8a-b610-5427-bfe4-9a9c3557bffb","fields":{"slug":"/2022-10-08-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ4/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-login/register ì»´í¬ë„ŒíŠ¸í™”"}}},{"node":{"id":"73a3c928-fa52-5501-9938-8eece83ae45c","fields":{"slug":"/2022-10-09-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ5/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-í´ë” êµ¬ì¡° ìˆ˜ì •"}}},{"node":{"id":"e5737f1b-7b44-5548-9a92-a0d99e8821bb","fields":{"slug":"/2022-10-10-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ6/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-HTTPì—ëŸ¬ì •ë¦¬, fetch ì—ëŸ¬í•¸ë“¤ë§ ì‹œë„"}}},{"node":{"id":"29625880-cc86-526b-b650-b9bc8ee7d16c","fields":{"slug":"/2022-10-11-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ7/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-ë¦¬íŒ©í† ë§:ìµœì í™”,netlifyë¥¼ ì´ìš©í•œ ë°°í¬"}}},{"node":{"id":"f6746d99-0c3c-57b2-8b10-1f2d3770e2c3","fields":{"slug":"/2022-10-12-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ8/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-ë¦¬íŒ©í† ë§:todoBtn ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬,ì—ëŸ¬í•¸ë“¤ë§"}}},{"node":{"id":"e6aa9c8d-2e3a-55ea-ae9e-f8eca03b270e","fields":{"slug":"/2022-10-13-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©ì‚¬ì „ê³¼ì œíšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-íšŒê³ "}}},{"node":{"id":"dafe14dd-c51d-5ae4-a73c-ae39cf910b4d","fields":{"slug":"/2022-10-25-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©-1ì£¼ì°¨-1ì¼/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ 1-1 í˜‘ë ¥íˆ´:ESLint,Prettier,Git Hook, Husky"}}},{"node":{"id":"e35bbcaa-e695-518d-b955-34ad7f1b073f","fields":{"slug":"/2022-10-25-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©-1ì£¼ì°¨-2ì¼/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ ì²«ì§¸ì£¼ ê³¼ì œ-best caseì°¾ê¸°ì™€ ë³´ì¶©ê³µë¶€:context API"}}},{"node":{"id":"fc36457b-4432-5eae-9056-606dfb375804","fields":{"slug":"/2022-10-27-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1ì£¼-3ì¼ì°¨/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ ì²«ì§¸ì£¼ ê³¼ì œ 3ì¼ì°¨-best case í”„ë¡œì íŠ¸ íšŒê³ "}}},{"node":{"id":"81e94920-65df-5f6b-b854-2701c616bcc7","fields":{"slug":"/2022-10-28-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1ì£¼ì°¨-4ì¼/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1ì£¼ì°¨ ì²«ì§¸ì£¼ 4ì¼ì°¨-ì´ˆê¸°ì„¸íŒ… ì»¤ë°‹ í•©ì¹˜ê¸°"}}},{"node":{"id":"9f2e1dec-5bb3-514e-809b-4ab032184b86","fields":{"slug":"/2022-10-31-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-1-2-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 1-2 ê³¼ì œíšŒê³ "}}},{"node":{"id":"5cac3131-6374-547f-b2c8-96e0f6084594","fields":{"slug":"/2022-11-04-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-2-1-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 2-1 ê³¼ì œíšŒê³ "}}},{"node":{"id":"15f55c7c-3142-5102-a046-55582836a60a","fields":{"slug":"/2022-11-07-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-2-2-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 2-2 ê³¼ì œíšŒê³ "}}},{"node":{"id":"20495c35-f22e-531b-b308-329bd9305a00","fields":{"slug":"/2022-11-11-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©-3-1-ê³¼ì œ-íšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 3-1 ê³¼ì œíšŒê³ "}}},{"node":{"id":"4659ef8b-53a8-5f72-bbe8-967b2b76f5b7","fields":{"slug":"/2022-11-19-ì›í‹°ë“œ-í”„ë¦¬ì˜¨ë³´ë”©-ë§ˆì§€ë§‰ ê³¼ì œíšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ë§ˆì§€ë§‰ ê³¼ì œíšŒê³ "}}}]},"previous":{"fields":{"slug":"/2022-10-11-ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©ê³¼ì œ7/"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ-ë¦¬íŒ©í† ë§:ìµœì í™”,netlifyë¥¼ ì´ìš©í•œ ë°°í¬"}},"next":{"fields":{"slug":"/2022-10-13-ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”©ì‚¬ì „ê³¼ì œíšŒê³ /"},"frontmatter":{"title":"ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì‚¬ì „ê³¼ì œ-íšŒê³ "}}},"pageContext":{"id":"f6746d99-0c3c-57b2-8b10-1f2d3770e2c3","series":"ì›í‹°ë“œí”„ë¦¬ì˜¨ë³´ë”©","previousPostId":"29625880-cc86-526b-b650-b9bc8ee7d16c","nextPostId":"e6aa9c8d-2e3a-55ea-ae9e-f8eca03b270e"}},"staticQueryHashes":[],"slicesMap":{}}